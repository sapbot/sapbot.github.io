function MisNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}!function(e,t,o,i){var n=e(t);e.fn.lazyload=function(a){function r(){var t=0;s.each((function(){var o=e(this);if(!c.skip_invisible||o.is(":visible"))if(e.abovethetop(this,c)||e.leftofbegin(this,c));else if(e.belowthefold(this,c)||e.rightoffold(this,c)){if(++t>c.failure_limit)return!1}else o.trigger("appear"),t=0}))}var l,s=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return a&&(i!==a.failurelimit&&(a.failure_limit=a.failurelimit,delete a.failurelimit),i!==a.effectspeed&&(a.effect_speed=a.effectspeed,delete a.effectspeed),e.extend(c,a)),l=c.container===i||c.container===t?n:e(c.container),0===c.event.indexOf("scroll")&&l.bind(c.event,(function(){return r()})),this.each((function(){var t=this,o=e(t);t.loaded=!1,(o.attr("src")===i||!1===o.attr("src"))&&o.is("img")&&o.attr("src",c.placeholder),o.one("appear",(function(){if(!this.loaded){if(c.appear){var i=s.length;c.appear.call(t,i,c)}e("<img />").bind("load",(function(){var i=o.attr("data-"+c.data_attribute);o.hide(),o.is("img")?o.attr("src",i):o.css("background-image","url('"+i+"')"),o[c.effect](c.effect_speed),t.loaded=!0;var n=e.grep(s,(function(e){return!e.loaded}));if(s=e(n),c.load){var a=s.length;c.load.call(t,a,c)}})).attr("src",o.attr("data-"+c.data_attribute))}})),0!==c.event.indexOf("scroll")&&o.bind(c.event,(function(){t.loaded||o.trigger("appear")}))})),n.bind("resize",(function(){r()})),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&n.bind("pageshow",(function(t){t.originalEvent&&t.originalEvent.persisted&&s.each((function(){e(this).trigger("appear")}))})),e(o).ready((function(){r()})),this},e.belowthefold=function(o,a){return(a.container===i||a.container===t?(t.innerHeight?t.innerHeight:n.height())+n.scrollTop():e(a.container).offset().top+e(a.container).height())<=e(o).offset().top-a.threshold},e.rightoffold=function(o,a){return(a.container===i||a.container===t?n.width()+n.scrollLeft():e(a.container).offset().left+e(a.container).width())<=e(o).offset().left-a.threshold},e.abovethetop=function(o,a){return(a.container===i||a.container===t?n.scrollTop():e(a.container).offset().top)>=e(o).offset().top+a.threshold+e(o).height()},e.leftofbegin=function(o,a){return(a.container===i||a.container===t?n.scrollLeft():e(a.container).offset().left)>=e(o).offset().left+a.threshold+e(o).width()},e.inviewport=function(t,o){return!(e.rightoffold(t,o)||e.leftofbegin(t,o)||e.belowthefold(t,o)||e.abovethetop(t,o))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}((function(e){var t=/\+/g;function o(e){return a.raw?e:encodeURIComponent(e)}function i(e){return o(a.json?JSON.stringify(e):String(e))}function n(o,i){var n=a.raw?o:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),a.json?JSON.parse(e):e}catch(e){}}(o);return e.isFunction(i)?i(n):n}var a=e.cookie=function(t,r,l){if(arguments.length>1&&!e.isFunction(r)){if("number"==typeof(l=e.extend({},a.defaults,l)).expires){var s=l.expires,c=l.expires=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*s)}return document.cookie=[o(t),"=",i(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d,f=t?void 0:{},u=document.cookie?document.cookie.split("; "):[],h=0,p=u.length;h<p;h++){var g=u[h].split("="),m=(d=g.shift(),a.raw?d:decodeURIComponent(d)),v=g.join("=");if(t===m){f=n(v,r);break}t||void 0===(v=n(v))||(f[m]=v)}return f};a.defaults={},e.removeCookie=function(t,o){return e.cookie(t,"",e.extend({},o,{expires:-1})),!e.cookie(t)}})),$(".labels_q").each((function(e){var t="labels_quality_"+$(this).data("id");(void 0===localStorage[t]||void 0!==localStorage[t]&&localStorage[t]!=$(this).data("last"))&&$(this).show()})),$(".labels_s").each((function(e){var t="labels_series_"+$(this).data("id");(void 0===localStorage[t]||void 0!==localStorage[t]&&localStorage[t]!=$(this).data("last"))&&$(this).show()})),$(".labels_t").each((function(e){var t="labels_translate_"+$(this).data("id");(void 0===localStorage[t]||void 0!==localStorage[t]&&localStorage[t]!=$(this).data("last"))&&$(this).show()}));var FilmsArr=[],getIds="",times=[],OutFilms=[],i=0,page=1,pass=0,user_id=0,limitPage=10;function sToHms(e){e=Number(e);var t=Math.floor(e/3600),o=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(t>0&&t<10?"0"+t+":":t>0&&t>10?t+":":"00:")+(o>0&&o<10?"0"+o+":":o>0&&o>10?o+":":"00:")+(i>0&&i<10?"0"+i:i>0&&i>10?i:"00")}function listAllFilms(){for(var e in OutFilms=[],localStorage)if(-1!=e.indexOf("pljsplayfrom_kinogo.la-")){var t=e.split("-")[1],o=localStorage[e].replace(/{([^}]+)}/,""),i=0;void 0!==(times=o.split("--"))[2]&&(i=times[2]),OutFilms.push({fid:t,vT:i,vars:localStorage[e]}),localStorage.countViewd=0,localStorage.countViewd=OutFilms.length}}void 0!==$.cookie("dle_password")&&(pass=$.cookie("dle_password"));var now=Date.now(),nowSync=!1;function mlsTodate(e){let t=new Date(e),o=new Date(now),i=new Date(now-864e5),n={year:"numeric",month:"long",day:"numeric"},a={hour:"numeric",minute:"numeric"};return t.toLocaleString("ru",n)==o.toLocaleString("ru",n)?"�������, "+t.toLocaleString("ru",a):t.toLocaleString("ru",n)==i.toLocaleString("ru",n)?"�����, "+t.toLocaleString("ru",a):t.toLocaleString("ru",n).replace(/\s*�\./,"")}function renderOverlay(){0!=OutFilms.length&&$(".shortstory").each((function(e,t){if("undefined"!=$(t).data("overlay")&&"true"==$(t).data("overlay"))return!0;$(t).data("overlay");var o=$(t).data("id");if(null!=localStorage["pljsplayfrom_kinogo.la-"+o]&&o>0){var i=localStorage["pljsplayfrom_kinogo.la-"+o].replace(/\{[^}]*\}/g,"");i=(i=i.replace(/\{[^}]*\}/g,"")).split("--");var n=100*parseInt(i[0])/parseInt(i[1]);n=200*n/100,$("#"+o+" .overlaytumb").append('<div class="overlayback"></div><div  class="overlayback" style="background-color: hsl(3, 81.8%, 49.6%); width: '+parseInt(n)+'px;"></div>'),$("#cont-"+o).text("���������� "+sToHms(parseInt(i[0]))),$("#cont-"+o).attr("class","fbutton5"),$("#dateicon-"+o).after('<span style="margin-left:10px;" class="fbutton5" onclick="rmThis(elId, \'pljsplayfrom_kinogo.la-elId\'); return false;" id="">�������</span>'.replace(/elId/g,o)),$("#cont-"+o).parent().attr("href",$("#cont-"+o).parent().attr("href")+"#autoplay"),$(t).data("overlay","true"),$("#dateicon-"+o).text(mlsTodate(parseInt(i[2])))}}))}function rmThis(e,t){localStorage.removeItem(t),0!=pass&&0!=user_id&&$.ajax({type:"POST",url:"/engine/ajax/delete.php",data:"id="+e+"&user_id="+user_id,success:function(e){}}),$(".shid"+e).fadeOut(),$(".ishid"+e).fadeOut()}function renderFilms(){if(0!=OutFilms.length){for(var e in OutFilms.sort((function(e,t){return t.vT-e.vT})),OutFilms)MisNumber(OutFilms[e].fid)&&(getIds+=OutFilms[e].fid+",");$.ajax({type:"POST",url:"/engine/ajax/getviewed.php",data:"ids="+getIds+"&cstart="+page,success:function(e){e.length<50&&$(".loadviewed").length>0&&($(".loadviewed").width(290),$(".loadviewed").text("������ ��� ���������� ��� �����������.")),OutFilms.length>limitPage?(1==page?($("#dle-content").after('<div onclick="renderFilms (); return false;" class="loadviewed" style="width:130px; padding:20px; margin:0 auto;"><button class="fbutton5" >��������� ��� </button></div>'),$(".loadviewed").before(e)):$(".loadviewed").before(e),page++):OutFilms.length<limitPage&&$("#dle-content").after(e)},error:function(e,t,o){console.log(t,o)},complete:function(e,t,o){renderOverlay(),listAllFilms()}})}}function syncData(){OutFilms=[],listAllFilms(),$.ajax({url:"/engine/ajax/viewevsync.php",type:"POST",data:"userid="+user_id+"&pass="+pass+"&data="+JSON.stringify(OutFilms),success:function(e){console.log(e),"undefined"!==e.count&&e.count>0&&$.each(e.elements,(function(e,t){"add"==t.action&&(localStorage[t.el]=t.data,OutFilms.push({fid:t.fid,vT:t.vT,vars:t.data})),"update"==t.action&&(localStorage.removeItem(t.el),localStorage[t.el]=t.data,OutFilms.push({fid:t.fid,vT:t.vT,vars:t.data})),"delete"==t.action&&(localStorage.removeItem(t.el),console.log("delete "+t.el))}))},error:function(e,t,o){console.log(t,o)},complete:function(e,t,o){"/continueviewing.html"==window.location.pathname&&OutFilms.length>0&&renderFilms(),localStorage.lastSync=now,listAllFilms()}})}function setMobile(){$.cookie("mobi"),$.removeCookie("mobi"),$.cookie("mobi","mobile",{expires:10,path:"/",domain:".kinogo.la"}),location.reload()}function setNomobile(){$.cookie("mobi"),$.removeCookie("mobi"),$.cookie("mobi","nomobile",{expires:10,path:"/",domain:".kinogo.la"}),location.reload()}void 0===localStorage.lastSync&&(nowSync=!0),now-localStorage.lastSync>18e4&&(nowSync=!0),void 0!==$.cookie("dle_user_id")?user_id=$.cookie("dle_user_id"):nowSync=!1,0!=pass&&0!=user_id&&1==nowSync&&(syncData(),console.log("synced")),"/continueviewing.html"!=window.location.pathname||nowSync||(listAllFilms(),renderFilms(),console.log("rendered")),setInterval((function(){"undefined"!=typeof player1&&1==player1.api("playing")&&0!=pass&&0!=user_id&&(console.log("autoSync"),syncData())}),18e4),$(document).ready((function(){"autoplay"==window.location.hash.replace("#","")&&0!=$(".current").length&&setTimeout((function(){$("html, body").animate({scrollTop:$(".current").offset().top-150},500),setTimeout((function(){player1.api("play")}),500)}),1e3),"/continueviewing.html"!=window.location.pathname&&(listAllFilms(),renderOverlay(),console.log("rendered"))}));