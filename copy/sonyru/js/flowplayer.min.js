!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).flowplayer=t()}(this,(function(){"use strict";const e=[],t=[];function n(){const e="undefined"!=typeof document&&"undefined"!=typeof window,t=e?navigator.userAgent:"",n=/iP(hone|od)/i.test(t)&&!/iPad/.test(t)&&!/IEMobile/i.test(t),r=/Android/.test(t)&&!/Firefox/.test(t),o=/^((?!chrome|android).)*safari/i.test(t),i=/SamsungBrowser/.test(t),s=i&&/SMART-TV/.test(t);return{controls:!n,video:function(t){return e&&document.createElement("video").canPlayType(t)},lang:e&&window.navigator.language,android:r,iphone:n,safari:o,ios:e&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,samsung:i,samsung_tv:i&&s,touch:!!("ontouchstart"in window)}}const r="click",o="dblclick",i="load",s="mouseenter",a="mouseleave",l="touchend",c="resize",u="fullscreenenter",d="fullscreenexit",f="loadedmetadata",p="loadeddata",h="progress",m="loadstart",_="pause",v="playing",E="waiting",y="canplay",g="ended",w="seeked",b="seeking",S="reap",O="config",T="landscape",A="portrait";var N=Object.freeze({__proto__:null,MOUNT:"mount",ERROR:"error",CONTEXT_MENU:"contextmenu",CLICK:r,DBL_CLICK:o,KEYUP:"keyup",KEYDOWN:"keydown",LOAD:i,MOUSE_ENTER:s,MOUSE_LEAVE:a,MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:l,TOUCH_CANCEL:"touchcancel",RESIZE:c,SCROLL:"scroll",FULLSCREEN_ENTER:u,FULLSCREEN_EXIT:d,FULLSCREEN_CHANGE:"fullscreenchange",WEBKIT_NEEDKEY:"webkitneedkey",METADATA:f,DATA:p,PROGRESS:h,TIME_UPDATE:"timeupdate",LOAD_START:m,VOLUME_CHANGE:"volumechange",PAUSE:_,PLAYING:v,PLAY:"play",WAITING:E,CAN_PLAY:y,ENDED:g,SEEKED:w,SEEKING:b,DURATION_CHANGE:"durationchange",BEFORE_PLAY:"beforeplay",BEFORE_PAUSE:"beforepause",STATE:"state",CUEPOINTS:"cuepoints",CUEPOINT_START:"cuepointstart",CUEPOINT_END:"cuepointend",VIEW_ENTER:"viewenter",VIEW_LEAVE:"viewleave",SOURCE:"src",RECOVER:"recover",REAP:S,CONFIG:O,QUALITIES:"qualities",SET_QUALITY:"quality:set",NON_RECOVERABLE_ERROR:"error:fatal",RECOMMENDATIONS_READY:"recommendationsready",AUDIO_ONLY_SOURCE:"audioonlysource",LANDSCAPE:T,PORTRAIT:A,RENDER_PLUGIN:"renderplugin",DVR:"dvr",LIVE:"live",SEEK_QUEUED:"seek:queued",SEEK_CANCEL:"seek:cancel",PLUGIN_REGISTERED:"plugin:registered",REMOTE_SESSION_STARTED:"remotesession:started",REMOTE_SESSION_ENDED:"remotesession:ended"});const k="flowplayer-ui",L="flowplayer-control",R="flowplayer-live-status",I="flowplayer-elapsed-time",C="flowplayer-timeline-bar",D="flowplayer-volume-bar",x="flowplayer-header",M="flowplayer-primary",U="flowplayer-middle",P="flowplayer-middle-zone",j="flowplayer-wait",G="flowplayer-play-icon",B="flowplayer-pause-icon",F="flowplayer-rewind-icon",H="flowplayer-volume-icon";var q=Object.freeze({__proto__:null,SUBTITLES_MENU:"flowplayer-subtitles-menu",SHARE_MENU:"flowplayer-share-menu",SPEED_MENU:"flowplayer-speed-menu",QUALITY_MENU:"flowplayer-quality-menu",AUDIO_MENU:"flowplayer-audio-menu",UI:k,CONTROL:L,CONTROL_BUTTONS:"flowplayer-control-buttons",LIVE_STATUS:R,ELAPSED:I,TIMELINE:C,CONTROL_DURATION:"flowplayer-control-duration",VOLUME_CONTROL:"flowplayer-volume-control",VOLUME_BAR:D,HEADER:x,HEADER_LEFT_ZONE:"flowplayer-header-left-zone",HEADER_RIGHT_ZONE:"flowplayer-header-right-zone",PRIMARY:M,HEADER_DURATION:"flowplayer-header-duration",MIDDLE:U,MIDDLE_ZONE:P,WAIT:j,MIDDLE_BUTTONS:"flowplayer-middle-buttons",MIDDLE_LEFT_ZONE:"flowplayer-middle-left-zone",MIDDLE_RIGHT_ZONE:"flowplayer-middle-right-zone",AIRPLAY_ICON:"flowplayer-airplay-icon",CHROMECAST_ICON:"flowplayer-chromecast-icon",SMALL_PLAY_ICON:"flowplayer-small-play-icon",SMALL_PAUSE_ICON:"flowplayer-small-pause-icon",PLAY_ICON:G,PAUSE_ICON:B,FULLSCREEN_ENTER_ICON:"flowplayer-fullscreen-enter-icon",FULLSCREEN_EXIT_ICON:"flowplayer-fullscreen-exit-icon",SKIP_NEXT_ICON:"flowplayer-skip-next-icon",SKIP_PREVIOUS_ICON:"flowplayer-skip-previous-icon",FAST_FORWARD_ICON:"flowplayer-fast-forward-icon",REWIND_ICON:F,SHARE_ICON:"flowplayer-share-icon",VOLUME_ICON:H,MUTE_ICON:"flowplayer-mute-icon",UNMUTE_ICON:"flowplayer-unmute-icon",CLOSE_ICON:"flowplayer-close-icon",FACEBOOK_ICON:"flowplayer-facebook-icon",TWITTER_ICON:"flowplayer-twitter-icon",LINK_ICON:"flowplayer-link-icon",EMBED_ICON:"flowplayer-embed-icon",LIVE_COUNTDOWN:"flowplayer-live-countdown",PLAYLIST_CONTROLS:"flowplayer-playlist-controls"});const W="is-playing",z="is-paused",V="is-loading",K="is-starting",Y="is-seeking",X="is-ended",Q="is-waiting",J="is-touched";var Z=Object.freeze({__proto__:null,PLAYING:W,FULLSCREEN:"is-fullscreen",PAUSED:z,MUTED:"is-muted",LOADED:"is-loaded",LOADING:V,STARTING:K,SEEKING:Y,GRABBING:"is-grabbing",DISABLED:"is-disabled",SMALL:"is-small",TINY:"is-tiny",RTL:"is-rtl",ENDED:X,LIVE:"is-live",ERRORED:"is-error",WAITING:Q,AUTOPLAY:"is-autoplay",NO_AUTOPLAY:"no-autoplay",SEAMLESS:"is-seamless",TOGGLING:"is-toggling",LIVE_SEEKED:"is-live-seeked",NO_DVR:"no-timeline",HAS_POSTER:"has-poster",MENU_OPENED:"has-menu-opened",TOUCHED:J,HOVERED:"is-hovered",TOUCH_DEVICE:"is-touch-device",WILL_SEEK:"will-seek",SEEKABLE:"is-seekable"});function $(e){this.message=e}$.prototype=new Error,$.prototype.name="InvalidCharacterError";var ee="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new $("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,s="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s};function te(e){this.message=e}te.prototype=new Error,te.prototype.name="InvalidTokenError";var ne,re=function(e,t){if("string"!=typeof e)throw new te("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(ee(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return ee(t)}}(e.split(".")[n]))}catch(e){throw new te("Invalid token specified: "+e.message)}};re.InvalidTokenError=te,function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.AUDIO_REQUIRED=2]="AUDIO_REQUIRED"}(ne||(ne={}));const oe=new Map,ie=(e,t)=>new(((e,t)=>{const n=e.get(t);if(!n)throw new Error(`no flowplayer component with the name ${t} exists`);const r=window.customElements.get(t);if(!r)throw new Error(`no default flowplayer component with the name ${t} exists`);const o=window.customElements.get(n);return"function"!=typeof o?r:o})(e._customElements,t))(e),se=(e,t,n)=>{window.customElements.get(t)||window.customElements.define(t,n),e.customElements.get(t)||e.customElements.set(t,t)};var ae;function le(e){e.currentSrc.match(/^blob:/)||e.load()}function ce(e){const t=document.createElement("a");return t.href=e,t.href}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function ue(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function de(e){const t=document.createElement("a");t.href=e;const n=t.pathname&&t.pathname.split(".");return n.length>1&&n[n.length-1]}function fe(e){switch(e){case"video/mpd":return"application/dash+xml";case"video/m3u8":return"application/x-mpegurl";default:return e}}!function(e){e[e.LOW=1]="LOW",e[e.MEDIUM=2]="MEDIUM",e[e.HIGH=4]="HIGH"}(ae||(ae={}));const pe=e=>{var{src:t}=e,n=ue(e,["src"]);return[Object.assign({src:t,type:t?fe("video/"+de(t)):""},n)]};function he(e){return pe({src:e})}function me(e){var{src:t,type:n}=e,r=ue(e,["src","type"]);return t&&n?[Object.assign({src:t,type:n},r)]:n&&!t?[Object.assign({type:n},r)]:pe(Object.assign({src:t},r))}var _e;!function(e){e[e.Err=0]="Err",e[e.Ok=1]="Ok"}(_e||(_e={}));const ve=[S,b,"src","seek:cancel"];var Ee;function ye(e,t){t.timer&&clearTimeout(t.timer),t.timer=t.offset=0,function(e){e.setState(Ee.FORWARD,!1),e.setState(Ee.BACKWARD,!1),e.setState("will-seek",!1)}(e)}function ge(e,t){const n=e._customElements.get(t);return n&&e.root.querySelector(n)||void 0}function we(){if("undefined"==typeof document)return!1;const e=document.documentElement;return e&&"rtl"==e.getAttribute("dir")}function be(...e){const t=document.createElement("div");return 0==e.length||t.classList.add(...e),t}function Se(e,t,n){const r=function(e){return Array.isArray(e)?e.slice(0):e.split(".")}(t);for(;r.length;){if(null==e)return n;const t=r.shift();if("string"!=typeof t)return n;e=e[t]}return null==e?n:e}function Oe(e){const t="number"==typeof e?e:parseInt(e,10);return(t>9?"":"0")+t}function Te(e){if(isNaN(e)||e>=Number.MAX_SAFE_INTEGER)return"";const t=e<0?"-":"";e=Math.round(Math.abs(e));const n=Math.floor(e/3600);let r=Math.floor(e/60);return e-=60*r,n>=1?(r-=60*n,t+n+":"+Oe(r)+":"+Oe(e)):t+Oe(r)+":"+Oe(e)}!function(e){e.FORWARD="forward",e.BACKWARD="backward"}(Ee||(Ee={}));const Ae=navigator.languages||[navigator.language];const Ne=[1e7]+""+-1e3+-4e3+-8e3+-1e11,ke=()=>"undefined"==typeof crypto?"":Ne.replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)));let Le="";!function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}}();const Re=["touchstart","touchmove"];function Ie(e,t){const n=new CustomEvent(e,{detail:t,cancelable:!0});return t&&Object.defineProperty(n,"data",{get:()=>t}),n}function Ce(e,t,n){const r=Ie(t,n);return e.dispatchEvent(r),e}function De(e,t,n){const r=Ie(t,n);return e.dispatchEvent(r),r}function xe(e,t,n,r){Array.isArray(t)?t.forEach((t=>Me(e,t,n,r))):Me(e,t,n,r)}function Me(e,t,n,r){if(o=t,!~Re.indexOf(o))return e.addEventListener(t,n,r),e;var o;const i=Object.assign(r||{},{passive:!0});return e.addEventListener(t,n,i),e}function Ue(e,t,n,r){return xe(e,t,n,Object.assign(r||{},{once:!0}))}const Pe={preload:"none",rtl:!1,controls:!0},je=["loop","muted","preload"];function Ge(e,r,o){o.toJSON=function(){return{duration:o.duration,volume:o.volume,currentTime:o.currentTime,states:o.root.className}},o.setSrc=function(t){return function(e,t,n,r={safari:!1}){const o=function(e){return"string"==typeof e?he(e):Array.isArray(e)||"object"!=typeof e?e.reduce((function(e,t){return"string"==typeof t&&(t=he(t)),"object"!=typeof t||Array.isArray(t)||(t=me(t)),e.concat(t)}),[]):me(e)}(n);return e.currentSrc&&(e.innerHTML=""),Array(...Array(o.length)).map(((e,t)=>t)).some((n=>{const i=o[n];if(_e.Ok==function(e,t,n){e.emit("src",n),"string"==typeof n.src&&(e.original_src=n.src);const r=function(e,t,n){return e.plugins.filter((e=>{return(t=e)&&"wants"in t;var t})).find((e=>e.wants(n.src||"",n,t)))}(e,t,n);return r?(r.onload(t,e.root,e,n),_e.Ok):_e.Err}(e,t,i)||_e.Ok==function(e,t,n,r={safari:!1}){return/^audio\//.test(n.type||"")&&e.emit("audioonlysource"),t.start_time&&(n.src=n.src+"#t="+t.start_time),""==e.canPlayType(n.type||"")?_e.Err:!n.drm||n.drm["com.apple.fps.1_0"]&&r.safari?("string"==typeof n.src&&(e.src=n.src),_e.Ok):_e.Err}(e,t,i,r))return!0;n==o.length-1&&"string"==typeof i.src&&(e.src=i.src)})),function(e,t){!function(e,t){e.currentSrc&&"none"!=e.opt("preload")&&(t.autoplay&&t.autoplay>0||e.load())}(e,t)}(e,t),e}(o,e,t,n())},o.playerState=o.playerState||{},o.setState=function(e,t){if(o.playerState[e]===!!t)return o;const n=Object.assign({},o.playerState,{[e]:t});return n[Q]&&(n[W]=!1),o.playerState=n,Ce(o,"state",o.playerState),o},o.createComponents=function(...e){return Array.from({length:e.length}).map(((t,n)=>ie(this,e[n])))},o.hasState=function(e){return!!o.playerState[e]},o.transitionState=function(e,t,n){!o.hasState(e)&&o.hasState(t)||(n=0),n&&o.setState("is-toggling",!0),o.setState(t,!1),o.setState(e,!0),n&&setTimeout((function(){o.setState("is-toggling",!1)}),n)},o.emit=(e,t)=>(Ce(o,e,t),o),o.on=(e,t)=>(xe(o,e,t),o),o.once=(e,t)=>(Ue(o,e,t),o),o.off=(e,t)=>{var n,r;return n=e,r=t,o.removeEventListener(n,r),o},o.poll=(e,t)=>De(o,e,t),o.togglePlay=function(t){return function(e,t,n){const r="boolean"==typeof n;if("boolean"!=typeof n&&(n=e.paused),function(e,t,n){const r=e.poll(t?"beforeplay":"beforepause",{forced:n});return r&&r.defaultPrevented}(e,n,r))return;if(!n)return e.hasState("is-live")&&e.setState("is-live-seeked",!0),e.pause();if(0==e.reaper)return;const o=e.reaper.get("__pending_play");return 0!=e.paused||o?o?(o.src!==ce(e.original_src)&&le(e),o):(function(e){return(0==e.networkState||0==e.readyState)&&e.currentSrc==ce(e.original_src)}(e)&&le(e),(e=>e.autoplay&&ne.AUDIO_REQUIRED&e.autoplay)(t)?function(e){return e.muted=!1,0==e.volume&&(e.volume=1),e.play().catch((e=>{console.warn("[flowplayer/play] autoplay audio required\n%s",e.message)}))}(e):e.play().catch((t=>(console.warn("[flowplayer/play] attempting muted autoplay\n%s",t.message),e.muted=!0,e.volume=0,e.play())))):void 0}(o,e,t)},o.toggleMute=function(e){e=null==e?!o.muted:!!e,o.muted=e,o.muted||o.volume||(o.volume=1),Ce(o,"volumechange")},o.toggleDisable=function(e){e=null==e?!o.disabled:!!e,o.setState("is-disabled",e),o.disabled=e},o.destroy=function(){o.pause();const e=t.indexOf(o);~e&&t.splice(e,1),setTimeout((function(){o.setSrc([]),o.reaper&&o.reaper.clear(),Ce(o,S)}),0)},o.setAttrs=function(e){return je.forEach((t=>{if(!(t in e))return;const n=e[t];n?o.setAttribute(t,n.toString()):o.removeAttribute(t)})),o},o.opt=function(t,n){return n=void 0===n?Se(Pe,t):n,Se(e,t,n)},o.i18n=function(e,t){if(!o.reaper)return"";const n=o.reaper.get("translations");return n?function e(t,n,r,o){return(o=o||0)>=t.length?r:Se(t[o],n,e(t,n,r,o+1))}(n,e,t||""):t||""},o.setOpts=function(t){Object.assign(e,t),"disabled"in t&&void 0!==t.disabled&&o.toggleDisable(t.disabled),"muted"in t&&void 0!==t.muted&&o.toggleMute(t.muted);const n=!!e.autoplay&&!o.hasState("no-autoplay");o.setState("is-autoplay",n),o.setState("is-rtl",o.opt("rtl",function(e){if(!e)return we();const t=e.getAttribute("dir");return t?"rtl"==t:we()}(r))),o.setState("is-live",!!e.live),o.setState("no-timeline",!(!e.live||e.dvr)),o.setState("has-poster","string"==typeof e.poster&&e.poster.length>0),o.setState("is-seekable",!!e.seekable),r.style.backgroundImage=o.hasState("has-poster")?"url('"+e.poster+"')":"",Ce(o,O,e)},o.renderPlugin=function(e){De(o,"renderplugin",e).defaultPrevented||o.root.appendChild(e)};const i={offset:0,timer:0};var s,a;a=i,(s=o).on(ve,(function(){ye(s,a)})),o.enqueueSeek=function(e){if(0!=o.opts.seekable&&!(1==o.opts.disabled&&e>0))return function(e,t,n){return isNaN(e.duration)||isNaN(e.currentTime)?{}:(t.offset+=n,0==t.offset?ye(e,t):(t.timer&&clearTimeout(t.timer),t.timer=setTimeout((function(){0!=e.reaper&&(e.currentTime=function(e,t,n=0){return Math.max(Math.min(t,e),n)}(e.currentTime+t.offset,e.duration),t.timer=0,ye(e,t))}),1e3),function(e,t){e.setState("will-seek",!0),e.setState(Ee.BACKWARD,t.offset<0),e.setState(Ee.FORWARD,t.offset>0)}(e,t),e.emit("seek:queued",t),t))}(o,i,e)},o.deviceId=function(){return function(){if(Le)return Le;try{const e=localStorage.getItem("flowplayer/uuid");if(e)return e;const t=ke();return localStorage.setItem("flowplayer/uuid",t),t}catch(e){return Le=ke()}}()}}function Be(e,t){const n=t.querySelector("video"),r=n||(e._video_element_callback?e._video_element_callback(e):document.createElement("video"));return r.classList.add("fp-engine"),r.playsInline=!0,n||t.append(r),r}function Fe(e,t){if("object"==typeof exports&&"undefined"!=typeof module)return t;"flowplayer"in e||(e.flowplayer={extensions:[]});const n=e.flowplayer;return"function"==typeof n?(n(t),t):(Array.isArray(n.extensions)||(n.extensions=[]),~n.extensions.indexOf(t)||n.extensions.push(t),t)}function He(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}const qe=["localhost","127.0.0.1","0.0.0.0","s.codepen.io","cdpn.io","try.flowplayer.com"];function We(e,t){return!!~qe.indexOf(e)||e.indexOf(t)===e.length-t.length}We.check_whitelist=function(e){return!!~qe.indexOf(e)};const ze="production";function Ve(e,t){const n={valid_jwt:!1,raw:"",data:{acl:0},exp:0};let r={c:"{}",exp:0};t=t||{};try{r=re(e),n.valid_jwt=!0}catch(e){}return n.raw=e,n.data=JSON.parse(r.c),n.exp=r.exp,t.require_valid_token&&Ve.validate(n),n}function Ke(e){try{return Ve.validate(e),{success:!0,message:""}}catch(e){return{success:!1,message:e.message}}}var Ye;function Xe(e){return{grant:e,is_granted:t=>(e&t)===t}}function Qe(e,t,n){t&&t.destroy(),console.error(new Error(n.details||n.reason)),e.innerHTML="",e.classList.remove("flowplayer"),e.classList.add("flowplayer-fatal"),e.innerHTML='\n    <h2>Playback Error</h2>\n    <p>Are you the site owner?</p>\n    <a class="troubleshoot" target="_blank" href="https://flowplayer.com/help/developers/troubleshooting">Troubleshoot?</a>\n    <img src=""https://flowplayer.com/user/pages/images/logo-white.png""/>\n  '}function Je(e,t){const n=t.clientWidth;t.classList.toggle("is-small",n<600),t.classList.toggle("is-tiny",n<400)}function Ze(e,t,r){let o=!0;t.classList.add("flowplayer"),Je(0,t),xe(r,[m,c],(function(){Je(0,t)})),xe(r,"state",(function(){Object.entries(r.playerState).forEach((function([e,n]){t.classList.toggle(e,n)}))})),xe(r,"timeupdate",(function(){r.setState(Q,!1)})),xe(r,O,(function(){const n=r.paused&&(!e.autoplay||t.classList.contains("no-autoplay"))&&0==r.currentTime;[V,K].forEach((function(e){r.setState(e,n)}))})),xe(r,g,(function(t){setTimeout((function(){t.defaultPrevented||(e.rewind&&!r.loop&&(e.autoplay&&(e.autoplay=0,r.setState("is-autoplay",!1)),r.setState(Y,!0),Ue(r,w,(function(){r.setState(Y,!1),r.pause(),r.setState(K,!0)})),r.currentTime=0),Ue(r,"timeupdate",(function(){r.setState(X,!1)})),r.transitionState(X,W,e.loop||e.rewind?0:300))}),0)})),xe(r,[b,w],(function(e){r.setState(Y,e.type==b),r.setState(z,r.paused),r.setState(W,!r.paused)})),xe(r,g,(function(){r.setState(W,!1),o=!0})),xe(r,n().ios?f:p,(function(e){const t="src"!=e.type||"none"!==r.opt("preload");r.setState("is-loaded",t),r.setState(V,!t)})),xe(r,[E,y,m],(function(t){if(!r.hasState(Y)&&(t.type!=y||e.autoplay||r.setState(Q,!1),t.type!=m||"none"!=r.opt("preload")||e.autoplay)){if(t.type==m&&e.autoplay)return Ue(r,v,(function(){r.setState(Q,!1)}));t.type==E&&[W,z,K].forEach((function(e){r.setState(e,!1)})),r.setState(X,!1),r.setState(Q,t.type==E)}})),xe(r,[v,_],(function(t){setTimeout((()=>{const e=new CustomEvent("flowplayer/"+t.type,{detail:r});document.dispatchEvent(e)}),0);const n=t.type==v,i=r.currentTime==r.duration,s=n&&o&&e.autoplay||r.hasState(Q);if(n&&(r.started=!0,o=!1),r.setState(Q,!1).setState(K,!1),i||r.hasState(Y))return;const a=n?W:z,l=n?z:W;r.transitionState(a,l,s?0:300),n&&r.setState("no-autoplay",!1)}))}function $e(e){const t=function(e){const t=e.getBoundingClientRect(),n=window.innerHeight,r=t.height,o=t.bottom,i=r/5;return t.top<=i&&t.top+r>n-i||o-r+i>=0&&o<n+i}(e.root);return e.in_viewport===t||(e.in_viewport=t,Ce(e,t?"viewenter":"viewleave")),e}function et(e,n,o){$e(o);const i={should_resume:!!e.autoplay,has_user_gesture:!1,locked:!1};[l,r].forEach((e=>Ue(o,e,(()=>i.has_user_gesture=!0)))),xe(o,"play",(function(){i.locked||(i.should_resume=!0)})),xe(o,_,(function(){i.locked||(i.should_resume=!1)})),xe(o,y,(function(n){!e.autoplay||t.filter((function(e){return!e.paused})).length&&!e.multiplay||o.in_viewport&&o.paused&&i.should_resume&&o.togglePlay(!0)})),e.autopause&&(xe(o,"viewenter",(function(){i.should_resume&&o.togglePlay(!0)})),xe(o,"viewleave",(function(){const e=!o.paused;i.locked=!0,o.pause(),setTimeout((function(){i.should_resume=e,i.locked=!1}),0)})))}function tt(e){if("number"==typeof e&&!isNaN(e))return Number(e);if("string"==typeof e){const t=e.split(":");return Number(t[1])/Number(t[0])}return e}function nt(e,t,n){const r=document.createElement("div");r.classList.add("fp-ratio"),t.append(r);let o=tt(e.ratio||.5625);r.style.paddingTop=100*o+"%";const i=[p,f];n.on(i,(function(){const e=n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth;e&&n.setOpts({ratio:e})})),n.on(O,(function(){const t=n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth,i=tt((null==e?void 0:e.ratio)||t||.5625);o!==i&&(o=i,r.style.paddingTop=100*i+"%")}))}Ve.validate=function(e){if("string"==typeof e&&(e=Ve(e)),!e||!e.raw){if(We.check_whitelist(window.location.hostname)||"dev"===ze.toString())return!0;throw new Error("No token provided in configuration")}if(!e.valid_jwt)throw new Error("Invalid token provided");const t=window.location.hostname,n=We.bind(null,t);if("dev"!==ze.toString()&&e.data.domain&&e.data.domain.length&&!e.data.domain.some(n))throw new Error("Domain not allowed");if("dev"!==ze.toString()&&1e3*e.exp-Date.now()<0)throw new Error("Expired token");return!0},Ve.id=function(e){if(e)return"string"==typeof e&&(e=Ve(e)),e.data.id},function(e){e[e.ADS=2]="ADS",e[e.ANALYTICS=4]="ANALYTICS",e[e.NO_METERING=8]="NO_METERING",e[e.DEVELOPER_PLAN=16]="DEVELOPER_PLAN"}(Ye||(Ye={})),Xe.of=Xe,Xe.from_token=function(e){const t=Ve(e,{require_valid_token:!0});return Xe.of(t.data.acl)},Xe.permissions=Ye,[i,c].forEach((e=>{window.addEventListener(e,(function(){t.forEach((function(e){const t=e.root;t.prevWidth!=t.clientWidth&&(Ce(e,c),t.prevWidth=t.clientWidth)}))}))})),window.addEventListener("scroll",(function(){t.forEach($e)}));class rt{constructor(){this.cleanUp=this.cleanUp.bind(this),this.render=this.render.bind(this),this.wireUp=this.wireUp.bind(this)}init(e,t,n){this.root=t,this.player=n,this.wireUp()}wireUp(){var e,t;this.cleanUp(),null===(e=this.player)||void 0===e||e.once(v,this.render),null===(t=this.player)||void 0===t||t.once(g,this.wireUp)}cleanUp(){var e,t,n,r;null===(t=null===(e=this._logo)||void 0===e?void 0:e.parentElement)||void 0===t||t.removeChild(this._logo),null===(n=this.player)||void 0===n||n.off(v,this.render),null===(r=this.player)||void 0===r||r.off(g,this.wireUp)}render(){var e,t,n;null===(t=null===(e=this._logo)||void 0===e?void 0:e.parentElement)||void 0===t||t.removeChild(this._logo);const r=(null===(n=this.root)||void 0===n?void 0:n.querySelector(".fp-ui"))||this.root;if(!r)return;const o=this._logo=document.createElement("a");o.href="https://explorer.flowplayer.com",o.target="_blank",Object.entries(ot).forEach((([e,t])=>{o.style.setProperty(e,t,"important")})),r.appendChild(o)}}const ot={display:"block",opacity:"1",visibility:"visible",width:"33%","padding-top":"9%",position:"absolute","z-index":"9999",bottom:"25%",left:"10%","background-size":"cover","background-image":"url(https://static.flowplayer.com/explorer/explorer.svg)"},it="flowplayer/"+v;function st(e){const t=t=>{t.detail!==e&&!e.opt("multiplay")&&e.pause()};e.on(S,(()=>document.removeEventListener(it,t))),document.addEventListener(it,t)}const at=function(){const e=He(),t=e.flowplayer?e.flowplayer:{extensions:[]};return Array.isArray(t.extensions)||(t.extensions=[]),t}();function lt(n,r){if("function"==typeof n)return e.push(...[...arguments].filter((e=>"function"==typeof e))),lt;"string"==typeof r&&(r={src:r}),r||(r={}),r.token||"string"!=typeof window.__FLOWPLAYER_TOKEN||(r.token=window.__FLOWPLAYER_TOKEN);const o="string"==typeof n?document.querySelector(n):n;if(!o)return console.error(new Error("Flowplayer: '"+n.toString()+"' not found"));const i=o.querySelector("video.fp-engine");if(i)return i;const s=Ke(r.token);if(!s.success)return Qe(o,null,{reason:"token",details:s.message});const a=new Map,l=Be(r,o);l.reaper=a,l._customElements=oe,Object.defineProperty(l,"token",{value:"string"==typeof r.token?Ve.id(r.token):"",writable:!1}),l.addEventListener(S,(()=>{a.clear(),l.reaper=0,delete l.root})),l.root=o,r.token&&Xe.from_token(r.token).is_granted(Xe.permissions.DEVELOPER_PLAN)&&e.push(rt),!~t.indexOf(l)&&t.push(l),Ge(r,o,l),l.setAttrs(r),l.plugins=lt.extensions.map((e=>new e(lt,l))),Ze(r,o,l),et(r,0,l),nt(r,o,l),st(l),l.plugins.forEach((e=>{try{e.init(r,o,l)}catch(t){console.log("Error(plugin/%s)",e.constructor.name,t)}})),l.setOpts(r),l.opts=r,r.src&&l.setSrc(r.src);const c=l.readyState;return c>0&&l.currentSrc&&l.emit(f),c>2&&l.currentSrc&&l.emit(y),l.emit("mount"),l.on("error:fatal",(function(e){Qe(o,l,e.data||{})})),l}Object.assign(lt,at),function(r){Array.isArray(r.extensions)&&r.extensions.forEach((t=>e.push(t))),r.customElements=oe,r.defaultElements=q,r.version="3.0.2",r.commit="8cb54448b417ccbf511048e11696c74848197191",r.instances=t,r.extensions=e,r.support=n,r.events=N,r.states=Z,r.jwt=re,r.autoplay=ne,r.quality=ae}(lt),"object"==typeof document&&setTimeout(Ce,0,document,"flowplayer:umd",lt);var ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ut(e){var t={exports:{}};return e(t,t.exports),t.exports}var dt=ut((function(e,t){var n=ct&&ct.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0,t.remove=t.downcase=t.pluck=t.merge=void 0,t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return n(n({},e),t)}),{})},t.pluck=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return Object.keys(e).filter((function(e){return~n.indexOf(e)})).reduce((function(n,r){var o;return t.merge(n,((o={})[r]=e[r],o))}),{})},t.downcase=function(e){return(e||"").toString().toLowerCase()},t.remove=function(e,t){var n=e.lastIndexOf(t);return~n&&e.splice(n,1),e}})),ft=ut((function(e,t){var n=ct&&ct.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=ct&&ct.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=ct&&ct.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};t.__esModule=!0;var i=o(dt),s=function(){function e(){this.pending=[],this.open=[],this.stats={failures:0,ttl:0}}return e.of=function(){return new e},e.is_empty=function(e){return 0==e.pending.length},e.is_high_water=function(t){return t.open.length==e.MAX_OPEN_REQUESTS},e.maybe_spawn_req=function(t){if(e.is_empty(t))return t;if(e.is_high_water(t))return t;try{var n=e.lpop(t);n&&e.request(t,n)}catch(e){}},e.increment_failures=function(t){return t.stats.failures++,t.stats.failures>e.MAX_FAILURE_COUNT&&(t.stats.ttl=Date.now()+e.REQUEST_TTL_MS),t},e.handle_error=function(t,n){e.rm(t,n),e.increment_failures(t)},e.request=function(t,n){var r=n[0],o=n[1],i=n[2];if(!(Date.now()<t.stats.ttl)){var s=new XMLHttpRequest;t.open.push(s),s.timeout=e.REQUEST_TIMEOUT_MS,s.ontimeout=function(){e.handle_error(t,s)},s.onerror=function(n){e.handle_error(t,s)},s.onreadystatechange=function(){s.readyState==XMLHttpRequest.DONE&&e.rm(t,s),Math.floor(s.status/100)},s.onload=function(){e.rm(t,s),t.stats.failures&&t.stats.failures--},s.open(o,r),s.setRequestHeader("Content-Type","text/plain;charset=UTF-8");try{s.send(JSON.stringify(i))}catch(e){}}},e.rpush=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.forEach((function(n){t.pending.length>=e.MAX_PENDING||(t.pending.push(n),e.maybe_spawn_req(t))})),t},e.lpop=function(e){return e.pending.shift()},e.rm=function(e,t){return i.remove(e.open,t),e},e.MAX_OPEN_REQUESTS=3,e.MAX_PENDING=5,e.REQUEST_TIMEOUT_MS=4e3,e.REQUEST_TTL_MS=5e3,e.MAX_FAILURE_COUNT=3,e}();t.default=s})),pt=ut((function(e,t){var n=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=n(ft);t.default=r.default.of()})),ht=ut((function(e,t){t.__esModule=!0,t.prepare_url=t.URL_PARAM=void 0,t.URL_PARAM=/:([a-zA-Z_]+)/g,t.prepare_url=function(e,n){return e.url.replace(t.URL_PARAM,(function(t){if((t=t.slice(1,t.length))in n)return n[t].toString();e.log.error(new Error("\n      preparing url["+e.url+"] failed\n      \n      parameter["+t+"] not detected in params:\n      \n      "+JSON.stringify(n,null,2)+"\n    "))}))}})),mt=ut((function(e,t){t.__esModule=!0,t.Log=void 0;var n=function(){function e(e){this.emitter=e}return e.prepare=function(e,t){var n=document.createEvent("Event");return n.initEvent(e,!1,!0),n.ns=e,n.data=t,n},e.of=function(t){return new e(t)},e.prototype.info=function(t){this.emitter.dispatchEvent(e.prepare(e.NAMESPACE.INFO,t))},e.prototype.error=function(t){this.emitter.dispatchEvent(e.prepare(e.NAMESPACE.ERROR,t))},e.prototype.warn=function(t){this.emitter.dispatchEvent(e.prepare(e.NAMESPACE.WARN,t))},e.NAMESPACE={INFO:"tracker:info",ERROR:"tracker:err",WARN:"tracker:warn"},e}();t.Log=n})),_t=ut((function(e,t){var n;t.__esModule=!0,t.Verb=void 0,(n=t.Verb||(t.Verb={})).POST="POST",n.PUT="PUT",n.GET="GET"})),vt=ut((function(e,t){var n=ct&&ct.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=ct&&ct.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=ct&&ct.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},i=ct&&ct.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},s=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=s(pt),l=s(ft),c=o(ht),u=o(dt),d=function(){function e(t,n){var r=this;void 0===n&&(n={});var o=this;if(this.emitter=t,this.url=n.url,this.log=mt.Log.of(this.emitter),this.verb=n.verb,this.metadata=u.merge({},n.metadata||{}),this.rq=n.rq||a.default,this.events=n.events||[],this.required_keys=n.required_keys||[],this.optional_keys=n.optional_keys||[],this.listeners=[],this.valid_keys=this.required_keys.slice(0).concat(this.optional_keys),e.assert_emitter_api(this.emitter),void 0===e.verb[this.verb])throw new Error("invalid HTTP verb["+this.verb+"] passed");if("string"!=typeof this.url)throw new Error("invalid API url["+this.url+"] passed");e.TRACKERS.push(this),o.events.forEach((function(t){e.create_listener(r,t,(function(n){void 0===n&&(n={});var i=u.merge(o.metadata,{event_type:t},n.data||n),s=c.prepare_url(o,i),a=e.pluck_valid_keys(o,i),d=e.ensure_required_keys(o,a);if(d.length)return o.log.error("Tracker.validate_metadata() failed for \n            Event["+t+"]\n            missing keys: "+d+"\n            payload:\n              "+JSON.stringify(a,null,2));l.default.rpush(r.rq,[s,r.verb,a])}))}))}return e.of=function(t,n){return new e(t,n)},e.ensure_required_keys=function(e,t){return e.required_keys.filter((function(e){return!(e in t)}))},e.pluck_valid_keys=function(e,t){return u.pluck.apply(u,i([t],e.valid_keys))},e.merge_metadata=function(t,n){return void 0===n&&(n={}),t.metadata=e.pluck_valid_keys(t,u.merge(t.metadata,n)),t},e.assert_emitter_api=function(e){if("function"!=typeof(e||{}).addEventListener)throw new Error("Tracker() received an emitter that does not implement the addEventListener method");if("function"!=typeof(e||{}).removeEventListener)throw new Error("Tracker() received an emitter that does not implement the removeEventListener method")},e.create_listener=function(e,t,n){e.listeners.push([t,n]),e.emitter.addEventListener(t,n)},e.prototype.destroy=function(){var t=this;this.listeners.forEach((function(e){var n=e[0],r=e[1];return t.emitter.removeEventListener(n,r)})),delete this.rq,delete this.emitter,u.remove(e.TRACKERS,this)},e.prototype.put=function(t){return void 0===t&&(t={}),e.merge_metadata(this,t),this},e.TRACKERS=[],e.QUEUE=a.default,e.verb=_t.Verb,e}();t.default=d})),Et=ut((function(e,t){var n=ct&&ct.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=ct&&ct.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=ct&&ct.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},i=ct&&ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.API=t.Tracker=void 0;var s=i(vt);t.Tracker=s.default;var a=o(ht);t.API=a})),yt="ping",gt="display",wt="view";const bt=["sitegroup_id","session_id","media_id","site_id","player_id","video_type"],St=["created","position"],Ot=["player_version","created","source","category","category_id","autoplay","muted","customer_user_id"];function Tt(e,t){return e.duration/1===e.duration&&Object.assign(t,function(e){const t=e/100;return{segment_duration:t,breakpoints:Array(...Array(100)).map((function(e,n){return Math.floor(n*t*1e3)/1e3}))}}(e.duration))}function At(e,t){return Math.min(Math.floor(e.currentTime/t.segment_duration),99)}const Nt=[gt,yt,wt];function kt(e,t,n){switch(null==t?void 0:t.kind){case"live":return function(e,t){const n=Date.now();n-t.last_tracked_ts<6e4||(t.last_tracked_ts=n,++t.ticks,e.emit(yt,{position:60*t.ticks}))}(e,t);case"vod":return function(e,t,n){if(!t.segment_duration&&!Tt(e,t))return;const r=function(e,t,n){const r=t.last_idx,o=n?99:At(e,t);return t.last_idx=o,o<=r?[]:t.breakpoints.slice(r,99==o?100:o).map((function(e){return t.breakpoints.indexOf(e)}))}(e,t,n);0!=r.length&&e.emit(yt,{position:r})}(e,t,"boolean"==typeof n&&n)}}function Lt(e){const t=e.ads;return void 0!==t&&void 0!==t.schedule&&"function"==typeof t.hasPreroll&&(t.currentRequests?t.currentRequests:!!t.adPlaying||!(!t.hasPreroll()||0!=t.nextIndex))}function Rt(){try{return window.location!==window.parent.location?document.referrer:document.location.href}catch(e){return!1}}class It{init(e,t,n){if(!Xe.from_token(e.token||"").is_granted(Xe.permissions.ANALYTICS))return;if(n.analytics)return;const r=n.analytics={ticker:void 0,last_media_id:"",ended:!1},o={locked:!1,ttl:6e3,task:()=>{kt(n,r.ticker)}},i={session_id:n.deviceId(),autoplay:n.autoplay,muted:n.muted,player_id:e.player_id,customer_user_id:e.customer_user_id},s=Et.Tracker.of(n,{verb:Et.Tracker.verb.POST,url:"https://ptm.flowplayer.com/:video_type/:sitegroup_id/:event_type",events:Nt,required_keys:bt,optional_keys:Ot.concat(St).slice(0),metadata:i});n.on(S,(function(){s&&s.destroy()})),n.on(O,(function(t){if(!s)return;const o=Se(t,"data.metadata",{});if(!o.media_id)return;const i=Se(s,"metadata.media_id");if(i&&o.media_id==i)return;const a=Se(e,"analytics",{});s.put(o),s.put(a);const l=Se(e,"metadata.live_start_time",e.live)?"live":"vod";s.put({video_type:l,source:e.source||Rt()||""}),r.ticker=e.live?{ticks:0,last_tracked_ts:Date.now(),kind:"live"}:{last_idx:0,segment_duration:0,breakpoints:[],kind:"vod"},r.ended=!1,n.emit(gt)}));let a=0;n.on(v,(function(){if(!s)return;if(a||function(e,t){return e.metadata.media_id&&e.metadata.media_id==t.last_media_id}(s,r))return;s.put({muted:n.muted});const e=Lt(n);if(e)return a=Promise.resolve(e).then((function(){r.last_media_id=s.metadata.media_id,n.emit(wt),a=0})).catch((function(){a=0}));r.last_media_id=s.metadata.media_id,n.emit(wt)})),n.on("timeupdate",(function(){var t;s&&(a||Lt(n)||r.ended||(!e.live&&n.currentTime+.25>=n.duration&&kt(n,r.ticker,!0),(t=o).locked||(t.locked=setTimeout((function(){return t.task(),function(e){return e.locked=!1,e}(t)}),t.ttl))))})),n.on(w,(function(){s&&r.ticker&&"vod"==r.ticker.kind&&function(e,t){Tt(e,t),t.last_idx=At(e,t)}(n,r.ticker)})),n.on(g,(function(){s&&function(e,t){t.ended||(t.ended=!0,kt(e,t.ticker))}(n,r)}))}}var Ct;function Dt(e){switch(e){case Ct.MEDIA_PLAYBACK_ABORTED:return"media playback was aborted";case Ct.MEDIA_ERR_NETWORK:return"a network error occurred";case Ct.MEDIA_ERR_DECODE:return"unable to decode media content";case Ct.MEDIA_ERR_SRC_NOT_SUPPORTED:return"unsupported media type";case Ct.NO_INTERNET:return"no internet connection detected";case Ct.MIXED_CONTENT:return"cannot load insecure content in a secure context";default:return"an unknown error occurred"}}function xt(){}function Mt(e){try{return!!new URL(e)}catch(e){return!1}}Fe(He(),It),"undefined"!=typeof window&&window.matchMedia&&[T,A].forEach((function(e){window.matchMedia("(orientation: "+e+")").addListener((function(n){t.length&&t.forEach((function(t){n.matches&&t.emit(e)}))}))})),function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.MEDIA_PLAYBACK_ABORTED=1]="MEDIA_PLAYBACK_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED",e[e.MIXED_CONTENT=1001]="MIXED_CONTENT",e[e.NO_INTERNET=1002]="NO_INTERNET"}(Ct||(Ct={}));const Ut=()=>!0===(navigator||{}).onLine;function Pt(e,t,n){n.on("error",(function(e){const t=e.data||n.error||new Error,r=e.code||t.code,o="Error: %s\n"+(null===(i=(new Error).stack)||void 0===i?void 0:i.split("\n").slice(2).join("\n"));var i;setTimeout((function(){if(e.defaultPrevented)return;if("AbortError"==t.name)return;n.setState("is-error",!0),8===r||t.fatal||function(e){const t=e.togglePlay,n=e.root;e.togglePlay=xt,e.once("recover",(function(){e.togglePlay=t,e.setState("is-error",!1);const r=n.querySelector(".fp-error");r&&r.remove()}))}(n);const i=function(e,t,n){switch(t){case"http:0":return function(e){return function(e){try{return"https:"===location.protocol&&"http:"==function(e){const t=document.createElement("a");return t.href=e,t}(e).protocol}catch(e){return!1}}(e.original_src)?{code:Ct.MIXED_CONTENT}:Ut()?{code:Ct.MEDIA_ERR_NETWORK}:Ut()?{code:Ct.UNKNOWN}:{code:Ct.NO_INTERNET}}(e);case Ct.MEDIA_ERR_SRC_NOT_SUPPORTED:return e.once(m,(function(){e.emit("recover")})),n;default:return n}}(n,r,t),s=function(e,t){if(t.message)return t.message;if(t.stack)return t.stack;const n=t.code||-1,r=Dt(n);return e.i18n("media_errors."+n,r)}(n,i);console.error(o,s);const a=n.reaper&&n.reaper.get("ui");return a&&function(e,t,n,r){if(!e)return;const o=document.createElement("div");if(o.classList.add("fp-error"),o.innerText=t,e.append(o),n){const e=document.createElement("div");e.classList.add("fp-error-details"),e.innerText=n,o.append(e)}}(a,s,t.details)}))}))}var jt=Object.freeze({__proto__:null,NO_FULLSCREEN:1,NO_VOLUME_CONTROL:2,NO_MUTE:4,LOGO_ON_RIGHT:8,USE_DRAG_HANDLE:16,USE_PLAY_2:32,USE_PLAY_3:64,USE_THIN_CONTROLBAR:128,NO_TITLE:256,NO_DESCRIPTION:512,NO_CONTROLS:1024,NO_DURATION:2048,NO_HEADER:4096,AUDIO_ONLY:8192,NO_TOUCH_ZONES:16384});function Gt(e,t,n){let r=()=>document.fullscreenElement,i="fullscreenchange";if(!Element.prototype.requestFullscreen){const e=Element.prototype,t=document;e.webkitRequestFullScreen&&(e.requestFullscreen=e.webkitRequestFullScreen,t.fullscreenEnabled=!0),t.webkitCancelFullScreen&&(document.exitFullscreen=t.webkitCancelFullScreen),i="webkit"+i,r=()=>t.webkitCurrentFullScreenElement}const s=()=>n.getFullsceenTarget?n.getFullsceenTarget():t;n.toggleFullScreen=function(e,t){if(n.ios_fullscreen_disabled)return;if("boolean"!=typeof e&&(e=!n.hasState("is-fullscreen")),Bt(n)&&(e?function(e){e.getAttribute("playsinline")&&e.removeAttribute("playsinline"),e.getAttribute("webkit-playsinline")&&e.removeAttribute("webkit-playsinline"),e.webkitEnterFullScreen()}(n):function(e,t){e.getAttribute("playsinline")||e.setAttribute("playsinline",""),e.getAttribute("webkit-playsinline")||e.setAttribute("webkit-playsinline",""),t||e.webkitExitFullScreen(),e.togglePlay(!1),e.hasState(J)||e.setState(J,!0)}(n,t)),!document.fullscreenEnabled)return;const r=s();e?r.requestFullscreen():document.exitFullscreen()},Bt(n)&&(n.ios_fullscreen_disabled=!0,n.once("beforeplay",(function(){n.ios_fullscreen_disabled=!1})),n.on("webkitendfullscreen",(function(){n.toggleFullScreen(!1,!0)}))),setTimeout((()=>{const e=s();e.addEventListener(i,(function(){const t=r(),o=t===e||t==n;n.emit(o?u:d),n.setState("is-fullscreen",o),n.emit(c)}))}),0),!1!==e.doubleclick&&t.addEventListener(o,(function(e){var t;e.target&&(null===(t=e.target)||void 0===t?void 0:t.classList.contains("fp-ui"))&&n.toggleFullScreen()}))}function Bt(e){return n().ios&&"function"==typeof e.webkitEnterFullScreen&&"function"==typeof e.webkitExitFullScreen}function Ft(e){if("object"!=typeof e.opts)return{head:0,tail:0};if(0==e.seekable.length)return{head:0,tail:0};const t=e.opt("live_dvr_window",0),n=e.seekable.end(e.seekable.length-1);return{head:n,tail:Math.max(e.seekable.start(0),n-t)}}function Ht(e){return e.opt("live",!1)||e.duration>=Number.MAX_SAFE_INTEGER}function qt(e){return isFinite(e.duration)?e.duration:0==e.seekable.length?0:e.seekable.end(0)}function Wt(e){return function(e){return Ft(e).head}(e)-.5}function zt(e){try{return localStorage.getItem(e)}catch(e){return null}}function Vt(e,t){try{localStorage.setItem(e,t)}catch(e){}}class Kt{init(e,t,n){n.reaper&&n.reaper.set("translations",function(e,t,n){const r={};return n=t.lang||n,e[n]&&(r[n]=e[n]),function(){try{return Ae.reduce(((e,t)=>~t.indexOf("-")?e.concat(t,t.split("-")[0]):e.concat(t)),[])}catch(e){return[]}}().forEach((function(t){e[t]&&!r[t]&&(r[t]=e[t])})),Object.values(r)}(Kt,e,"en"))}}Kt.en={ads:{ad:"Ad",ads:"Ads",advertisement:"Advertisement"},audio:{button_txt:"Audio",menu_title:"Audio"},core:{exit_fullscreen:"Exit fullscreen",fullscreen:"Fullscreen",mute:"Mute",pause:"Pause",play:"Play",unmute:"Unmute",volume:"Volume"},ovp:{starting_in:"Countdown"},playlist:{cancel:"Cancel",up_next:"Up next"},qsel:{menu_title:"Quality"},share:{clipboard_failure:"Access to clipboard failed",clipboard_success:"The text is now on your clipboard",embed:"Embed",link:"Link",menu_title:"Share"},speed:{menu_title:"Speed"}};const Yt="rebuffer";var Xt=Object.freeze({__proto__:null,RECORD:"health:record",REBUFFER:Yt});const Qt=navigator;function Jt(e){var t,n;const r=null===(t=e.hls)||void 0===t?void 0:t.bandwidthEstimate;return r?1e-6*r:(null===(n=Qt.connection)||void 0===n?void 0:n.downlink)||-1}const Zt=ke(),$t=[];function en(e){const t=$t.slice(0);$t.length=0,e.logger.log(`:dispatch events={${t.length}}`),function(e,t){(function(e,t){"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(e,t)})(e,JSON.stringify({events:t}))}("https://health.flowplayer.com/v1/health/events",t)}function tn(e,t,n){$t.push(t),e.logger.log(":enqueue",t.event,t),$t.length<10&&!n||en(e)}const nn=()=>{var e,t;try{const n=window;return null===(t=null===(e=null==n?void 0:n.google)||void 0===e?void 0:e.ima)||void 0===t?void 0:t.VERSION}catch(e){return}},rn=(e,t)=>Object.assign(e,{detail:t}),on=(e,{event:t,media_session_id:n})=>({event:t,media_session_id:n,device_id:e.deviceId(),session_id:Zt,timestamp:Date.now(),version:"3.0.2",commit:"8cb54448b417ccbf511048e11696c74848197191",ima_sdk_version:nn(),preload:e.opt("preload"),autoplay:e.opt("autoplay",e.autoplay),source:e.original_src,downlink_mbs:Jt(e),player_id:e.opt("metadata.player_id"),media_id:e.opt("metadata.media_id"),site_id:e.opt("metadata.site_id"),category_id:e.opt("metadata.category_id"),sitegroup_id:e.opt("metadata.sitegroup_id"),token:e.token,plugins:e.plugins.map((e=>e.constructor.name)).sort(((e,t)=>e.localeCompare(t))),current_time:e.currentTime}),sn=e=>({bitrate:null==e?void 0:e.bitrate,resolution:null==e?void 0:e.attrs.RESOLUTION,frame_rate:null==e?void 0:e.attrs["FRAME-RATE"]});const an=(e,t)=>{let n=null;return(...r)=>{null!==n&&(clearTimeout(n),n=null),n=setTimeout((()=>t(...r)),e)}};class ln{constructor(e,t){if(this.logger=function(e,t){return{log:(...n)=>{const r=e.opt("debug");r&&t.match(r)&&console.log(t,...n)}}}(t,"health"),this.media_session_id=ke(),!ln._UNLOAD_SUBSCRIBED){ln._UNLOAD_SUBSCRIBED=!0;const t=()=>e.instances.forEach((e=>e.emit("unload")));document.addEventListener("visibilitychange",(()=>{"hidden"==document.visibilityState&&t()})),window.addEventListener("pagehide",t)}}init(e,t,n){!function(e){e.on(E,(function(t){e.seeking||e.networkState===e.NETWORK_LOADING&&e.readyState!==e.HAVE_NOTHING&&e.emit(Yt)}))}(n),n.on("health:record",(({detail:e})=>{const t=on(n,{event:e.event,media_session_id:this.media_session_id});Object.assign(t,e.detail||{}),tn(this,t)})),[y,m,i,f,p,h,E,Yt].forEach((e=>{n.on(e,(e=>{tn(this,on(n,{event:e.type,media_session_id:this.media_session_id}))}))})),[v,_,b,w,g,u,d].forEach((e=>{n.on(e,(e=>{tn(this,on(n,{event:e.type,media_session_id:this.media_session_id}))}))})),n.on("volumechange",an(800,(e=>{const t=on(n,{event:e.type,media_session_id:this.media_session_id});tn(this,rn(t,{volume:parseFloat(n.volume.toFixed(2)),muted:n.muted}))}))),n.on(c,an(800,(e=>{const r=on(n,{event:e.type,media_session_id:this.media_session_id});tn(this,rn(r,{height:t.clientHeight,width:t.clientWidth}))}))),n.on("qualitychange",(({type:e,detail:t})=>{switch(t.kind){case"hls":return function(e,t,n,r){const o=on(t,{event:n,media_session_id:e.media_session_id}),{before:i,after:s}=r;tn(e,((e,t,n)=>Object.assign(e,{state:{before:t,after:n}}))(o,sn(i),sn(s)))}(this,n,e,t)}})),n.addEventListener("error",(e=>{const t=on(n,{event:e.type,media_session_id:this.media_session_id}),r=e.error||n.error;if(!r)return tn(this,t,!0);const o=r.code,i={error_message:r.message||Dt(o),error_code:o,error_stack:r.stack||""};return tn(this,rn(t,i),!0)})),n.on("src",(e=>{var t;const r=null===(t=e.detail)||void 0===t?void 0:t.src;"string"==typeof r&&Mt(n.original_src)&&Mt(r)&&r!=n.original_src&&(this.media_session_id=ke(),tn(this,on(n,{event:e.type,media_session_id:this.media_session_id})),en(this))})),n.on("unload",(e=>{tn(this,on(n,{event:e.type,media_session_id:this.media_session_id})),en(this)}))}}var cn;function un(e,t){if(function(e){return Object.values(cn).includes(e)}(t=t||cn.Anonymous))return"crossOrigin"in e?e.crossOrigin=t:e.setAttribute("crossorigin",t),e}function dn(e){const t=document.createElement("a");return t.href=e,t.origin}ln.events=Xt,ln._UNLOAD_SUBSCRIBED=!1,Fe(window,ln),function(e){e.Anonymous="anonymous",e.UseCredentials="use-credentials",e.Empty=""}(cn||(cn={}));var fn=Object.freeze({__proto__:null,CHAPTER_CHANGED:"chapter:changed",CHAPTERS_NEW:"chapters:new"});class pn{constructor(){this._track_added_handler=xt,this._cue_changed_handler=xt,this.chapters=[],this.render=this.render.bind(this)}init(e,t,n){this._root=t,this._player=n,this._timeline=ge(n,C),this._track_added_handler=this.track_added.bind(this,n),this._cue_changed_handler=this.cue_changed.bind(this,n),n.textTracks.addEventListener("addtrack",this._track_added_handler),this.wireup(n,e),n.chapters=this,n.on(O,(e=>{e.data&&this.wireup(n,e.data)})),n.on(S,(()=>{this.wiredown(n),n.textTracks.removeEventListener("addtrack",this._track_added_handler),n.off("durationchange",this.render)})),n.on("durationchange",this.render)}track_added(e,t){}cue_changed(e,t){var n;this._current_chapters_track&&(this.current_cue=this._current_chapters_track.track.activeCues?this._current_chapters_track.track.activeCues[0]:void 0,this._timeline&&Ce(this._timeline,"chapter:changed",null===(n=this.current_cue)||void 0===n?void 0:n.text))}set_chapters(e){this.chapters=e,this.render()}jump(e){this._player&&this.chapters[e]&&(this._player.currentTime=this.chapters[e].start)}current(){if(this.current_cue)return this.chapters.find((e=>e.cue==this.current_cue))}render(){if(!this._root||!this._player||!this._timeline)return;const e=this._player.duration;isFinite(e)&&(Ce(this._timeline,"chapters:new",this.chapters.map((t=>({title:t.label,left:t.start/e*100+"%",width:(t.end-t.start)/e*100+"%"})))),this._root.classList.toggle("has-chapters",!!this.chapters.length))}wireup(e,t){const n=Array.isArray(t.chapters)?t.chapters[0]:t.chapters;n&&n.src!==this._current_chapters_src&&(this.wiredown(e),this._current_chapters_track=function(e,t){const n=document.createElement("track");n.className="fp-track renderable",n.kind=t.kind||"captions",n.id=["fp",t.lang].join("-");const r=n.track;return"string"!=typeof t.crossorigin&&function(e,t){try{return e.src.startsWith("blob:"),dn(e.src)!==dn(t)}catch(e){return console.error(e),!0}}(e,t.src)&&(un(e),t.crossorigin=e.getAttribute("crossorigin")),"crossorigin"in t&&un(e,t.crossorigin),Object.keys(t).forEach((e=>{n[e]=t[e]})),r.mode=t.default?"showing":t.mode||"disabled",n.onload=function(){},r.oncuechange=function(t){e.emit(t.type,{track:t.target})},e.appendChild(n),n}(e,Object.assign(Object.assign({},n),{kind:"chapters",mode:"hidden"})),this._current_chapters_track.onload=()=>{var e;(null===(e=this._current_chapters_track)||void 0===e?void 0:e.track.cues)&&this.set_chapters(Array.from(this._current_chapters_track.track.cues).filter((e=>e instanceof VTTCue)).map((e=>{const t=e;return{start:e.startTime,end:e.endTime,cue:t,label:t.text}})))},this._current_chapters_src=n.src,this._current_chapters_track.addEventListener("cuechange",this._cue_changed_handler))}wiredown(e){this.set_chapters([]),this._current_chapters_track&&(this._current_chapters_track.removeEventListener("cuechange",this._cue_changed_handler),e.removeChild(this._current_chapters_track))}}pn.events=fn,Fe(window,pn);class hn extends HTMLElement{constructor(e){super(),this.player=e}}class mn extends hn{constructor(e){super(e),this.classList.add("fp-primary");const t={logo:""};e.on(O,(e=>{var n,r;const o=t.logo,i=(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.logo)||"";o!=i&&(t.logo=i,this.set_logo(i,null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.logo_href))}))}set_logo(e,t){if(this.innerHTML="",!e)return;const n=document.createElement("img");if(n.classList.add("fp-logo"),n.src=e,!t)return this.append(n);const r=document.createElement("a");r.href=t,r.append(n),this.append(r)}}class _n extends hn{constructor(e){super(e),this.classList.add("fp-duration"),e.on(O,(e=>{var t;const n=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.duration)||NaN;this.innerText=isFinite(n)?Te(n):""}))}}const vn={name:"fp-fullscreen",translation_key:"core.fullscreen"},En={name:"fp-fullscreen-exit",translation_key:"core.exit_fullscreen"},yn={name:"fp-play",translation_key:"core.play"},gn={name:"fp-pause",translation_key:"core.pause"},wn={translation_key:"core.mute",name:"fp-volume-mute-unmute"},bn={translation_key:"core.play",name:"fp-small-play"},Sn={translation_key:"core.pause",name:"fp-small-pause"},On={name:"fp-fast-forward"},Tn={name:"fp-rewind"};class An extends hn{constructor(e,t){super(e),this.classList.add("fp-icon",t.name),t.title&&this.setAttribute("title",t.title),t.title&&this.setAttribute("aria-label",t.title),this.setAttribute("tabindex","0"),this.setAttribute("focusable","true")}}document.addEventListener(r,(function(e){this.active_menu&&!e.composedPath().includes(this.active_menu)&&(Array.from(document.querySelectorAll(".fp-engine")).forEach((e=>{const t=e.root.querySelector("details[open].fp-menu-container");t&&(t.open=!1,e.root.classList.toggle("has-menu-opened",!1))})),this.active_menu=void 0)}));const Nn={passive:!0};var kn;function Ln(e,t){let n=0,r=-1,o=-1;const i=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),s=e.classList;e.id=i,s.remove(kn.GRABBING),s.remove(kn.TOUCHING);const a=t.onseek||xt,c=t.onstart||xt,u=t.onend||xt,d=t.onmouse||xt,f=t.ontouch||xt,p=t.ontouchend||xt;function h(t){!function(){const t=e.getBoundingClientRect();n=t.left,r=t.width}();let o=(function(e){return"function"==typeof window.TouchEvent&&e instanceof TouchEvent}(t)?t.changedTouches[0].pageX:t.pageX)-n;return o>r&&(o=r),o<0&&(o=0),o/r*100}function m(t){const n=h(t);n!=o&&(a(e,n),o=n)}return e.addEventListener("touchstart",(function(t){Rn(e,t)&&(s.add(kn.TOUCHING),In(e.parentElement)&&(t.preventDefault(),s.add(kn.GRABBING),f(e,h(t)),c(e,h(t)),m(t)))}),Nn),e.addEventListener("touchmove",(function(t){t.preventDefault(),m(t),d(e,h(t))}),Nn),e.addEventListener(l,(function(t){setTimeout((function(){s.remove(kn.TOUCHING)}),500),Rn(e,t)&&(t.preventDefault(),s.remove(kn.GRABBING),p(e,h(t)),u(e,h(t)),r=0)}),Nn),e.addEventListener("touchcancel",(function(){s.remove(kn.GRABBING,kn.TOUCHING),r=0}),Nn),e.addEventListener("mousedown",(function(t){s.contains(kn.TOUCHING)||(document.addEventListener("mousemove",m),s.add(kn.GRABBING),c(e,h(t)),t.preventDefault(),m(t))})),e.addEventListener("mousemove",(function(t){s.contains(kn.TOUCHING)||d(e,h(t))})),document.addEventListener("mouseup",(function(t){s.contains(kn.TOUCHING)||(document.removeEventListener("mousemove",m),s.contains(kn.GRABBING)&&(s.remove(kn.GRABBING),u(e,h(t)),r=0))})),e}function Rn(e,t){const n=t.target;return!!n&&(n&&!n.closest(e.id)||!In(e.parentElement)||!e.classList.contains(kn.TOUCHING))}function In(e){if(!e)return!1;const t=window.getComputedStyle(e);return"0"!==t.width&&"0"!==t.height&&"0"!==t.opacity&&"none"!==t.display&&"hidden"!==t.visibility}!function(e){e.GRABBING="has-grab",e.TOUCHING="has-touch"}(kn||(kn={}));class Cn extends hn{constructor(e){super(e),this.className="fp-volume";const t=e.root.classList,n=t.contains("is-tiny")?6:t.contains("is-small")?8:10,r=Array.from({length:n}).map((()=>{const e=document.createElement("i");return e.className="fp-tick",e}));this.append(...r),Ln(this,{onseek:(t,n)=>{n>0&&(e.muted=!1,function(e){try{localStorage.removeItem("mute")}catch(e){}}()),Vt("volume",(e.volume=n/100).toString()),this.adjustVolumeSlider(e.volume)}}),this.setAttribute("tabindex","0"),this.setAttribute("role","slider"),this.setAttribute("aria-valuemin","0"),this.setAttribute("aria-valuemax","1"),this.setAttribute("aria-label",e.i18n("core.volume","volume")),e.on("volumechange",(()=>{(0==e.volume||e.muted)&&this.adjustVolumeSlider(0),this.classList.contains(kn.GRABBING)||this.adjustVolumeSlider(e.volume)}))}adjustVolumeSlider(e){this.setAttribute("aria-valuenow",e.toString());const t=Array.from(this.querySelectorAll(".fp-tick")),n=Math.round(e*t.length);t.forEach(((e,t)=>{e.classList.toggle("fp-color",t<n)}))}}function Dn(e,t){if(!e.parentElement)return;const n=e.clientWidth/e.parentElement.clientWidth*100/2;e.style.left=t-n+"%",e.style.display="block"}function xn(e,t){if(isNaN(e.duration))return;const n=e.buffered;n.length&&(t.style.width=Math.min(n.end(n.length-1)/e.duration*100,100)+"%")}function Mn(e,t){e.style.width="0",t.style.width="0",t.style.display="none"}function Un(e,t,n){if(t.seeking||!t.seekable||0==t.seekable.length)return;const r=Pn(t,e/100);Dn(n,e);const o=isFinite(t.duration)?r:t.seekable.start(0)+r;n.innerText=Te(o)}function Pn(e,t){if(t>1||t<0)return console.warn("cannot calculate a percent outside of range(0..1)"),0;if(isFinite(e.duration))return qt(e)*t;const n=e.seekable.start(0);return n+t*(e.seekable.end(0)-n)}function jn(e,t){e.style.width="0",t.style.display="none"}class Gn extends hn{constructor(e){let t;super(e),this.bufferEle=be("fp-buffer"),this.progress=be("fp-progress","fp-color"),this.tooltipEle=be("fp-timestamp"),this.proposedSeekBar=be("fp-hover"),this.dragger=be("fp-dragger","fp-color"),this.classList.add("fp-timeline","fp-bar"),this.tooltipEle.style.display="none",this.setAttribute("role","slider"),this.setAttribute("tabindex","0"),this.setAttribute("aria-label",e.i18n("timeline","Timeline")),this.progress.append(this.dragger),this.append(this.bufferEle,this.progress,this.proposedSeekBar,this.tooltipEle);let n=!1;const r=requestAnimationFrame;let o;const i=()=>{var n;0==e.reaper||t.live||(n=e,this.progress.style.width=n.currentTime/n.duration*100+"%",o=void 0,e.paused||this.classList.contains(kn.GRABBING)||o||(o=setTimeout(i,200)))},s=()=>!!this.player.opt("opts.seekable",!0)&&!isNaN(this.player.duration);Ln(this,{onseek:(n,r)=>{if(s())switch(!!t.live){case!0:Un(r,e,this.tooltipEle);break;case!1:!function(e,t,n){const r=t.duration*(e/100);if(t.disabled&&r>t.currentTime)return!1;n.style.width=e+"%",t.currentTime=r}(r,e,this.progress),Dn(this.tooltipEle,r)}},onstart:()=>{s()&&(e.emit("timeline/gesture/start"),e.setState(Y,!0),t.live||function(e){e.style.display="block"}(this.tooltipEle))},onend:function(n,o){r(i),0!=t.seekable&&(e.setState(Y,!1),t.live&&function(e,t){e/=100,t.currentTime=Pn(t,e)}(o,e))},ontouch:function(){e.paused||(n=!0,e.pause())},ontouchend:()=>{n&&(n=!1,e.play()),t.live?jn(this.proposedSeekBar,this.tooltipEle):Mn(this.proposedSeekBar,this.tooltipEle)},onmouse:(n,r)=>{if(s()&&!this.classList.contains(kn.GRABBING))switch(e.emit("timeline/gesture/move",{percent:r}),!!t.live){case!0:!function(e,t){t.style.width=function(e){return 100-e}(e)+"%"}(r,this.proposedSeekBar),Un(r,e,this.tooltipEle);break;case!1:!function(e,t){t.style.width=e+"%"}(r,this.proposedSeekBar),function(e,t,n){if(isNaN(e)||isNaN(t.duration))return;Dn(n,e),n.innerHTML="";const r=document.createElement("span");r.innerText=Te(e/100*t.duration),n.append(r)}(r,e,this.tooltipEle)}}}),e.on(O,(function(e){e.data&&(t=e.data)})),e.on(v,(()=>r(i))),e.on("live",(()=>{this.progress.style.width="0%"})),e.on(h,(()=>{0==e.reaper||t.live||xn(e,this.bufferEle)})),e.on("dvr",(e=>{e.detail&&(this.progress.style.width=e.detail.offset+"%")})),e.on("timeupdate",(()=>{0!=e.reaper&&(r(i),this.setAttribute("aria-valuenow",e.currentTime+""),t.live||xn(e,this.bufferEle))})),e.on(f,(()=>{0!=e.reaper&&(t.live||xn(e,this.bufferEle))})),e.on("durationchange",(t=>{if(0==e.reaper)return;const n=Ht(e)?qt(e):t.data||e.duration;isNaN(n)||(this.setAttribute("aria-valuemax",n+""),this.setAttribute("aria-valuemin","0"))})),this.addEventListener(a,(()=>{e.emit("timeline/gesture/end"),t.live?jn(this.proposedSeekBar,this.tooltipEle):Mn(this.proposedSeekBar,this.tooltipEle)}))}}class Bn extends Gn{constructor(e){super(e),this.handleChapters(e)}handleChapters(e){const t=document.createElement("div");let n;this.addEventListener("chapters:new",(e=>{t.innerText="",this.querySelectorAll(".fp-chapter").forEach((e=>this.removeChild(e))),e.data&&e.data.forEach((e=>{const r=document.createElement("div");r.className="fp-chapter",r.style.left=e.left,r.style.bottom=r.style.top="0",r.style.width=e.width,r.title=e.title,r.onmouseover=()=>{t.innerText=e.title},r.onmouseleave=()=>{t.innerText=n||""},this.appendChild(r)}))})),this.addEventListener("chapter:changed",(r=>{var o;const i=r.data;i&&(t.parentNode||(null===(o=ge(e,L))||void 0===o||o.insertAdjacentElement("beforebegin",t),t.classList.toggle("fp-togglable",!0),t.classList.toggle("fp-chapter-info",!0)),n=i,t.innerText=i)}))}}class Fn extends hn{constructor(e){super(e),this.classList.add("fp-live-status");const t=be("fp-live-text"),n=be("fp-live-indicator","fp-color");t.innerHTML="live",this.append(n,t),this.addEventListener(r,(function(){!function(e){try{if(!e.hasState("is-live-seeked"))return;e.emit("live"),e.dvr_offset=0,e.currentTime=Wt(e)}catch(e){console.warn("failed to seek to now: %j",e)}}(e)}))}}class Hn extends hn{constructor(e){let t;super(e),this.classList.add("fp-duration"),e.on(O,(n=>{if(0==e.reaper||!n.data)return;t=n.data;const r=Ht(e)?NaN:n.data.duration||0;if(isNaN(r)||r>=Number.MAX_SAFE_INTEGER)return this.style.display="none";this.style.display="inline-block",this.innerText=Te(r)})),e.on(f,(()=>{var n;0==e.reaper||t.live||(this,(n=e).duration&&(this.innerText=Te(n.duration)))}))}}class qn extends hn{constructor(e){let t;super(e),this.classList.add("fp-elapsed"),this.innerText=Te(0),e.on(O,(e=>{e.data&&(t=e.data)})),e.on("timeupdate",(()=>{var n;0!=e.reaper&&(t.live?(n=e,this.innerText=Te(n.currentTime)):function(e,t){t.innerText=Te(e.currentTime)}(e,this))}))}}class Wn extends hn{constructor(e){super(e),this.classList.add("fp-btns","fp-small-switch");const t=ie(e,"flowplayer-small-pause-icon"),n=ie(e,"flowplayer-small-play-icon");t.addEventListener("click",(function(){e.togglePlay(),setTimeout((function(){n.focus&&n.focus()}),100)})),n.addEventListener("click",(function(){e.togglePlay(),setTimeout((function(){t.focus&&t.focus()}),100)})),this.append(t,n)}}class zn extends hn{constructor(e,t){super(e),this.classList.add(t);const n=this.classList.contains("fp-left-zone")?-1:1,r=document.createElement("span"),o=ie(e,this.classList.contains("fp-left-zone")?F:"flowplayer-fast-forward-icon");o.removeAttribute("tabindex"),r.classList.add("fp-zone-seconds"),this.append(r,o),e.on(w,(()=>{r.innerText=""})),e.on("seek:queued",(e=>{const t=e.data;if(!t)return;if("number"!=typeof t.offset)return;const n=t.offset;if(0==n)return this.reset_zone();n>0&&this.classList.contains("fp-right-zone")||n<0&&!this.classList.contains("fp-right-zone")?this.render_zone_state(n):this.reset_zone()})),e.on("seek:cancel",(()=>{this.reset_zone()})),this.reset_zone(),this.addEventListener(l,(function(t){isNaN(e.duration)||isNaN(e.currentTime)||16384&e.opt("ui")||e.hasState("no-timeline")||!e.hasState("will-seek")&&!e.hasState(J)||e.enqueueSeek(5*n)&&(t.stopPropagation(),t.preventDefault())}))}reset_zone(){const e=this.querySelector(".fp-zone-seconds");e&&(e.innerText="")}render_zone_state(e){const t=this.querySelector(".fp-zone-seconds");t&&(t.innerText=Math.abs(e)+"")}}class Vn extends hn{constructor(e,t,...n){super(e),this.className=t;const o=e.createComponents(...n);this.append(...o),"fp-left"!==t&&o.forEach((t=>{t.addEventListener(r,(()=>e.toggleFullScreen()))}))}}class Kn extends hn{constructor(e){super(e),this.classList.add("fp-wait"),Array(...Array(4)).map(((e,t)=>t)).forEach((()=>{this.append(document.createElement("b"))}))}}class Yn extends hn{constructor(e){super(e),this.classList.add("fp-middle-zone");const t=e.createComponents(j,"flowplayer-middle-buttons");this.append(...t)}}class Xn extends hn{constructor(e){super(e),this.classList.add("fp-switch"),[G,B].forEach((t=>{const n=ie(e,t);n.removeAttribute("tabindex"),this.append(n)}))}}class Qn extends hn{constructor(e){super(e),this.classList.add("fp-volume-control");const t=ie(e,H);this.append(t),!n().ios&&this.append(ie(e,D)),t instanceof An&&t.addEventListener(r,(function(){e.toggleMute()}))}}class Jn extends hn{constructor(e){super(e),this.classList.add("fp-header"),this.append(...e.createComponents("flowplayer-header-left-zone","flowplayer-header-right-zone")),e.reaper&&e.reaper.set("header",this)}}class Zn extends hn{constructor(e){super(e),this.classList.add("fp-controls","fp-togglable"),this.append(...e.createComponents("flowplayer-control-buttons",R,I,C,"flowplayer-control-duration","flowplayer-volume-control"))}}class $n extends An{constructor(e,t){super(e,t),this.setAttribute("role","button"),this.setAttribute("aria-label",e.i18n(t==vn?"core.fullscreen":"core.fullscreen_exit"))}}class er extends hn{constructor(e){super(e),this.classList.add("fp-middle"),this.append(...e.createComponents("flowplayer-middle-left-zone",P,"flowplayer-middle-right-zone")),this.setAttribute("tabindex","0"),this.setAttribute("role","button"),this.setAttribute("aria-label",e.i18n("core.play")),e.reaper&&e.reaper.set("middle",this),this.handleClick(e),this.handleTouch(e),[v,w].forEach((t=>e.once(t,(()=>{this.removeAttribute("tabindex"),this.removeAttribute("role"),this.removeAttribute("aria-label")}))))}handleClick(e){[r,o].forEach((t=>this.addEventListener(t,(function(t){if(!t.defaultPrevented)return t.preventDefault(),e.emit(t.type),!1})))),e.on(r,(function(t){setTimeout((function(){t.defaultPrevented||e.hasState(Q)||e.togglePlay()}),0)})),e.on(o,(function(t){setTimeout((function(){t.defaultPrevented||e.toggleFullScreen()}),0)}))}handleTouch(e){let t=!1;this.addEventListener(l,(function(t){0!=t.cancelable&&(t.preventDefault(),e.emit(t.type,{source:t}))})),e.on(l,(function(n){setTimeout((function(){if(n.defaultPrevented)return;if(e.hasState(Q))return;if(e.ended)return e.togglePlay(!0);const r=e.hasState(K);t&&clearTimeout(t),(r||e.hasState(J)||e.hasState("no-autoplay"))&&(e.hasState(J)&&(e.setState(J,!1),e.setState("is-hovered",!1)),e.togglePlay(),r)||(e.setState(J,!0),e.paused||(t=setTimeout((function(){t=!1,e.setState(J,!1),e.setState("is-hovered",!1)}),2e3)))}),0)}))}}class tr extends hn{constructor(e){super(e),this.classList.add("fp-ui"),this.append(...e.createComponents(x,U,L))}}return lt.extensions.unshift.apply(lt.extensions,[Kt,It,ln,class{constructor(e){se(e,k,tr),se(e,L,Zn),se(e,R,Fn),se(e,"flowplayer-control-duration",Hn),se(e,C,e.extensions.find((e=>e.name===pn.name))?Bn:Gn),se(e,I,qn),se(e,D,Cn),se(e,"flowplayer-volume-control",Qn),se(e,"flowplayer-control-buttons",Wn),se(e,x,Jn),se(e,M,mn),se(e,"flowplayer-header-duration",_n),se(e,"flowplayer-header-left-zone",class extends Vn{constructor(e){super(e,"fp-left",M,"flowplayer-header-duration")}}),se(e,"flowplayer-header-right-zone",class extends Vn{constructor(e){super(e,"fp-right fp-togglable","flowplayer-fullscreen-enter-icon","flowplayer-fullscreen-exit-icon")}}),se(e,U,er),se(e,P,Yn),se(e,j,Kn),se(e,"flowplayer-middle-buttons",Xn),se(e,"flowplayer-middle-right-zone",class extends zn{constructor(e){super(e,"fp-right-zone")}}),se(e,"flowplayer-middle-left-zone",class extends zn{constructor(e){super(e,"fp-left-zone")}}),se(e,"flowplayer-small-play-icon",class extends An{constructor(e){super(e,bn),this.setAttribute("role","button")}}),se(e,"flowplayer-small-pause-icon",class extends An{constructor(e){super(e,Sn),this.setAttribute("role","button")}}),se(e,G,class extends An{constructor(e){super(e,yn)}}),se(e,B,class extends An{constructor(e){super(e,gn)}}),se(e,"flowplayer-fullscreen-enter-icon",class extends $n{constructor(e){super(e,vn)}}),se(e,"flowplayer-fullscreen-exit-icon",class extends $n{constructor(e){super(e,En)}}),se(e,"flowplayer-fast-forward-icon",class extends An{constructor(e){super(e,On)}}),se(e,F,class extends An{constructor(e){super(e,Tn)}}),se(e,H,class extends An{constructor(e){super(e,wn),this.classList.add("fp-volumebtn"),e.on("volumechange",(()=>{const t=0==e.volume||e.muted;this.setAttribute("aria-label",t?e.i18n("unmute","unmute"):e.i18n("mute","mute"))}))}})}init(e,t,n){var r;(function(e,t,n){if(Xe.from_token(e.token||"").is_granted(Xe.permissions.NO_METERING))return;const r=Ve.id(e.token||"");r&&n.once(v,(()=>function(e,t){fetch("https://pmi.flowplayer.com/in",{method:"POST",body:JSON.stringify({token_id:t,factor:1,rnd:Math.random().toString(36).substring(2)})}).then((t=>{401==t.status&&e.emit("error:fatal",{reason:"token",details:"The token online validation failed"})}))}(n,r)))})(e,0,n),function(e,t,n){if(!n.reaper)return;const r=document.createDocumentFragment(),o=ie(n,k);r.appendChild(o),n.reaper.set("ui",o),~t.className.indexOf("use-play-")||t.classList.add("use-play-1"),function(e,t,n){const r=be("fp-footer");t.append(r),n.on(O,(function(e){var t,n;const o=null===(t=e.data)||void 0===t?void 0:t.description,i=null===(n=e.data)||void 0===n?void 0:n.title;if(r.innerHTML="","string"==typeof i){const e=be("fp-title");e.innerText=i,r.append(e)}if("string"==typeof o){const e=o.split(" "),t=be("fp-desc");for(t.innerText=e.join(" "),r.append(t);e.length>1&&t.scrollHeight>t.offsetHeight;)e.pop(),t.innerText=e.join(" ")+"..."}}))}(0,t,n),Pt(0,0,n),t.appendChild(r),[s,a].forEach((e=>{t.addEventListener(e,(function(e){n.setState("is-hovered",e.type==s),n.setState("is-accessibility",!1)}))})),Gt(e,t,n),n.on("volumechange",(function(){const e=0==n.volume||n.muted;n.setState("is-muted",e),Vt("mute",e.toString())})),"true"==zt("mute")&&(n.muted=!0,n.setState("is-muted",n.muted));const i=zt("volume");i&&!isNaN(Number(i))&&(n.volume=Number(i)),n.emit("volumechange"),n.on("timeupdate",(function(){var t;e.live&&(!("dvr"in(t=e))||1==t.dvr)&&function(e,t){if(0==t)return!0;const n=Ft(e);return n.head-n.tail>=t}(n,e.seconds_to_dvr||0)&&n.setOpts({dvr:n.seekable.length>0})})),n.on("live",(function(){n.setState("is-live-seeked",!1)})),n.on("seeking",(function(){if(!Ht(n))return;if(0==n.seekable.length||0==n.played.length)return;if(0==qt(n))return;const e=Wt(n),t=n.currentTime>=e?"live":"dvr";if("live"===t)return n.emit(t);const r=qt(n),o=n.seekable.end(0)-n.seekable.start(0),i=(r-n.currentTime)/o*100,s=Math.round(i);n.setState("is-live-seeked",s>0),n.emit(t,{offset:s})})),n.on(f,(function(){n.setOpts({live:Ht(n)})})),n.on("durationchange",(function(e){const t=Ht(n),r=t?qt(n):e.data||n.duration;isNaN(r)||n.setOpts({live:t,duration:r})})),n.on(O,(function(n){var r,o;e.seekable=void 0===(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.seekable)||n.data.seekable;const i=null===(o=n.data)||void 0===o?void 0:o.ui;if("number"!=typeof i)return;const s=t.classList;s.toggle("use-play-1",!(32&i||64&i)),s.toggle("use-play-2",(32&i)>0),s.toggle("use-play-3",(64&i)>0),s.toggle("use-thin-controlbar",(128&i)>0),s.toggle("no-title",(256&i)>0),s.toggle("no-description",(512&i)>0),s.toggle("logo-on-right",(8&i)>0),s.toggle("use-drag-handle",(16&i)>0),s.toggle("no-controls",(1024&i)>0),s.toggle("no-duration",(2048&i)>0),s.toggle("no-header",(4096&i)>0),s.toggle("no-mute",(4&i)>0),s.toggle("no-volume",(2&i)>0),s.toggle("no-fullscreen",(1&i)>0),s.toggle("no-touch-zones",(16384&i)>0)}));let l=null;o.addEventListener("mousemove",(function(){"number"==typeof l&&clearTimeout(l),n.setState("is-hovered",!0),l=0==n.paused&&setTimeout((function(){n.setState("is-hovered",!1)}),2e3)}))}(e,t,n),r=n,"undefined"!=typeof window&&"ontouchstart"in window&&r.setState("is-touch-device",!0),r.setState("is-accessibility",!1)}}]),Object.assign(lt,{ui:jt,i18n:Kt})}));