!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e="undefined"!=typeof globalThis?globalThis:e||self).flowplayer=e.flowplayer||{},e.flowplayer.keyboard=t())}(this,(function(){"use strict";!function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}}();var e={TAB:9,ENTER:13,ESCAPE:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,F:70,H:72,J:74,K:75,L:76,M:77};let t,n;function i(e){e.setState("is-kb-active",!0),clearTimeout(t),t=setTimeout((function(){e.setState("is-kb-active",!1)}),2500)}function o(e,t){e.enqueueSeek(t)&&i(e)}const r=[e.ARROW_UP,e.ARROW_RIGHT,e.ARROW_LEFT,e.ARROW_DOWN],s=[e.SPACE,e.F,e.ESCAPE,e.M,e.ARROW_UP,e.ARROW_DOWN,e.ARROW_RIGHT,e.ARROW_LEFT,e.H,e.J,e.K,e.L];function u(e,t){e.volume=function(e,t,n=0){return Math.max(Math.min(t,e),n)}(e.volume+t,1,0),i(e)}function a(e){e.preventDefault(),e.stopPropagation()}function c(e,t){return!!f(e,t)}function f(e,t){return!!e.parentElement&&(e.parentElement.matches(t)?e.parentElement:c(e.parentElement,t))}document.addEventListener("keydown",(function(t){setTimeout((function(){t.defaultPrevented||function(t){const i=t.which,l=n,R=function(e,t,n){const i=function(e){return Array.isArray(e)?e.slice(0):e.split(".")}(t);for(;i.length;){if(null==e)return n;const t=i.shift();if("string"!=typeof t)return n;e=e[t]}return null==e?n:e}(l,"opts.keyboard.seek_step",5),d=document.activeElement;if(!d)return;if(!l)return;if((i===e.SPACE||i===e.ENTER)&&d.hasAttribute("tabindex")&&c(d,".flowplayer"))return d.dispatchEvent(new MouseEvent("click",{bubbles:!0})),a(t);if(~r.indexOf(i)&&d.hasAttribute("aria-valuenow")){const n=~[e.ARROW_UP,e.ARROW_RIGHT].indexOf(i);if(d.matches(".fp-volume"))return u(l,n?.15:-.15),a(t);if(d.matches(".fp-timeline"))return o(l,n?R:-1*R),a(t)}if((i===e.ARROW_DOWN||i===e.ARROW_UP||i===e.ESCAPE)&&c(d,".fp-menu"))return t.preventDefault(),i===e.ARROW_DOWN&&d.nextSibling&&d.nextSibling.focus(),i===e.ARROW_UP&&d.previousSibling&&d.nextSibling.focus(),void(i===e.ESCAPE&&function(e,t,n){const i=function(e,t){const n=new CustomEvent(e,{detail:t,cancelable:!0});return t&&Object.defineProperty(n,"data",{get:()=>t}),n}(t,n);e.dispatchEvent(i)}(l.root,"menu:toggle:open",{open:!1,menu:f(d,".fp-menu")}));if(i===e.TAB){const e=window.flowplayer;e&&Array.isArray(e.instances)&&e.instances.forEach((function(e){e.setState("is-hovered",!0),e.setState("is-accessibility",!0)}))}if(!function(e,t){return!(t.altKey||t.shiftKey||t.metaKey||t.ctrlKey)&&!!(e&&e.in_viewport&&e.started)&&!!e.root&&(function(e){let t=document.activeElement;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}(e.root)||document.activeElement===document.body)}(l,t))return;const p=!l.hasState("no-timeline");switch(~s.indexOf(i)&&t.preventDefault(),i){case e.SPACE:return l.togglePlay();case e.F:return l.toggleFullScreen();case e.ESCAPE:return l.toggleFullScreen(!1);case e.M:return l.toggleMute();case e.ARROW_UP:case e.K:return u(l,.15);case e.ARROW_DOWN:case e.J:return u(l,-.15);case e.ARROW_RIGHT:case e.L:return p&&o(l,R);case e.ARROW_LEFT:case e.H:p&&o(l,-1*R)}}(t)}),0)}));class l{init(e,t,i){i.on(["loadstart","playing","fullscreenenter"],(function(){n=i}))}}return function(e,t){if("object"==typeof exports&&"undefined"!=typeof module)return t;"flowplayer"in e||(e.flowplayer={extensions:[]});const n=e.flowplayer;"function"==typeof n?n(t):(Array.isArray(n.extensions)||(n.extensions=[]),~n.extensions.indexOf(t)||n.extensions.push(t))}(window,l),l}));