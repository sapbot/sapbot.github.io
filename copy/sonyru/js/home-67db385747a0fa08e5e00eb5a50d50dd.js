define("modules/primary_tout/module",["require","jquery","iQ","modernizr","enquire","require/sony-global-settings","require/sony-global-utilities","modules/sony_video/module","require/sony-global-environment"],(function(e){var i=e("jquery"),t=e("iQ"),n=(e("modernizr"),e("enquire")),s=e("require/sony-global-settings"),o=e("require/sony-global-utilities"),a=(e("modules/sony_video/module"),e("require/sony-global-environment")),r={init:function(){var e=i(".primary-tout");e.length>0&&e.primaryTout()}},l=function(e,t){var n=this;n.$el=i(e),n.hasLetterboxVideo=n.$el.children(".submodule.letterbox").length>0,i.extend(n,{},i.fn.primaryTout.defaults,t,i.fn.primaryTout.settings),n._init()};return l.prototype={constructor:l,setOnDemandImages:function(){t.setOnDemandImages(this.$el.get(0),"primary_tout")},_init:function(){var e=this;e.setVars(),(o.isTyrionApp||o.isTyrionPreviewApp)&&(e.setOnDemandImages(),t.loadOnDemandImages("primary_tout"),e.resize(),e.$el.find(".hero-image .iq-img").addClass("shown"),t.update()),e.bemovedTextOutofbox(),e.isTitlePlate||a.on("global:resizeDebounced",i.proxy(e.resize,e)),e.isTitlePlate&&(e.fixTitleHeight(),a.on("global:resizeDebounced",i.proxy(e.fixTitleHeight,e))),e.isFlexibleTout&&e.setupFlxBreakpoints(),e.hasAddonSubmodule&&(e.isDefault||e.isHomepage||e.isFlexibleTout||e.isProductIntroPlate)&&e.setupSubmodules(),e.hasBtn&&e.setupButtons(e.$btn),e.$el.find(".hero-video video").on("play",(function(){e.positionBackgroundVideo()})),e.$addonTrigger&&e.isDataOpenedTruthy(e.$addonTrigger.closest(".addon").attr("data-opened"))&&e.$addonTrigger.trigger("click",!0),e.hasBtn&&e.$btn.each((function(){var t=i(this);e.isDataOpenedTruthy(t.attr("data-opened"))&&(e.$el.find(".submodule .sony-video").not(".sony-youtube-player").sonyVideo(),t.trigger("click",!0))})),log("SONY : PrimaryTout : Initialized")},isDataOpenedTruthy:function(e){return"false"!=(e+"").toLowerCase()},setVars:function(){var e=this;e.isTitlePlate=e.$el.hasClass("title-plate"),e.isBoxBottomMobile=e.$el.hasClass("box-bottom-mobile"),e.isFlexibleTout=e.$el.hasClass("flexible-tout"),e.isProductIntroPlate=e.$el.hasClass("product-intro-plate"),e.isHomepage=e.$el.hasClass("homepage"),e.isDefault=e.$el.hasClass("default"),e.$secondary=e.$el.find(".secondary"),e.$imageModule=e.$el.find(".image-module"),e.$btn=e.$el.find(".inner .box a.video, .inner .box a.carousel, .mobile-buttons a.video, .mobile-buttons a.carousel, .secondary .linkgroup .btn.video"),e.hasSecondaryBox=e.$secondary.length>0,e.hasBtn=e.$btn.length>0,e.hasAddonSubmodule=e.$el.find(".submodule").length>0,e.customDesktopHeight=e.$el.find(".hero-image").data("desktop-height"),e.customTabletHeight=e.$el.find(".hero-image").data("tablet-height"),e.customPhoneHeight=e.$el.find(".hero-image").data("phone-height")},setupFlxBreakpoints:function(){var e=this;return s.isLTIE10?e.checkForWidth():n.register("(min-width: 48em)",(function(){e.initFlxDesktop()})).register("(min-width: 35.5em) and (max-width: 47.9375em)",(function(){e.initFlxTablet()})).register("(max-width: 35.4375em)",(function(){e.initFlxPhone()})),e},checkForWidth:function(){var e=this;window.innerWidth>768?e.initFlxDesktop():window.innerWidth>568?e.initFlxTablet():e.initFlxPhone()},initFlxDesktop:function(){this.$imageModule.css("height",this.customDesktopHeight)},initFlxTablet:function(){this.$imageModule.css("height",this.customTabletHeight)},initFlxPhone:function(){this.$imageModule.css("height",this.customPhoneHeight)},fixTitleHeight:function(){var e,i=this.$imageModule;e=Math.max(i.innerHeight(),this.$el.find(".inner .box").innerHeight()),i.css("height",e)},setSizeForVideo:function(){var e=this;if(!(!e.$video||e.videoAPI()&&e.videoAPI().isFullscreen)){var i,t,n=e.$video.find(".flowplayer").data("ratio"),o=e.$video.find(".fp-engine");if(e.hasLetterboxVideo&&e.isVideoOpen&&(e.$el.css("height",e.$imageModule.height()),s.isAndroid||e.videoAPI()&&"flash"===e.videoAPI().engine)){var a,r,l=e.$video.width(),d=e.$video.height();n>=d/l?(t=d,a=0,r=(l-(i=Math.round(d/n)))/2):(i=l,a=(d-(t=Math.round(l*n)))/2,r=0),o.css({width:i+"px",height:t+"px",top:a+"px",left:r+"px"}),e.$video.find("video").css("zIndex","999"),e.$video.find(".fp-ui").css("zIndex","1000")}}},resize:function(){var e=this,t=s.$window.width();if(e.isFlexibleTout&&s.isLTIE10)e.checkForWidth();else{if(t>980){var n=s.$window.height(),o=e.getImageHeight(t,n,e.isProductIntroPlate);e.isFlexibleTout||e.$imageModule.css("height",o)}else e.isFlexibleTout||e.$imageModule.css("height","");e.setSizeForVideo(),t>767?(e.$el.find(".legal-div").closest(".table-center").find(".box").css("margin-top",""),i(".legal-div").appendTo(e.$el.find(".legal-div").closest(".table-center")),e.$el.find(".legal-icon").removeClass("small")):(e.$el.find(".legal-div").closest(".table-center").find(".box").css("margin-top","0px"),e.$el.find(".legal-div").prependTo(e.$el.find(".legal-div").closest(".table-center")),e.$el.find(".legal-icon").addClass("small"),e.isProductIntroPlate&&e.$imageModule.height(e.$imageModule.height()+i(".legal-grid").height())),e.hasSecondaryBox&&e.centerPrimaryBox(t),e.positionBackgroundVideo()}},positionBackgroundVideo:function(){var e=this;switch(e.$el.find(".hero-video").attr("data-align")){case"bottom-right":e.$el.find(".hero-video .iq-img video").css("left",-e.$el.find(".hero-video .iq-img video").first().width()+e.$el.width()),e.$el.find(".hero-video .iq-img video").css("top",-e.$el.find(".hero-video .iq-img video").first().height()+e.$el.height());break;case"top-right":e.$el.find(".hero-video .iq-img video").css("left",-e.$el.find(".hero-video .iq-img video").first().width()+e.$el.width());break;case"bottom-left":case"bottom":e.$el.find(".hero-video .iq-img video").css("top",-e.$el.find(".hero-video .iq-img video").first().height()+e.$el.height())}},getImageHeight:function(e,i,t){var n,s=.75*i,o=(e-980)/5;return n=t?Math.min(720,Math.min(s,560+o)):Math.min(640,Math.min(s,520+o)),Math.round(n)},centerPrimaryBox:function(e){var i=this,t=i.$el.find(".inner .table-center-wrap"),n=i.$el,s=i.$secondary,o=!1;o=n.height()-s.outerHeight(),i.isBoxBottomMobile&&767>e&&(o=""),t.height(o)},setupSubmodules:function(){var e,t=this;t.$addonTrigger=t.$el.find(".addon-media"),t.$addonModule=t.$el.find(".submodule.off-screen"),t.$closeBtn=t.$addonModule.find(".box-close"),t.$submodule=t.$addonModule.siblings(),t.$content=t.$el.hasClass("full-inner")?t.$submodule.parent().siblings():i(),e=t.$addonModule.find(".sony-video"),t.isVideoAddon=e.length>0,t.isVideoAddon&&(t.$video=e),t.isSubmoduleOpen=!1,t.setupSubmoduleEvents()},videoAPI:function(){var e=this;return(!e.$video||e.$video.length<1)&&(e.$video=e.$el.children(".submodule").find(".sony-video")),!!e.$video.data("sonyVideo")&&e.$video.data("sonyVideo").api()},setupSubmoduleEvents:function(){var e=this;i(".addon-disable-click").css("pointer-events","none"),e.$addonTrigger.on("click",i.proxy(e.onAddonClick,e)),e.$closeBtn.on("click",i.proxy(e.onCloseClick,e)),s.$window.on("e5-slide-change",i.proxy(e.onCloseClick,e)),s.hasTouchEvents||(e.$addonModule.on("mouseenter.submodule",(function(){e.isHovered=!0,e.$closeBtn.removeClass("close-hide")})),e.$addonModule.on("mouseleave.submodule",(function(){e.isHovered=!1,e.$closeBtn.addClass("close-hide")})))},bemovedTextOutofbox:function(){this.$el.find(".bemoved-bottom.bemoved-variant.be-moved.bemoved-outofbox").each((function(){i(this).insertAfter(i(this).parent()),i(this).insertAfter(i(this).parent().find(".box"))}))},onAddonClick:function(e,n){var s=this,o="off-screen visuallyhidden";(e.preventDefault(),e.stopPropagation(),a.trigger("pausevideo"),flowplayer&&flowplayer.instances&&(null!=i.activeFlowplayerInstance&&flowplayer.instances[i.activeFlowplayerInstance].load(),i.activeFlowplayerInstance=null),s.isSubmoduleOpen)||(s.$submodule.add(s.$content).addClass(o),s.$el.find(".submodule.addon.off-screen").removeClass(o),s.isVideoAddon||s.$addonModule.parent().addClass("container"),t.update(),s.isVideoAddon&&!n&&(s.videoAPI()&&s.videoAPI().play(),s.isVideoOpen=!0,s.setSizeForVideo(),s.videoAPI()&&"flash"===s.videoAPI().engine&&(s.handleFullscreenToggleProxy=i.proxy(s.handleFullscreenToggle,s),s.videoAPI().bind("fullscreen fullscreen-exit",s.handleFullscreenToggleProxy)),s.scrollIntoToView(s.$el)),s.isSubmoduleOpen=!0)},onCloseClick:function(e){var t=this,n="off-screen visuallyhidden";e.preventDefault(),e.stopPropagation(),t.isVideoAddon&&t.videoAPI()&&t.videoAPI().pause(),flowplayer&&flowplayer.instances&&(null!=i.activeFlowplayerInstance&&flowplayer.instances[i.activeFlowplayerInstance].load(),i.activeFlowplayerInstance=null,i.deactivateSpaceKeyOnPlayer=!0),t.$submodule.add(t.$content).removeClass(n),t.$addonModule.addClass(n),t.isVideoAddon||t.$addonModule.parent().removeClass("container"),t.$addonTrigger.closest(".addon").attr("data-opened",!1);var s=t.$el.find(".hero-video video");s.length>0&&s.trigger("load"),t.isSubmoduleOpen=!1,t.$el.find(".submodule").trigger("PrimaryTout:submoduleActivated"),t.resize()},setupButtons:function(e){var t=this,n=t.$el.find(".submodule"),o=n.find(".box-close");e.on("click",i.proxy(t.onSubmoduleBtnClick,t)),o.on("click",i.proxy(t.onSubmoduleCloseClick,t)),s.hasTouchEvents||(n.on("mouseenter.submodule",(function(){t.isHovered=!0,o.removeClass("close-hide")})),n.on("mouseleave.submodule",(function(){t.isHovered=!1,o.addClass("close-hide")})))},handleFullscreenToggle:function(e){"fullscreen-exit"===e.type?this.setSizeForVideo():this.$video.find(".fp-engine").removeAttr("style")},scrollIntoToView:function(e){var t=i(".sticky-nav"),n=t?t.height()+10:0;i("body").scrollTop(e.offset().top-n)},videoFlowplayerAPI:function(e){var t=i(e).attr("data-video-src"),n=i(e).attr("data-video-m3u8"),s=i(e).attr("data-video-ogg"),o=(i(e).attr("autoplay"),!!i(e).attr("muted")),a=!!i(e).attr("loop"),r=(i(e).attr("preload"),i(e).attr("data-video-subtitles")),l=[{src:t,type:"video/mp4"},{src:t,type:"video/flash"},{src:s,type:"video/ogg"}];n&&l.push({src:n,type:"application/x-mpegurl"});var d={src:l,token:"eyJraWQiOiJDR1NaSFh4Q3Y2azciLCJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJjIjoie1wiYWNsXCI6NixcImlkXCI6XCJDR1NaSFh4Q3Y2azdcIn0iLCJpc3MiOiJGbG93cGxheWVyIn0.YUitgsTL-VP7gCgzN5XM4j5S0v4_lE-eA8eShvWTPwzwJIEk691OIiqk_XFMb0L8ztTviKVf9TkOPUXGpfhQ9w",autoplay:!0,muted:o,loop:a,preload:!0,lang:"en",plugins:["keyboard"]};r&&(d.subtitles={tracks:[{src:r,default:!0}]}),flowplayer(e,d)},onSubmoduleBtnClick:function(e){var n=this,s=e.delegateTarget,a=i(s);n.$video=n.$el.children(".submodule.video").find(".sony-video"),e.preventDefault(),n.$el.find(".hero-image, .hero-video, .inner, .mobile-buttons-wrap, .secondary").addClass("off-screen visuallyhidden"),n.$el.find(".submodule").filter("."+a.data("media")).first().trigger("PrimaryTout:submoduleActivated").removeClass("off-screen visuallyhidden"),i(e.currentTarget).attr("data-opened",!0),t.update(),n.$video&&a.hasClass("video")&&(n.videoAPI()&&n.videoAPI().play(),n.isVideoOpen=!0,n.setSizeForVideo(),n.videoAPI()&&"flash"===n.videoAPI().engine&&(n.handleFullscreenToggleProxy=i.proxy(n.handleFullscreenToggle,n),n.videoAPI().bind("fullscreen fullscreen-exit",n.handleFullscreenToggleProxy))),setTimeout((function(){n.scrollIntoToView(n.$el)}),100),(o.isTyrionApp||o.isTyrionPreviewApp)&&setTimeout((function(){i(window).trigger("resize")}),1e3)},onSubmoduleCloseClick:function(e){var t=this,n=t.$el.find(".submodule"),s=t.$el.find(".sony-video"),o=e.delegateTarget;i(o),s&&flowplayer&&flowplayer.instances&&(null!=i.activeFlowplayerInstance&&flowplayer.instances[i.activeFlowplayerInstance].load(),i.activeFlowplayerInstance=null,i.deactivateSpaceKeyOnPlayer=!0),s.each((function(){i(this).data("sonyVideo")})),t.$el.find(".hero-video, .hero-image, .inner, .mobile-buttons-wrap, .secondary").removeClass("off-screen visuallyhidden"),i(e.currentTarget).attr("data-opened",!1),n.addClass("off-screen visuallyhidden").trigger("PrimaryTout:submoduleActivated"),t.isVideoOpen=!1,t.$el.css("height","")}},i.fn.primaryTout=function(e){var t=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=i(this),s=n.data("primaryTout");s||(s=new l(n,e),n.data("primaryTout",s)),"string"==typeof e&&s[e].apply(s,t)}))},r})),define("modules/primary_tout/index",["require","modules/primary_tout/module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/primary_tout/module");return e("secondary/sony-init-module-below-viewport")({triggerElement:$(".primary-tout"),initializeImmediately:!0,callback:i.init}),{PrimaryTout:i}})),define("modules/pdp_slideshow/module",["require","jquery","modernizr","iQ","enquire","bootstrap","require/sony-global-settings","require/sony-global-utilities","require/sony-global-environment","plugins/index","secondary/index","secondary/index","secondary/index"],(function(e){var i=e("jquery"),t=e("modernizr"),n=e("iQ"),s=e("enquire"),o=(e("bootstrap"),e("require/sony-global-settings")),a=e("require/sony-global-utilities"),r=e("require/sony-global-environment"),l=(e("plugins/index").hammer,e("secondary/index").sonyCarousel,e("secondary/index").sonyScroller,e("secondary/index").sonyVideo,{init:function(){i(".pdp-slideshow").each((function(){var e=this;new d(e),a.isTyrionApp||i(e).closest(".submodule").on("PrimaryTout:submoduleActivated",(function(){new d(e)}))}))}}),d=function(e){var t=this;t.$el=i(e),t.$el.isModuleInitialized&&t.$el.isModuleInitialized()||(t.SLIDE_CLASS=".pdp-slideshow-slide",t.SLIDE_CONTAINER=".pdp-slideshow-inner",t.isDesktopMode=!0,t.isTabletMode=!1,t.isMobileMode=!1,t.hasTouch=o.hasTouchEvents,t.$document=o.$document,t.$window=o.$window,t.$html=o.$html,t.$slides=t.$el.find(t.SLIDE_CLASS),t.$paddlesTranslations={prev:t.$slides.data("paddle-translation-previous"),next:t.$slides.data("paddle-translation-next")},t.$slideVideos=t.$slides.find(".sony-video"),t.$slideContainer=t.$el.find(t.SLIDE_CONTAINER),t.$thumbNav=t.$el.find(".thumb-nav-carousel"),t.$thumbNavContainer=t.$el.find(".thumb-nav-container"),t.$submodules=t.$el.find(".pdp-slideshow-inner .pdp-slideshow-slide:first-child, .pdp-slideshow-inner .pdp-slideshow-slide .sony-video"),t.$carouselWrapper=t.$el.find(".pdp-slideshow-outer"),t.numSlides=t.$slides.length,t.$pagination=null,t.$videoPlayers=t.$el.find(".sony-video"),t.selectedSlide=Math.round(t.$slideContainer.data("selectedSlide"))||0,t.desktopAnimSpeed=500,t.tabletAnimSpeed=300,t.mobileAnimSpeed=250,t.hasThumbs=t.$thumbNav.length>0,t.numSlides=t.$slides.length,t.currentId=0,t.init(),t.$el.data("moduleInitialized",!0))};return d.prototype={constructor:d,init:function(){var e=this;e.hasThumbs&&e.createThumbNav(),e.setupSlides().setupCarousel().setupBreakpoints().setupFullbleedImages(),e.fadeIn(),e.setCarouselHeight(),e.generatePaddleTranslations(),r.on("global:resizeDebounced",i.proxy(e.onResize,e))},generatePaddleTranslations:function(){var e=this;e.$paddlePrev=i(".pagination-paddle.pagination-prev"),e.$paddleNext=i(".pagination-paddle.pagination-next"),e.$paddlePrev.length&&e.$paddleNext.length&&(e.$paddlePrev.attr("aria-label",e.$paddlesTranslations.prev),e.$paddleNext.attr("aria-label",e.$paddlesTranslations.next))},onResize:function(){this.setCarouselHeight(),this.apportionThumbsToSlides(),this.rebuildThumbCarousel()},scrollIntoToView:function(e){i("body").scrollTop(e.offset().top)},fadeIn:function(){var e=this,i=e.$slides.find("img").first();i.data("hasLoaded")||"video"===e.$slides.eq(0).data("mode")?e.$el.addClass("active"):i.get(0).addEventListener("imageLoaded",(function(){e.$el.addClass("active")}))},setCarouselHeight:function(){var e=!t.mediaqueries||t.mq("(min-width: 61.25em)"),i="";t.mediaqueries&&e?(i=560+(this.$window.width()-980)/5,i=Math.round(Math.min(720,i))):t.mediaqueries||(i=Math.round(Math.min(560,Math.min(.75*o.$window.height())))),this.$el.css("height",i)},setupCarousel:function(){var e=this;return e.$slideContainer.on("SonyCarousel:gotoSlide",i.proxy(e.onSlideUpdate,e)),e.$slideContainer.sonyCarousel({wrapper:".pdp-slideshow-outer",slides:".pdp-slideshow-slide",looped:!o.isPS3,jumping:!o.isPS3,axis:"x",dragThreshold:2,paddles:!0,showPaddlesInTouch:!0,paddlePosition:"outset",pagination:!0,$paddleWrapper:e.$el,nonDraggableChildren:".fp-controls",selectedSlide:e.selectedSlide}),e.$pagination=e.$el.find(".sony-dot-nav"),n.update(),e},onSlideUpdate:function(e,i){var t=this;n.update(),t.setCarouselHeight(),t.currentId!=i&&r.trigger("pausevideo"),t.currentId=i,t.setCurrentActiveThumb()},setupBreakpoints:function(){var e=this;return o.isLTIE10?(e.showThumbNav().hideDotNav(),e.$slideContainer.sonyCarousel("setAnimationSpeed",e.desktopAnimSpeed)):s.register("(min-width: 48em)",(function(){e.isMobileMode=e.isTabletMode=!1,e.isDesktopMode=!0,e.showThumbNav().hideDotNav(),e.$slideContainer.sonyCarousel("setAnimationSpeed",e.desktopAnimSpeed)})).register("(min-width: 35.5em) and (max-width: 47.9375em)",(function(){e.isMobileMode=e.isDesktopMode=!1,e.isTabletMode=!0,e.hideThumbNav().showDotNav(),e.$slideContainer.sonyCarousel("setAnimationSpeed",e.tabletAnimSpeed)})).register("(max-width: 35.4375em)",(function(){e.isDesktopMode=e.isTabletMode=!1,e.isMobileMode=!0,e.hideThumbNav().showDotNav(),e.$slideContainer.sonyCarousel("setAnimationSpeed",e.mobileAnimSpeed)})),e},toggleDotNav:function(e){return this.$pagination[(e?"add":"remove")+"Class"]("hidden"),this},hideDotNav:function(){return this.toggleDotNav(!0)},showDotNav:function(){return this.toggleDotNav(!1)},toggleThumbNav:function(e){return this.$thumbNavContainer.length&&this.$thumbNavContainer[(e?"add":"remove")+"Class"]("hidden"),this},hideThumbNav:function(){return this.toggleThumbNav(!0)},showThumbNav:function(){return this.toggleThumbNav(!1)},setupSlides:function(){var e=this,t=e.numSlides+2,n=100*t+"%",s=100/t+"%";if(e.$slideContainer.css("width",n),e.$slides.css("width",s),e.$submodules.length>0){e.$carouselWrapper.addClass("slide-modules");var o=e.$submodules.map((function(){return i(this).height()})).get(),a=Math.max.apply(null,o);e.$slideContainer.css("height",a),e.$slides.css("height",a),e.$carouselWrapper.css("height",a)}return e},createThumbNav:function(){var e=this,i=e.$thumbNav.find("a").hammer();i.on("click",(function(e){e.preventDefault()})),i.on("tap",(function(i){i.preventDefault(),r.trigger("pausevideo"),e.onThumbSelected(i)})),i.eq(0).addClass("active"),e.apportionThumbsToSlides(),e.rebuildThumbCarousel()},apportionThumbsToSlides:function(){var e,t=this,n=t.$thumbNav.find("li a"),s=t.$thumbNav.find("li"),o=n.first().width(),a=s.first().width(),r=Math.max(Math.floor(a/(o-1))-1,1),l=n.length,d=s.first().clone().empty(),u=[];if(l>4)for(;4>l%r&&r>1;)r=Math.max(r-1,1);e=Math.ceil(l/r);for(var c=0;e>c;c++){u[c]=d.clone().get(0);var h=t.$window.width()/t.$thumbNav.width();i(u[c]).css("left",100*(h+1)/2*c+"%");for(var p=0;r>p;p++)n.eq(r*c+p).appendTo(u[c]);var f=i(u[c]).find("a");f.removeClass("first last"),f.first().addClass("first"),f.last().addClass("last")}t.$thumbNav.find(".thumb-nav").empty().append(u)},rebuildThumbCarousel:function(){var e=this;e.$thumbNavCarousel&&e.$thumbNavCarousel.sonyCarousel("destroy"),e.$thumbNavCarousel=e.$thumbNav.sonyCarousel({wrapper:".thumb-nav-grid",slides:"ul",pagination:!0,$dotNavWrapper:e.$thumbNavContainer,paddles:!0,$paddleWrapper:e.$thumbNavContainer,useSmallPaddles:!0})},onThumbSelected:function(e){var t=this,n=i(e.delegateTarget),s=t.$thumbNav.find("a"),o=s.index(n);t.currentId=o,flowplayer&&flowplayer.instances&&(null!=i.activeFlowplayerInstance&&flowplayer.instances[i.activeFlowplayerInstance].load(),i.activeFlowplayerInstance=null),s.removeClass("active"),n.addClass("active"),t.$slideContainer.sonyCarousel("gotoSlide",t.currentId)},setCurrentActiveThumb:function(){var e=this,i=e.$thumbNav.find("a");i.removeClass("active"),i.eq(e.currentId).addClass("active");var t=i.eq(e.currentId).parents(".thumb-nav").index();e.$thumbNavCarousel.sonyCarousel("gotoSlide",t)},_scaleImage:function(e,i,t,n,s){var o={width:0,height:0,fScaleToTargetWidth:!0};if(0>=e||0>=i||0>=t||0>=n)return o;var a=t,r=i*t/e,l=e*n/i,d=n,u=l>t;return(u=u?s:!s)?(o.width=Math.floor(a),o.height=Math.floor(r),o.fScaleToTargetWidth=!0):(o.width=Math.floor(l),o.height=Math.floor(d),o.fScaleToTargetWidth=!1),o.targetleft=Math.floor((t-o.width)/2),o.targettop=Math.floor((n-o.height)/2),o},getFullbleedImg:function(e){var t=e.prop("naturalWidth"),n=e.prop("naturalHeight"),s=e.parents("div.pdp-slideshow-slide.type2").width(),o=e.parents("div.pdp-slideshow-slide.type2").height(),a=this._scaleImage(t,n,s,o,!1);i(e).css("left",a.targetleft),i(e).css("top",a.targettop),i(e).css("position","absolute"),i(e).attr("width",a.width),i(e).attr("height",a.height)},setupFullbleedImages:function(){var e=this,t=i("div.pdp-slideshow-slide.type2 img");if(t.length>0){for(var n=0,s=t.length;s>n;n++)t.get(n).addEventListener("imageLoaded",(function(){e.getFullbleedImg(t)})),t.get(n).addEventListener("imageReLoaded",(function(){e.getFullbleedImg(t)}));r.on("global:resizeDebounced",(function(){e.getFullbleedImg(t)}))}}},l})),define("modules/pdp_slideshow/index",["require","modules/pdp_slideshow/module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/pdp_slideshow/module");return e("secondary/sony-init-module-below-viewport")({initializeImmediately:!0,triggerElement:$(".pdp-slideshow"),callback:i.init}),{PDPSlideShow:i}})),define("modules/tertiary_tout_container/module",["require","jquery","modernizr","iQ","enquire","require/sony-global-settings","require/sony-global-utilities","secondary/index"],(function(e){var i=e("jquery"),t=e("modernizr"),n=e("iQ"),s=e("enquire"),o=e("require/sony-global-settings"),a=e("require/sony-global-utilities"),r=(e("secondary/index").sonyCarousel,{init:function(){i(".tcc-module").each((function(){new l(this)}))}}),l=function(e){var n=this;n.$el=i(e),n.useCSS3=t.csstransforms&&t.csstransitions,n.carouselWrapperClass=".tcc-carousel-wrapper",n.carouselClass=".tcc-carousel",n.slideClass=".sony-carousel-slide",n.slideChildClass=".sony-carousel-slide-children",n.$carouselWrapper=n.$el.find(n.carouselWrapperClass),n.$carousel=n.$el.find(n.carouselClass),n.$newGrid=i("<div/>").addClass("grid"),n.$newContainer=i("<div/>").addClass("container").html(n.$newGrid),n.$newSlide=i("<div/>").addClass(n.slideClass.replace(".","")).html(n.$newContainer),n.init(),log("SONY : TertiaryTouts : Initialized")};return l.prototype={constructor:l,init:function(){var e=this;i(this),e.$cached=e.$el.clone(),e.originalSlidesLength=e.$cached.find(".sony-carousel-slide .grid").children().length,o.$html.hasClass("lt-ie10")?e.renderDesktop():(s.register(a.enquire.min(980),(function(){e.renderDesktop()})),s.register(a.enquire.minMax(481,979),(function(){e.originalSlidesLength<=2?e.renderMobile():e.renderTablet()})),s.register(a.enquire.max(480),(function(){e.renderMobile()}))),e.inititialized=!0},reloadCached:function(){var e,i=this;i.inititialized&&(e=i.$cached.clone(),i.$tccCarousel&&i.$tccCarousel.sonyCarousel("destroy"),i.$tccCarousel=i.$carouselWrapper=i.$carousel=null,i.$el.replaceWith(e),i.$el=e,i.$carouselWrapper=i.$el.find(i.carouselWrapperClass),i.$carousel=i.$carouselWrapper.find(i.carouselClass),n.update())},renderDesktop:function(){this.reloadCached()},renderTablet:function(){var e,i=this,t=i.$newSlide.clone(!0);i.reloadCached(),e=i.$el.find(i.slideClass).find(".span4").last(),t.find(".grid").append(e),i.$carousel.append(t),i.updateSpans("span6"),i.updateId("two-up"),i.$tccCarousel=i.$el.find(i.$carousel).sonyCarousel({wrapper:i.carouselWrapperClass,slides:i.slideClass,useCSS3:i.useCSS3,pagination:!0,paddles:!0,showPaddlesInTouch:!0,$dotNavWrapper:i.$tcc-r})},renderMobile:function(){var e,i,t,n,s=this;s.reloadCached(),n=s.$el.find(s.slideClass).find(".span4").last(),s.originalSlidesLength>1&&(e=s.$newSlide.clone(!0),t=s.$el.find(s.slideClass).find(".span4").eq(1),e.find(".grid").append(t),s.$carousel.append(e)),s.originalSlidesLength>2&&((i=s.$newSlide.clone(!0)).find(".grid").append(n),s.$carousel.append(i)),s.updateSpans("span12"),s.updateId("one-up"),s.$tccCarousel=s.$el.find(s.$carousel).sonyCarousel({wrapper:s.carouselWrapperClass,slides:s.slideClass,useCSS3:s.useCSS3,pagination:!0,paddles:!0,$dotNavWrapper:s.$el}),s.$el.find(".gwt-module").hasClass("featured")&&s.$el.find(".sony-dot-nav").addClass("featured-sony-dot-nav")},updateId:function(e){this.$carouselWrapper.parent().attr("id",e)},updateSpans:function(e){this.$el.find(this.slideClass).find(".span4, .span6, .span12").removeClass("span4 span6 span12").addClass(e)},setupLinkClicks:function(){var e=this.$el.find(".article");e.click((function(e){e.preventDefault();var t=i(this),n=t.find("a.primary-link").attr("href"),s=t.find(".primary-link").data("new-win");"no"==s&&"#"!=n?window.location=n:"yes"==s&&window.open(n)})),e.css("cursor","pointer")}},r})),define("modules/tertiary_tout_container/index",["require","modules/tertiary_tout_container/module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/tertiary_tout_container/module");return e("secondary/sony-init-module-below-viewport")({triggerElement:$(".tcc-module"),callback:i.init}),{TertiaryModule:i}})),define("modules/one_sony_tout_carousel/module",["require","jquery","modernizr","iQ","enquire","require/sony-global-settings","require/sony-global-environment","require/sony-global-utilities","secondary/index"],(function(e){var i=e("jquery"),t=e("modernizr"),n=e("iQ"),s=e("enquire"),o=e("require/sony-global-settings"),a=e("require/sony-global-environment"),r=e("require/sony-global-utilities"),l=(e("secondary/index").sonyCarousel,{init:function(){i(".one-sony-carousel").each((function(){new d(this)}))}}),d=function(e){var n=this;n.$el=i(e),n.$container=n.$el.find(".st-container"),n.$innerContainer=n.$container.find(".st-container-inner"),n.$slideContents=n.$container.find(".st-content"),n.$slides=n.$container.find(".st-item"),n.$paddlesTranslations={prev:n.$container.data("paddle-translation-previous"),next:n.$container.data("paddle-translation-next")},n.hasCarouselInitialized=!1,n.isDesktop=!0,n.selectedTout=Math.round(n.$innerContainer.data("selectedTout"))||0,n.desktopAnimSpeed=500,n.tabletAnimSpeed=300,n.mobileAnimSpeed=250,n.currentSlide=0,n.useCSS3=t.csstransforms&&t.csstransitions,n.rtl=o.isRTL,n.selectedToutSlide=0,n.$el.on("SecondaryTouts:ready",(function(){n.init(),setTimeout((function(){n.$el.trigger("module:initialised")}),200)})),log("SONY : OneSonyCarousel : Initialized")};return d.prototype={constructor:d,init:function(){var e=this;e.bindEvents(),e.$cachedSlides=e.$slideContents.detach(".st-item"),e.$sliderWrapper=e.$slideContents.first().clone(),e.$sliderWrapper.find(".st-item").remove(),e.initCarousel(),o.$html.hasClass("lt-ie10")?e.renderDesktop():(s.register(r.enquire.min(768),(function(){e.renderDesktop(),e.$innerContainer.sonyCarousel("setAnimationSpeed",e.desktopAnimSpeed)})),s.register(r.enquire.minMax(481,767),(function(){e.isDesktop=!1,e.renderEvenColumns(12),e.$innerContainer.sonyCarousel("setAnimationSpeed",e.tabletAnimSpeed)})),s.register(r.enquire.max(480),(function(){e.isDesktop=!1,e.renderEvenColumns(12),e.$innerContainer.sonyCarousel("setAnimationSpeed",e.mobileAnimSpeed)}))),e.$el.css("visibility","visible"),e.$innerContainer.sonyCarousel("gotoSlide",e.selectedToutSlide),e.generatePaddleTranslations(),a.on("global:resizeDebounced",i.proxy(e.positionSlides,e))},generatePaddleTranslations:function(){var e=this;e.$paddlePrev=i(".pagination-paddle.pagination-prev"),e.$paddleNext=i(".pagination-paddle.pagination-next"),e.$paddlePrev.length&&e.$paddleNext.length&&(e.$paddlePrev.attr("aria-label",e.$paddlesTranslations.prev),e.$paddleNext.attr("aria-label",e.$paddlesTranslations.next))},initCarousel:function(){var e=this,i=e.$slides.length;e.hasCarouselInitialized&&e.destroyCarousel(),e.regroupTouts(),i>1&&(e.positionSlides(),e.$innerContainer.sonyCarousel({wrapper:".st-container",slides:".st-content",slideChildren:".st-item",useCSS3:e.useCSS3,paddles:!0,showPaddlesInTouch:!0,paddlePosition:"outset",pagination:!0,selectedSlide:e.selectedToutSlide}),e.hasCarouselInitialized=!0)},destroyCarousel:function(){this.$innerContainer.sonyCarousel("destroy")},updateCarousel:function(){var e=this,i=e.$slideContents.length;e.positionSlides(),e.$innerContainer.hasClass("sony-carousel-active")?2>i?(e.destroyCarousel(),e.$el.find(".st-item").css("opacity",1)):e.$innerContainer.sonyCarousel("resetSlides"):i>1?e.initCarousel():(e.$el.find(".st-item").css("opacity",1),e.$innerContainer.addClass("st-container-inner-no-paddle"))},regroupTouts:function(){var e=this,t=e.$slideContents.find(".st-item").clone(!0),n=e.$sliderWrapper.clone(!0),s=0;e.$innerContainer.empty();for(var o=0;o<t.length;o++){var a=i(t[o]),r=i(t[o+1]),l=i(t[o+2]),d=n.clone();if(e.selectedTout==o){var u=e.$innerContainer.children().length;e.selectedToutSlide=s>o?u-1:u}s>o||(12==e.getElementSpan(a)?(d.children().append(a),s++):8==e.getElementSpan(a)?(d.children().append(a),s++,4==e.getElementSpan(r)&&(d.children().append(r),s++)):6==e.getElementSpan(a)?(d.children().append(a),s++,e.getElementSpan(r)<8&&(d.children().append(r),s++)):4==e.getElementSpan(a)&&(d.children().append(a),s++,e.getElementSpan(r)<8&&e.getElementSpan(r)>4?(d.children().append(r),s++):4==e.getElementSpan(r)&&(d.children().append(r),s++,4==e.getElementSpan(l)&&(d.children().append(l),s++))),e.$innerContainer.append(d))}e.$slideContents=e.$innerContainer.find(".st-content"),e.getSpanOffsets(),e.$cachedSlides=e.$slideContents.clone(!0),e.$cachedTouts=e.$slideContents.find(".st-item").clone(!0),e.$sliderWrapper=e.$slideContents.first().clone(),e.$sliderWrapper.find(".st-item").remove()},getSpanOffsets:function(){for(var e=this,t=0;t<e.$slideContents.length;t++)for(var n=i(e.$slideContents[t]),s=n.find(".st-item"),o=0,a=0;a<s.length;a++){var r=i(s[a]);o+=e.getElementSpan(r),a==s.length-1&&(n.attr("data-offset",(12-o)/12),o=0)}},getElementSpan:function(e){var i=0;return e.hasClass("span12")?i=12:e.hasClass("span8")?i=8:e.hasClass("span6")?i=6:e.hasClass("span4")&&(i=4),i},bindEvents:function(){this.$innerContainer.on(o.transEndEventName,n.update)},positionSlides:function(){var e,t=this,n=0,s=0;t.isDesktop?((e=t.$el.find(".st-content")).each((function(e,t){var s=i(t).attr("data-offset");i(t).css("left",n+"px"),n+=s>0?i(t).outerWidth(!0)-i(t).outerWidth(!0)*s:i(t).outerWidth(!0)})),t.$el.find(".st-item").each((function(e,t){i(t).css("left",0)}))):(e=t.$el.find(".st-content")).each((function(e,t){i(t).css("left",n+"px"),n+=i(t).outerWidth(!0)})),t.rtl&&e.each((function(e,t){var n=i(t).attr("data-offset");i(t).css("right",s+"px"),s+=n>0?i(t).outerWidth(!0)-i(t).outerWidth(!0)*n:i(t).outerWidth(!0)}))},renderDesktop:function(){var e=this,i=e.$cachedSlides.clone(!0);e.$innerContainer.empty().append(i),e.isDesktop=!0,e.hasCarouselInitialized=!1,e.updateCarousel(),n.reset()},renderEvenColumns:function(e){var i=this,t=i.$cachedTouts.clone(!0);i.$innerContainer.empty(),t.removeClass("span8 span6 span4").addClass("span"+e);for(var s=0;s<t.length;s+=12/e){for(var o=i.$sliderWrapper.clone(),a=s;s+12/e>a;a++)o.children().append(t.eq(a));i.$innerContainer.append(o)}i.hasCarouselInitialized=!1,i.updateCarousel(),n.reset()}},l})),define("modules/one_sony_tout_carousel/index",["require","modules/one_sony_tout_carousel/module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/one_sony_tout_carousel/module");return e("secondary/sony-init-module-below-viewport")({triggerElement:$(".one-sony-tout-container"),initializeImmediately:!0,callback:i.init}),{OneSonyToutCarousel:i}})),define("modules/secondary_tout/module",["require","jquery","iQ","enquire","require/sony-global-settings","require/sony-global-utilities","require/sony-global-environment","secondary/index"],(function(e){var i=e("jquery"),t=e("iQ"),n=e("enquire"),s=e("require/sony-global-settings"),o=e("require/sony-global-utilities"),a=e("require/sony-global-environment"),r=e("secondary/index").sonyModal,l={"align-left-center":"align-left-bottom","align-right-top":"align-left-top","align-right-center":"align-left-bottom","align-right-bottom":"align-left-bottom","align-center-center":"align-left-top"},d={init:function(e){e=e||i("body"),i(".secondary-tout",e).each((function(){new u(this)}))}},u=function(e){var a=this;a.$el=i(e),a.$images=a.$el.find(".st-image"),a.$items=a.$el.find(".st-item"),a.spanClasses="span12 span8 span6 span4",a.contentWidthClasses="content-12 content-8 content-6 content-4",a.init();for(var r=0,l=a.$images.length;l>r;r+=1)a.$images.get(r).addEventListener("imageLoaded",(function(){i(this).closest(".st-item").addClass("on")}));a.preventChevronWrap(),setTimeout((function(){a.$el.find(".st-image").addClass("iq-img"),t.reset(),a.$el.trigger("SecondaryTouts:ready")}),100),!a.$items.parents().hasClass("no-grid-at-767")&&!a.$items.parents().hasClass("one-sony-carousel")||s.$html.hasClass("lt-ie10")?a.renderDesktop():(n.register(o.enquire.min(768),(function(){a.renderDesktop(),a.assignDefaultLayouts()})),n.register(o.enquire.max(767),(function(){a.renderEvenColumns(12),a.assignMobileLayouts()})))};return u.prototype={constructor:u,init:function(){var e=this;e.$items.each((function(){var e=i(this),t=this.className.split(" ").filter((function(e){return 0===e.search("span")}));e.data("contentWidthContainers",e.find(".content-12, .content-8, .content-6, .content-4")),e.data("originalWidth",t[0].split("span")[1])})),e.setupLinkClicks(),e.setupAlternateSizes(),e.addFocusEventListeners(),e.adjustPadding()},adjustPadding:function(){this.$items.each((function(e,t){i(t).find(".st-item-content > div")[0]&&0==i(t).find(".st-item-content > div")[0].children.length&&i(t).find(".st-item-content").addClass("no-padding")}))},addFocusEventListeners:function(){var e=this,i=e.$items.find(".parent-level-link");i.focusin((function(){e.onFocusIn(this)})),i.focusout((function(){e.onFocusOut(this)}))},onFocusIn:function(e){this.addFocusClassByState(i(e),!1)},onFocusOut:function(e){this.addFocusClassByState(i(e),!0)},addFocusClassByState:function(e,i){var t=e.find(".st-item-content .primary-link"),n=e.find(".st-item-content"),s=t.length?t:n;e.find(".st-item-content > div")[0]&&0!=e.find(".st-item-content > div")[0].children.length&&(i?s.removeClass("focused"):s.addClass("focused"))},textWithoutTags:function(e){return i("<p>"+e+"</p>").contents().filter((function(){return 3===this.nodeType})).text()},lastWord:function(e){var t=i.trim(e).split(" ");return t[t.length-1]},addSpanBeforeTheWord:function(e,i){var t=e.lastIndexOf(i);return e.slice(0,t)+e.slice(t).replace(i,'<span class="no-wrap">'+i)},preventChevronWrap:function(){var e=this;o.isTyrionApp||e.$el.find("i.fonticon-10-chevron-sm.l-o-d").each((function(t,n){var s=i(i(n).parent()),o=s.html(),a=i(n).prop("outerHTML"),r=o.substring(0,o.indexOf(a)),l=o.substring(o.indexOf(a)),d=e.lastWord(e.textWithoutTags(r));r=e.addSpanBeforeTheWord(r,d),l=l.replace(a,a+"</span>"),s.html(r+l)}))},renderDesktop:function(){var e=this;e.$items.each((function(){var t=i(this),n=t.data("originalWidth");t.removeClass(e.spanClasses).addClass("span"+n),t.data("contentWidthContainers").add(t).removeClass(e.contentWidthClasses).addClass("content-"+n)}))},renderEvenColumns:function(e){var t=this;t.$items.each((function(){var n=i(this);if("12"!==n.data("originalWidth")){n.removeClass(t.spanClasses).addClass("span"+e);var s=n.data("contentWidthContainers");s&&s.add(n).removeClass(t.contentWidthClasses).addClass("content-"+e)}}))},setupAlternateSizes:function(){var e=this;for(var t in e.$itemsEvaluatedOnResize=i(),l){var n=e.$el.find("."+t);e.$itemsEvaluatedOnResize=e.$itemsEvaluatedOnResize.add(n),n.data("originalLayout",t),n.data("mobileLayout",l[t])}},assignMobileLayouts:function(){this.$el.find(".st-video-container").remove(),this.$itemsEvaluatedOnResize.each((function(){var e=i(this);e.removeClass(e.data("originalLayout")).addClass(e.data("mobileLayout"))}))},assignDefaultLayouts:function(){this.$itemsEvaluatedOnResize.each((function(){var e=i(this);e.removeClass(e.data("mobileLayout")).addClass(e.data("originalLayout"))}))},onCloseVideoClick:function(){a.off("global:resizeDebounced",self.$recenterVideoProxy)},recenterVideo:function(){r.center()},setupLinkClicks:function(){var e=this;o.isTyrionApp||e.$el.hammer({stop_browser_behavior:{touchAction:"auto"}}).on("tap.secondarytouts",".st-item:not(.carousel)",(function(t){t.preventDefault();var n=i(t.gesture.target).closest("a");if(n.hasClass("mini-promo")){var s=n.parent().find(".sony-video").clone();r.create({content:s,closed:i.proxy(e.onCloseVideoClick,e)}),s.sonyVideo(),r.center(),e.$recenterVideoProxy=i.proxy(e.recenterVideo,e),a.on("global:resizeDebounced",e.$recenterVideoProxy)}}))}},d})),define("modules/secondary_tout/index",["require","modules/secondary_tout/module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/secondary_tout/module");return e("secondary/sony-init-module-below-viewport")({triggerElement:$(".secondary-tout"),initializeImmediately:!0,callback:function(){i.init($("body"))}}),{SecondaryTouts:i}})),define("modules/carousel_tout/module",["require","jquery","modernizr","secondary/index"],(function(e){var i=e("jquery"),t=e("modernizr"),n=(e("secondary/index").sonyCarousel,{init:function(){i(".whats-new-tout").each((function(){new s(this)}))}}),s=function(e){var n=this;n.$el=i(e),n.useCSS3=t.csstransforms&&t.csstransitions,n.$carousel=n.$el.find(".whats-new-carousel"),n.selectedSlide=Math.round(n.$carousel.data("selectedSlide"))||0,n.init(),log("SONY : WhatsNewTout : Initialized")};return s.prototype={constructor:s,init:function(){var e=this;e.$carousel.sonyCarousel({wrapper:".whats-new-carousel-wrapper",slides:".whats-new-carousel-slide",useCSS3:e.useCSS3,looped:!0,pagination:!0,paginationTheme:"light",$dotNavWrapper:e.$el.find(".wnc-pagination"),paddles:!0,showPaddlesInTouch:!0,useSmallPaddles:!0,selectedSlide:e.selectedSlide})}},n})),define("modules/carousel_tout/index",["require","modules/carousel_tout/module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/carousel_tout/module");return e("secondary/sony-init-module-below-viewport")({triggerElement:$(".whats-new-carousel-wrapper"),callback:i.init}),{WhatsNewTout:i}})),define("modules/related_products/module",["require","jquery","iQ","bootstrap","modernizr","require/sony-global-settings","require/sony-global-environment","secondary/index","secondary/index","secondary/index","secondary/index","secondary/index","secondary/index"],(function(e){var i=e("jquery"),t=e("iQ"),n=(e("bootstrap"),e("modernizr")),s=e("require/sony-global-settings"),o=(e("require/sony-global-environment"),e("secondary/index").sonyFavorites),a=(e("secondary/index").jqueryShuffle,e("secondary/index").sonyScroller,e("secondary/index").sonyEvenHeights,e("secondary/index").sonyPaddles,e("secondary/index").sonyNavigationDots,"visible"),r="hidden",l={init:function(){var e=i(".related-products").relatedProducts(),o=!1,a=0;e.each((function(){var e=i(this).closest(".rp-container-tabbed"),r=e.length>0,l=e.find(".related-products").length;if(a++,r&&!o){o=!0;var d,u,c=(s.transEndEventName,e.closest(".rp-section").find(".rp-tabs").find(".rp-tab")),h=1,p=e.find(".related-products[data-rp-panel-id="+h+"]");if(e.find(".related-products[data-rp-panel-id]").not(p).addClass("inactive invisible"),c.eq(0).addClass("active"),!c.length)return;u=function(){var e=i(this);e.addClass("invisible"),e.data("relatedProducts").disableShuffle()},d=function(n){var s=i(this),o=s.data("rpPanelId"),a=p;n.preventDefault(),s.addClass("active").siblings().removeClass("active"),o!==h&&(h=o,p=e.find(".related-products[data-rp-panel-id="+h+"]"),a.addClass("inactive"),p.removeClass("inactive invisible"),i.proxy(u,a[0])(),p.data("relatedProducts").enableShuffle(),t.update())},n.touch?c.on("click",!1).on("touchend",d):c.on("click",d)}a>=l&&(o=!1,a=0)}))}},d=function(e,t){var o=this;i.extend(o,i.fn.relatedProducts.defaults,t),o.DEBUG=!1,o.LANDSCAPE_BREAKPOINT=1024,o.MOBILE_BREAKPOINT=568,o.MAX_WIDTH_FOR_IE=910,o.$paddles=i({}),o.$el=i(e),o.$slides=o.$el.find(".rp-slide"),o.globalLoader=o.$el.closest(".rp-section").find(".global-loader"),o.$currentSlide=null,o.$shuffleContainers=o.$slides.find(".shuffle-container"),o.$galleryItems=o.$el.find(".gallery-item"),o.$iqImages=o.$galleryItems.find(".iq-img"),o.$plate=o.$slides.eq(0).find(".gallery-item.plate").first(),o.$container=o.$el.find(".rp-container").eq(0),o.$favorites=o.$el.find(".js-favorite"),o.$tabbedContainer=o.$el.parent(),o.$bulletNav=i(),o.$doc=s.$document,o.$win=s.$window,o.$html=s.$html,o.ev=i({}),o.prefixed=n.prefixed,o.transitionName=o.prefixed("transition"),o.isTabbedContainer=o.$tabbedContainer.length&&o.$tabbedContainer.hasClass("rp-container-tabbed"),o.transitionEndName=s.transEndEventName,o.mode=o.$el.data("mode").toLowerCase(),o.variation=o.$el.data("variation").split("-")[2],o.numSlides=o.$slides.length,o.sliderOverflow=o.$el.find(".rp-overflow").eq(0),o.previousId=-1,o.currentId=0,o.slidePosition=0,o.animationSpeed=700,o.slides=[],o.slideCount=o.$slides.length,o.currentContainerWidth=0,o.sPosition=0,o.scrollerModule=null,o.shuffle=null,o.shuffleSpeed=s.shuffleSpeed,o.shuffleEasing=s.shuffleEasing,o.paddlesEnabled=!1,o.resizeTimeout=null,o.startInteractionPointX=null,o.isTransitioning=!0,o.lastTouch=null,o.handleStartPosition=null,o.dragThreshold=50,o.useCSS3Transitions=n.csstransitions,o.hasMediaQueries=n.mediaqueries,o.mq=n.mq,o.oldIE=s.isLTIE10,o.isIE7orIE8=s.isLTIE10,o.inited=!1,o.isResponsive=!o.isIE7orIE8&&!s.isLTIE10&&o.hasMediaQueries,o.tileHeightSizeFix=0,o.hasInitedMobile=!1,o.isMobileMode=!1,o.isDesktopMode=!1,o.isTabletMode=!1,o.breakPointChanged=!1,o.accelerationPos=0,o.compatibilityTypes=o.$el.parents(".rp-section").find(".compatibility-types"),o.init(),o.globalLoader.addClass(r),log("SONY : RelatedProducts : Initialized")};return d.prototype={init:function(){var e=this,t=e.$galleryItems.filter(".normal").find(".product-img");e.$win.width()<569&&e.$el.css({opacity:0}),e.initAnimationProps(),e.setupEasing(),e.initEvents(),e.initShuffleFns(),e.storeGalleryItemParentSlides(),e.setupLinkClicks(),e.initFavorites();for(var n=t.find(".iq-img"),s=0,o=n.length;o>s;s++)n.get(s).addEventListener("imageLoaded",(function(){i(this).css("max-height",t.first().height())}));("3up"===e.variation||"4up"===e.variation||"5up"===e.variation)&&e.setSortPriorities(),e.$slides.length>1?(e.createNavigation(),e.hasTouch||e.createPaddles(),e.$slides.length>1&&e.$container.on(e.downEvent,(function(i){e.onDragStart(i)}))):e.$pagination=i({}),e.setSortPriorities(),e.setupResizeListener(),e.$win.trigger("resize.rp"),e.showCompatibilityInfo()},showCompatibilityInfo:function(){return this.compatibilityTypes&&this.compatibilityTypes.removeClass(r),!1},mqFix:function(){var e=this;(!e.hasMediaQueries&&e.isIE7orIE8||e.oldIE)&&(e.mq=function(){return!1})},initAnimationProps:function(){var e=this;e.useCSS3Transitions&&(e.use3dTransform=n.csstransforms3d),e.useCSS3Transitions?(e.TP="transitionProperty",e.TD="transitionDuration",e.TTF="transitionTimingFunction",e.yProp=e.xProp=e.prefixed("transform"),e.use3dTransform?(e.tPref1="translate3d(",e.tPref2="px, ",e.tPref3="px, 0px)"):(e.tPref1="translate(",e.tPref2="px, ",e.tPref3="px)"),e.$container[e.prefixed(e.TP)]=e.prefixed("transform")):(e.xProp="left",e.yProp="top")},initEvents:function(){var e=this;n.touch?(e.hasTouch=!0,e.downEvent="touchstart.rp",e.moveEvent="touchmove.rp",e.upEvent="touchend.rp",e.cancelEvent="touchcancel.rp",e.lastItemFriction=.5):(e.hasTouch=!1,e.lastItemFriction=.2,e.downEvent="mousedown.rp",e.moveEvent="mousemove.rp",e.upEvent="mouseup.rp",e.cancelEvent="mouseup.rp",e.clickEvent="click.rp")},storeGalleryItemParentSlides:function(){this.$galleryItems.each((function(){var e=i(this);e.data("slide",e.parent())}))},setupLinkClicks:function(){var e=this;e.$el.find("a.gallery-item, .gallery-item a").on(e.tapOrClick(),(function(t){var n,s,o=i(this),a=o.hasClass("plate")?o.find("a").eq(0).attr("href"):o.attr("href");n=e.hasTouch?t.originalEvent.touches[0]||{pageX:0}:t,e.startInteractionTime&&e.startInteractionPointX&&(s=Math.abs(n.pageX-e.startInteractionPointX),(new Date).getTime()-e.startInteractionTime<250&&25>s&&a&&"undefined"!=a&&(window.location=a))}))},toString:function(){return"[ object RelatedProducts ]"},initFavorites:function(){return this.favorites=new o(this.$el,{itemSelector:".gallery-item .js-favorite"}),this.favorites.highlightFavoritedProducts(),this},initShuffleFns:function(){var e=this;e.shuffleGutters=function(i){var t=0,o=0;return!n.mediaqueries||e.mq("(min-width: 981px)")||s.isLTIE10?(t=s.GUTTER_WIDTH_SLIM_5*i,o=5):e.mq("(min-width: 569px)")&&(o=4,t=s.GUTTER_WIDTH_SLIM*i),e.setColumns(o),0>t&&(t=0),t},e.shuffleColumns=function(i){var t=0;return 0===(t=!n.mediaqueries||e.mq("(min-width: 981px)")||s.isLTIE10?s.COLUMN_WIDTH_SLIM_5*i:e.mq("(min-width: 569px)")?s.COLUMN_WIDTH_SLIM*i:i)&&(t=.001),t}},setupResizeListener:function(){var e=this;"suggested"===e.mode||e.oldIE?(e.$el.css({opacity:1,visibility:a}),e.$galleryItems.not(".blank").css({visibility:a,opacity:1}),e.globalLoader.addClass(r),e.isMobileMode||e.$pagination.show()):e.$win.on("resize.rp",(function(){!e.isTabletMode&&!e.isMobileMode&&e.$win.width()>e.MOBILE_BREAKPOINT?(e.$galleryItems.css({visibility:r,opacity:0}),e.$pagination.hide(),e.globalLoader.removeClass(r)):e.hasInitedMobile&&(e.$el.css({opacity:1,visibility:a}),e.isMobileMode||e.$pagination.show(),e.globalLoader.addClass(r))})),e.$pagination.hide(),e.$win.on("resize.rp",i.debounce(100,i.proxy(e.handleResize,e)))},fixTruncatedPriceText:function(){this.$el.find(".product-price").each((function(){var e=i(this).find(".price-prefix");e.hasClass("wrap")&&e.removeClass("wrap"),this.offsetWidth<this.scrollWidth&&e.addClass("wrap")}))},handleResize:function(){var e=this;return e.oldIE&&e.inited?void e.updateSlides():(e.inited||(e.inited=!0),e.fixTruncatedPriceText(),e.checkForBreakpoints(),e.updateSliderSize(),e.updateSlides(),e.updatePaddles(),void("suggested"!==e.mode&&(clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout((function(){e.$shuffleContainers.each((function(){var t=i(this).data("shuffle");void 0!==t&&setTimeout((function(){e.updateSliderSize(),e.oldIE&&(s.isLTIE8?e.$galleryItems.each((function(){var e=i(this),t=e.find(".product-img");e.css({height:225}),e.hasClass("plate")?t.css({height:225}):e.hasClass("medium")?(e.css({height:600}),t.css({height:385})):e.hasClass("normal")&&(e.css({height:225}),t.css({height:140}))})):s.isLTIE10&&!s.isLTIE8&&e.$galleryItems.filter(".medium").find(".product-img").css({height:359}),t.update(),e.updateSlides()),e.oldIE?e.isMobileMode||(e.$pagination.show(),e.$pagination.stop(!0,!0).fadeIn(250)):(e.updateTiles(),t.update(),e.animateTiles(),e.breakPointChanged=!1)}),50)}))}),10))))},tapOrClick:function(){var e=this;return e.hasTouch?e.upEvent:e.clickEvent},createNavigation:function(){var e=this;if(i.fn.sonyNavDots){if(e.$pagination)return void e.$pagination.sonyNavDots("reset",{buttonCount:e.numSlides});e.$pagination=i("<div/>",{class:"navigation-container"}),e.$el.append(e.$pagination),e.$pagination.sonyNavDots({buttonCount:e.numSlides}),e.$pagination.on("SonyNavDots:clicked",(function(i,t){e.currentId=t,e.moveTo()})),e.ev.on("rpOnUpdateNav",i.debounce(250,(function(){if(e.$pagination.sonyNavDots("reset",{activeButton:e.currentId}),e.$html.hasClass("lt-ie9")){e.$pagination.css("display","none"),e.$pagination.get(0).offsetHeight,e.$pagination.css("display","block")}})))}},createPaddles:function(){var e=this;e.$el.sonyPaddles({paddlePosition:"outset"}),e.$el.on("sonyPaddles:clickLeft",(function(){e.currentId--,e.currentId<0&&(e.currentId=0),e.moveTo()})),e.$el.on("sonyPaddles:clickRight",(function(){e.currentId++,e.currentId>=e.$slides.length&&(e.currentId=e.$slides.length-1),e.moveTo()})),e.onPaddleNavUpdate(),e.ev.on("rpOnUpdateNav",i.proxy(e.onPaddleNavUpdate,e))},onPaddleNavUpdate:function(){var e=this;e.$el.sonyPaddles("showPaddle","right"),e.$el.sonyPaddles("showPaddle","left"),0===e.currentId&&e.$el.sonyPaddles("hidePaddle","left"),e.currentId===e.numSlides-1&&e.$el.sonyPaddles("hidePaddle","right"),t.update()},togglePaddles:function(e){e?this.$el.find(".pagination-paddles").show():this.$el.find(".pagination-paddles").hide()},createShuffle:function(){var e=this;e.shuffle=e.$shuffleContainers.shuffle({itemSelector:".gallery-item",speed:e.shuffleSpeed,easing:e.shuffleEasing,columnWidth:e.shuffleColumns,gutterWidth:e.shuffleGutters,showInitialTransition:!1,useTransition:!1,buffer:25}).first().data("shuffle"),e.toggleShuffles()},toggleShuffles:function(){},setColumns:function(e){var i=this,t="span1 span2 span3 span4 span6",n="shuffle-",s=".gallery-item",o="slimgrid",a=o+5,r="span",l=".normal",d=".medium",u=".plate";return 5===e?i.$container.hasClass(n+5)||(i.$shuffleContainers.removeClass(o).addClass(a),i.$shuffleContainers.children(s).removeClass(t).filter(d).addClass(r+2).end().filter(u).addClass(r+2).end().filter(l).addClass(r+1)):4===e&&(i.$shuffleContainers.hasClass(n+4)||(i.$shuffleContainers.removeClass(a).addClass(o),i.$shuffleContainers.children(s).removeClass(t).filter(d).addClass(r+6).end().filter(u).addClass(r+6).end().filter(l).addClass(r+3))),i},setSortPriorities:function(){this.$slides.each((function(){var e=i(this),t=e.find(".gallery-item"),n=e.data("variation").split("-")[2],s=!1,o="priority",a="medium",r="normal",l="blank";t.each((function(){var e=i(this);"4up"===n?e.hasClass(a)?e.data(o,5):e.hasClass(r)&&!s?(e.data(o,2),s=!0):e.hasClass(l)?e.data(o,3):e.hasClass(r)&&!0===s&&e.data(o,4):"3up"===n&&(e.hasClass(a)?e.data(o,2):e.hasClass(r)&&e.data(o,3),e.hasClass(l)&&e.data(o,100))}))}))},sortByPriority:function(){var e=this,t=e.mq("(min-width: 569px) and (max-width: 980px)");t&&!e.sorted?(e.$shuffleContainers.each((function(){var e=i(this),t=e.parent().data("variation").split("-")[2];e.shuffle("sort",{by:function(e){var i=e.hasClass("plate")?1:e.hasClass("medium")?2:3;return("4up"===t||"3up"===t)&&(i=e.data("priority")),i||void 0}})})),e.sorted=!0):!t&&e.sorted&&(e.$shuffleContainers.shuffle("sort",{}),e.sorted=!1)},checkForBreakpoints:function(){var e=this,o=e.$win.width(),a=o>e.LANDSCAPE_BREAKPOINT?"desktop":o>e.MOBILE_BREAKPOINT?"tablet":"mobile",l=!1;switch((!n.mediaqueries||s.isLTIE10)&&(a="desktop"),a){case"desktop":if("suggested"===e.mode)return e.$el.find(".gallery-item").addClass("span6"),e.$el.removeClass("grid").addClass("slimgrid"),void e.sortTagLines2up();if(!0===e.isDesktopMode)return;!0===e.isMobileMode&&(l=!0,e.returnToFullView()),e.isTabletMode=e.isMobileMode=e.hasInitedMobile=!1,e.isDesktopMode=!0,e.breakPointChanged=!0,e.sliderOverflow.css("overflow",r),e.$el.parents(".rp-section").css("overflow",""),e.$el.removeClass("rp-tablet rp-mobile").addClass("rp-desktop"),(null!==e.scrollerModule||l)&&(e.scrollerModule.destroy(),e.scrollerModule=null),(null===e.shuffle||l)&&(e.$container.css("width","100%"),e.createShuffle()),e.sortByPriority(),t.update(),e.$el.css("margin-top","-20px"),e.hasTouch||e.togglePaddles(!0);break;case"tablet":if(l=e.isMobileMode,"suggested"===e.mode)return e.$el.find(".gallery-item").addClass("span6"),e.$el.removeClass("slimgrid").addClass("grid"),void e.sortTagLines2up();if(!0===e.isMobileMode&&e.returnToFullView(),!0===e.isTabletMode)return;e.isMobileMode=e.isDesktopMode=e.hasInitedMobile=!1,e.isTabletMode=!0,e.breakPointChanged=!0,e.$el.removeClass("rp-desktop rp-mobile").addClass("rp-tablet"),e.sliderOverflow.css("overflow",r),e.$el.parents(".rp-section").css("overflow",""),null!==e.scrollerModule&&(e.scrollerModule.destroy(),e.scrollerModule=null),null===e.shuffle&&(e.$container.css("width","100%"),e.createShuffle()),e.sortByPriority(),t.update(),e.$el.css("margin-top","-20px"),e.hasTouch||e.togglePaddles(!0);break;case"mobile":if(!0===e.isMobileMode)return;if("suggested"===e.mode)return e.$el.find(".gallery-item").removeClass("span6"),e.$el.removeClass("grid slimgrid"),void e.sortTagLines2up();e.isTabletMode=e.isDesktopMode=!1,e.isMobileMode=!0,e.breakPointChanged=!0,e.$el.removeClass("rp-tablet rp-desktop").addClass("rp-mobile"),null!==e.shuffle&&(e.shuffle.destroy(),e.shuffle=null,e.sorted=!1,e.$shuffleContainers.each((function(){var e=i(this).data("shuffle");void 0!==e&&(e.destroy(),e=null)}))),e.shuffle=null,e.$bulletNav.hide(),t.update(),null!==e.scrollerModule&&(e.scrollerModule.destroy(),e.scrollerModule=null),e.initMobileBreakpoint(),e.togglePaddles(!1),e.checkTileHeights()}e.setNameHeights(e.$shuffleContainers)},setGrabCursor:function(){var e=this;e.hasTouch||(e.grabbingCursor?e.sliderOverflow.css("cursor",e.grabbingCursor):(e.sliderOverflow.removeClass("grab-cursor"),e.sliderOverflow.addClass("grabbing-cursor")))},updateSliderSize:function(){var e=this,t=i(".shuffle-container").eq(0).height()+16;if(e.oldIE)e.$el.css("height","495px");else if("suggested"!==e.mode){if(!0===e.isTabletMode)return 0===t&&(t=Math.ceil(.984615385*i(".shuffle-container").eq(0).width())),e.$el.css("height",t+100+"px"),void(e.isTabbedContainer&&e.$tabbedContainer.css("height",t+100+"px"));if(!0===e.isMobileMode)return e.$el.css("height",290),void(e.isTabbedContainer&&e.$tabbedContainer.css("height",290));0===t&&(t=Math.ceil(.509803922*i(".shuffle-container").eq(0).width())),e.$win.width()<1120&&(t+=20),e.$el.css("height",t+40+"px"),e.isTabbedContainer&&e.$tabbedContainer.css("height",t+40+"px")}},getPagePosition:function(e){var i=this;if(e.pageX||e.originalEvent)return i.lastTouch=i.lastTouch||{},("touchmove"===e.type||"touchstart"===e.type)&&(i.lastTouch=e.originalEvent.touches[0]),{x:e.pageX||i.lastTouch.pageX,y:e.pageY||i.lastTouch.pageY}},onDragStart:function(e){var t,n=this;if(n.dragSuccess=!1,n.hasTouch){var s=e.originalEvent.touches;if(!(s&&s.length>0))return;t=s[0],s.length>1&&(n.multipleTouches=!0)}else if(t=e,e.preventDefault(),1!==e.which)return;n.isDragging=!0,n.$doc.on(n.moveEvent,i.proxy(n.dragMove,n)).on(n.upEvent,i.proxy(n.dragRelease,n)),n.currMoveAxis="",n.hasMoved=!1,n.pageX=t.pageX,n.pageY=t.pageY,n.startDragX=t.pageX,n.startPagePos=n.accelerationPos=t.pageX,n.horDir=0,n.verDir=0,n.currRenderPosition=n.sPosition,n.startTime=n.startInteractionTime=(new Date).getTime(),n.startInteractionPointX=t.pageX,n.handleStartPosition=n.getPagePosition(e),n.hasTouch&&n.sliderOverflow.on(n.cancelEvent,(function(e){n.dragRelease(e,!1)}))},renderMovement:function(e){var i=this;if(i.checkedAxis){var t=i.renderMoveTime,n=e.pageX-i.pageX,o=e.pageY-i.pageY,a=i.currRenderPosition+n,r=(i.currRenderPosition,a),l=i.currMoveAxis;i.hasMoved=!0,i.pageX=e.pageX,i.pageY=e.pageY;var d=i.pageX;"x"===l&&0!==n?i.horDir=n>0?1:-1:"y"===l&&0!==o&&(i.verDir=o>0?1:-1);var u=n;i.loop||(i.currSlideId<=0&&d-i.startPagePos>0&&(r=i.currRenderPosition+u*i.lastItemFriction),i.currSlideId>=i.numSlides-1&&d-i.startPagePos<0&&(r=i.currRenderPosition+u*i.lastItemFriction)),i.currRenderPosition=r,t-i.startTime>200&&(i.startTime=t,i.accelerationPos=d),i.setPosition(s.isRTL&&!i.isDragging?-i.currRenderPosition:i.currRenderPosition)}},setPosition:function(e){var i=this,t=i.sPosition=e;if(i.useCSS3Transitions){var n={};n[i.prefixed(i.TD)]="0ms",n[i.xProp]=i.tPref1+(t+i.tPref2+0)+i.tPref3,i.$container.css(n)}else i.$container.css(i.xProp,t)},dragRelease:function(e){var i,t,n,o,a=this;if(a.renderMoveEvent=null,a.lockAxis=!1,a.checkedAxis=!1,a.renderMoveTime=0,window.cancelAnimationFrame(a.animFrame),a.$doc.off(a.moveEvent).off(a.upEvent),a.hasTouch&&a.sliderOverflow.off(a.cancelEvent),a.currMoveAxis="",a.hasMoved){a.dragSuccess=!0,a.currMoveAxis="";var r,l=(a.minSlideOffset,a.hasTouch?e.originalEvent.changedTouches[0]:e).pageX,d=a.startPagePos,u=a.accelerationPos;a.currSlideId,a.numSlides,a.horDir,a.loop,i=Math.abs(l-d),r=s.isRTL?a.startDragX<l?1:0:a.startDragX>l?1:0,t=l-u,n=(new Date).getTime()-a.startTime,o=Math.abs(t)/n,Math.abs(i>a.hasTouch?.25*a.currentContainerWidth:.5*a.currentContainerWidth)?(1===r?(a.currentId++,a.currentId>=a.$slides.length&&(a.currentId=a.$slides.length-1)):(a.currentId--,a.currentId<0&&(a.currentId=0)),a.moveTo(o)):function(e,i){var t=-a.currentId*a.currentContainerWidth,n=Math.abs(a.sPosition-t);a.currAnimSpeed=n/i,e&&(a.currAnimSpeed+=250),a.currAnimSpeed=function(e){return 100>e?100:e>500?500:e}(a.currAnimSpeed),a.moveTo(i)}(!0,o)}},dragMove:function(e,i){var t,n,s=this,o=(s.getPagePosition(e).x,s.handleStartPosition.x,s.getPagePosition(e).y-s.handleStartPosition.y);if(s.hasTouch){if(s.lockAxis)return;var a=e.originalEvent.touches;if(!a)return;if(a.length>1)return;t=a[0]}else t=e;if(n=Math.abs(t.pageX-s.startInteractionPointX),s.hasMoved||(s.useCSS3Transitions&&s.$container.css(s.prefixed(s.TD),"0s"),function e(){s.isDragging&&(s.animFrame=window.requestAnimationFrame(e),s.renderMoveEvent&&n>10&&s.renderMovement(s.renderMoveEvent,i))}()),Math.abs(o)>s.dragThreshold)s.hasPassedThreshold=!0;else if(s.checkedAxis)e.preventDefault(),s.renderMoveTime=(new Date).getTime(),s.renderMoveEvent=t;else{var r=Math.abs(t.pageX-s.pageX)-Math.abs(t.pageY-s.pageY)- -7;if(r>7)e.preventDefault(),s.currMoveAxis="x",s.checkedAxis=!0;else if(-7>r){if(s.hasTouch)return;s.checkedAxis=!0}}},updateSlides:function(){var e=this,t=e.currentContainerWidth=e.$container.outerWidth(),n={},o=s.isRTL?e.currentId*t:-e.currentId*t,a=.5*(e.$win.width()-e.$el.find(".rp-slide").eq(0).outerWidth(!0));if(a>0&&!e.isIE7orIE8&&(o+=Math.ceil(a)),e.isIE7orIE8&&e.$win.width()<=910?(t=910,o=-e.currentId*t,o-=.5*(910-e.$win.width())):e.isIE7orIE8&&(o+=Math.ceil(a)),"suggested"!==e.mode)if(e.$slides.each((function(e){i(this).css({left:s.isRTL?-e*t+"px":e*t+"px"})})),e.useCSS3Transitions){if(e.isMobileMode)return;n[e.prefixed(e.TD)]="0ms",n[e.prefixed(e.TTF)]=e.css3Easing.sonyScrollEase,n[e.xProp]=e.tPref1+(o+e.tPref2+0)+e.tPref3,e.$container.css(n)}else n[e.xProp]=o,e.$container.animate(n,0)},moveTo:function(e){var n=this,o=s.isRTL?n.currentId*n.currentContainerWidth:-n.currentId*n.currentContainerWidth,a={},r=Math.abs(n.sPosition-o),l=.5*(n.$win.width()-i(".rp-slide").eq(0).outerWidth(!0));n.isIE7orIE8&&n.$win.width()<=910?(o=910*-n.currentId,o-=.5*(910-n.$win.width()),r=Math.abs(n.sPosition-o)):n.isIE7orIE8&&(o+=Math.ceil(l)),n.currAnimSpeed=function(e){return 100>e?80:e>500?400:e}(r/e),isNaN(n.currAnimSpeed)&&(n.currAnimSpeed=n.animationSpeed),l>0&&!n.isIE7orIE8&&(o+=Math.ceil(l)),n.useCSS3Transitions?(a[n.prefixed(n.TD)]=n.currAnimSpeed+"ms",a[n.prefixed(n.TTF)]=(n.currAnimSpeed,n.animationSpeed,n.css3Easing.sonyScrollEase),a[n.xProp]=n.tPref1+(o+n.tPref2+0)+n.tPref3,n.$container.css(a),n.$container.one(n.transitionEndName,(function(){n.toggleShuffles(),t.update()}))):(a[n.xProp]=o,n.$container.animate(a,n.currAnimSpeed)),n.sPosition=n.currRenderPosition=o,n.isTransitioning=!0,n.ev.trigger("rpOnUpdateNav")},returnToFullView:function(){var e=this;!1===e.isDesktopMode&&(e.isDesktopMode=!0,e.$galleryItems.each((function(){var e=i(this).removeClass("small-size mobile-item"),t=e.data("slide");e.appendTo(t)})),e.$container.css("width",""),e.$container.append(e.$slides),e.$slides.length>1&&e.$container.on(e.downEvent,(function(i){e.onDragStart(i)})),e.hasTouch||e.$paddles.show(),setTimeout((function(){e.updateSlides()}),750))},sortTagLines2up:function(){this.$el.find(".product-tagline").each((function(){var e=i(this);e.height()/parseInt(e.css("line-height"),10)>=2&&e.parent().addClass("two-line")}))},disableShuffle:function(){this.$shuffleContainers.each((function(){var e=i(this).data("shuffle");(void 0!==e||null!==e)&&e&&e.disable()}))},enableShuffle:function(){this.$shuffleContainers.each((function(){var e=i(this).data("shuffle");(void 0!==e||null!==e)&&e&&e.enable()}))},updatePaddles:function(){var e=this,i=e.$win.width(),t="px";if(e.paddlesEnabled){var n=e.$el.find(".plate"),s=n.length>0,o=n.outerHeight(!0),a=i-e.$el.find(".rp-slide").eq(0).width();e.mq("(min-width: 981px)")&&s?(e.$rightPaddle.css({top:o,right:a/4-parseInt(e.$rightPaddle.width(),10)/2+t}),e.$leftPaddle.css({top:o,left:a/4-parseInt(e.$leftPaddle.width(),10)+10+t})):e.mq("(min-width: 569px)")&&s&&(e.$rightPaddle.css({top:o+130,right:a/4-parseInt(e.$rightPaddle.width(),10)/2+20+t}),e.$leftPaddle.css({top:o+130,left:a/4-parseInt(e.$leftPaddle.width(),10)+35+t}))}},updateTiles:function(){var e=this,t=e.mq("(min-width: 981px)"),n=null,s=null,o=0,a="";return e.isMobileMode?void(n=e.$slides.find(".gallery-item.medium .product-img").first()).css("height",""):(e.$slides.each((function(){var r=i(this);a=r.data("variation").split("-")[2].toLowerCase(),n=r.find(".gallery-item.medium .product-img").first(),s=r.find(".gallery-item.normal").first();var l=(r.find(".gallery-item.plate").first().height(),e.mq("(max-width: 769px)"),r.find(".gallery-item.medium")),d=e.getMaxHeight(l),u=r.find(".gallery-item.normal"),c=r.find(".gallery-item.plate"),h=e.getMaxHeight(u),p=e.getMaxHeight(c),f=h>p?h:p;if(t){var m={"max-height":f,height:f};u.css(m),c.css(m)}switch(a){case"5up":t?(o=s.outerHeight(!0)+s.find(".product-img").height(),n.css({height:o+"px"})):(o=r.find(".plate").height()+s.find(".product-img").height()+parseInt(s.css("marginTop"),10),n.css({height:o+"px"}));break;case"4up":t?(o=r.find(".plate").height()+s.find(".product-img").height()+parseInt(s.css("marginTop"),10),n.css({height:o+"px"})):(o=s.outerHeight(!0)+s.find(".product-img").height(),n.css("height",o));break;case"3up":t?(o=r.find(".plate").height()+s.find(".product-img").height()+parseInt(s.css("marginTop"),10),n.css({height:o+"px"})):(o=d>p?d:p,n.css("height",""),l.css("height",o),c.css("height",o))}})),e.checkTileHeights(),void(e.breakPointChanged?setTimeout((function(){e.handleResize()}),700):setTimeout((function(){e.updateSliderSize()}),250)))},getMaxHeight:function(e){var t=0;return e.each((function(){var e=i(this).find(".gallery-item-inner > div").get().reduce((function(e,t){return e+i(t).outerHeight()}),0);e>t&&(t=e)})),t},checkTileHeights:function(){var e=this.$galleryItems.filter(".normal").find(".product-img"),i=e.first().height();this.$win.width()<569&&(i="100%"),e.find("img").css({"max-height":i})},animateTiles:function(){var e=this,t=0;return e.globalLoader.addClass(r),e.oldIE?void e.$pagination.stop(!0,!0).fadeIn(250):(e.$galleryItems.not(".blank").each((function(){var e,n=i(this);n.css({visibility:a}),n.hasClass("plate")||n.hasClass("medium"),e=!0===n.hasClass("plate")?0:!0===n.hasClass("medium")?150:250+Math.floor(500*Math.random()),t+=e,n.stop(!0,!0).delay(e).animate({opacity:1},{duration:250,complete:function(){}})})),void((t=Math.min(750,t))>0?setTimeout((function(){e.isMobileMode||e.$pagination.stop(!0,!0).fadeIn(250)}),t):e.isMobileMode||e.$pagination.stop(!0,!0).fadeIn(250)))},initMobileBreakpoint:function(){var e=this;e.$container.off(e.downEvent),e.$paddles.hide(),e.$pagination.hide(),e.$slides.each((function(){var e=i(this),t=e.find(".plate").eq(0);e.prepend(t)})),e.$galleryItems.detach().addClass("small-size"),e.$slides.detach(),e.$galleryItems.removeAttr("style"),e.$galleryItems.addClass("mobile-item").first().removeClass("mobile-item"),e.$galleryItems.not(".blank").appendTo(e.$container),e.$el.css("margin-top","0px"),e.$el.find(".gallery-item.medium").css("height",""),e.$el.find(".gallery-item.medium .product-img").css("height",""),setTimeout((function(){null!==e.scrollerModule&&(e.scrollerModule.destroy(),e.scrollerModule=null),e.scrollerModule=e.sliderOverflow.scrollerModule({contentSelector:".rp-container",itemElementSelector:".gallery-item",mode:"free",lastPageCenter:!1,extraSpacing:0,iscrollProps:{snap:!1,hScroll:!0,vScroll:!1,hScrollbar:!1,vScrollbar:!1,momentum:!0,bounce:!0,lockDirection:!0,onBeforeScrollStart:null,onScrollEnd:i.proxy(e.onScrollerEnd,e)}}).data("scrollerModule"),e.sliderOverflow.css("overflow",a),e.$el.parents(".rp-section").css("overflow",r),e.$galleryItems.find(".product-name").evenHeights(),e.$el.find(".gallery-item.medium").css("height",""),e.$el.find(".gallery-item.medium .product-img").css("height",""),e.hasInitedMobile=!0,t.update(),e.checkTileHeights(),e.$el.stop(!0,!0).delay(100).animate({opacity:1},250)}),100)},onScrollerEnd:function(){t.update(),this.checkTileHeights()},setNameHeights:function(e){var t=0;return e.find(".product-name-wrap").css("height","").each((function(){var e=i(this),n=parseFloat(e.css("height"));n>t&&(t=n)})).css("height",t),this},setupEasing:function(){this.css3Easing={sonyScrollEase:"cubic-bezier(0.000, 1.035, 0.400, 0.985)"}}},i.fn.relatedProducts=function(e){var t=arguments;return this.each((function(){var n=i(this);if("object"!=typeof e&&e){var s=n.data("relatedProducts");if(s&&s[e])return s[e].apply(s,Array.prototype.slice.call(t,1))}else n.data("relatedProducts")||n.data("relatedProducts",new d(n,e))}))},i.fn.relatedProducts.defaults={throttleTime:50,autoScaleContainer:!0,minSlideOffset:10,navigationControl:"bullets"},l})),define("modules/related_products/index",["require","modules/related_products/module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/related_products/module");return e("secondary/sony-init-module-below-viewport")({triggerElement:$(".rp-section"),callback:i.init}),{RelatedProducts:i}})),define("modules/recently_viewed/sony_carousel_in_module",["require","jquery","modernizr","require/sony-global-utilities","require/sony-global-environment","require/sony-global-settings","iQ","enquire","secondary/sony-favorites","secondary/sony-carousel","secondary/sony-scroller","secondary/sony-evenheights"],(function(e){var i=e("jquery"),t=e("modernizr"),n=e("require/sony-global-utilities"),s=e("require/sony-global-environment"),o=e("require/sony-global-settings"),a=e("iQ"),r=e("enquire"),l=e("secondary/sony-favorites"),d=(e("secondary/sony-carousel"),e("secondary/sony-scroller"),e("secondary/sony-evenheights"),{init:function(e){var t=i(e);t.length&&new u(t[0])}}),u=function(e){var t=this;t.isDesktop=!1,t.isMobile=!1,t.useBounce=!(o.isVita||o.isLTIE9),t.useMomentum=!(o.isVita||o.isLTIE9),t.$el=i(e),t.init(),log("SONY : SonyCarousel : Initialized")};return u.prototype={constructor:u,init:function(){var e=this;e.setVars().setupBreakpoints(),e.hasFavorites&&e.initExtendedModule(),setTimeout((function(){e.$wrapper.addClass("in")}),0),e.onResize()},setVars:function(){var e=this,i=e.$el.data("paddleWrapper");return e.$paddleWrapper=i?e.$el.find(i):void 0,e.$wrapper=e.$el.find(".sony-carousel-wrapper"),e.$carousel=e.$el.find(".sony-carousel"),e.$favorites=e.$el.find(".js-favorite"),e.$productNames=e.$el.find(".product-name-wrap"),e.hasFavorites=e.$favorites.length>0,e},onResize:function(){this.$productNames.evenHeights(),i(".product-price").each((function(){var e=i(this).find(".price-prefix");e.hasClass("wrap")&&e.removeClass("wrap"),this.offsetWidth<this.scrollWidth&&e.addClass("wrap")}))},initFavorites:function(){this.favorites=new l(this.$carousel,{itemSelector:".gallery-item .js-favorite",tooltip:!0}),this.favorites.highlightFavoritedProducts()},initExtendedModule:function(){var e=this;e.$productNames.evenHeights(),e.initFavorites(),s.on("global:resizeDebounced",i.proxy(e.onResize,e))},initCarousel:function(){var e=this;return e.$carousel.sonyCarousel({wrapper:".sony-carousel-wrapper",slides:".sony-carousel-slide",pagination:!0,paddles:!0,useSmallPaddles:!0,paddlePosition:"outset",$paddleWrapper:e.$paddleWrapper}),e},initScroller:function(){var e=this;e.$wrapper.scrollerModule({itemElementSelector:".gallery-item",iscrollProps:{bounce:e.useBounce,momentum:e.useMomentum,hScrollbar:!1,isOverflowHidden:!1,onAnimationEnd:a.update},getContentWidth:function(){var t=0,n=[],s=e.$el.find(".sony-carousel-slide");return s.css("width",""),s.each((function(){var e=0;i(this).find(".gallery-item").each((function(){e+=i(this).outerWidth(!0)})),e=Math.ceil(e),n.push(e),t+=e})),s.each((function(e){i(this).css("width",n[e])})),t}})},destroyCarousel:function(){return this.$carousel.sonyCarousel("destroy"),this},setupBreakpoints:function(){var e=this,i=e.$el.data("breakEarly"),n=i?"(min-width: 48em) and (max-width: 87.4375em)":"(min-width: 48em) and (max-width: 61.1875em)",s=i?"(min-width: 87.5em)":"(min-width: 61.25em)",o="(min-width: 48em)";return e.isTabletAndDesktopOnLoad=t.mq(n)&&t.mq(o),t.mediaqueries?r.register(o,(function(){e.setupDesktop()})).register(n,(function(){e.setupTablet()})).register(s,(function(){e.teardownTablet()})).register("(max-width: 47.9375em)",(function(){e.setupMobile()})):e.setupDesktop(),e},setupDesktop:function(){var e=this;e.isMobile&&(e.$wrapper.scrollerModule("destroy"),e.$carousel.find(".sony-carousel-slide").css("width",""),e.$el.find(".m-container").removeClass("container"),e.$wrapper.removeClass("grid"),setTimeout(n.forceWebkitRedraw,0)),!1===e.isTabletAndDesktopOnLoad&&e.initCarousel(),e.isTabletAndDesktopOnLoad=!1,e.isDesktop=!0,e.isMobile=!1},setupTablet:function(){var e=this;e.destroyCarousel(),e.arrangeItemsInSlides(4),e.initCarousel(),e.isTablet=!0},teardownTablet:function(){var e=this;e.isTablet&&(e.destroyCarousel(),e.arrangeItemsInSlides(6),e.initCarousel(),e.isTablet=!1)},setupMobile:function(){var e=this,i=e.isDesktop,t=!i;i&&(e.destroyCarousel(),setTimeout(n.forceWebkitRedraw,0)),e.$el.find(".m-container").addClass("container"),e.$wrapper.addClass("grid"),t?e.initScroller():setTimeout((function(){e.initScroller()}),300),e.isDesktop=!1,e.isMobile=!0},arrangeItemsInSlides:function(e){var i,t,n,s,o,a=document,r=a.createDocumentFragment(),l=this.$carousel.find(".gallery-item"),d=l.length,u=Math.ceil(d/e),c="span"+12/e,h=0;for(l.detach().removeClass("span2 span3 span4 span6").addClass(c);u>h;h++){for((n=a.createElement("div")).className="sony-carousel-slide",(s=a.createElement("div")).className="container",(o=a.createElement("div")).className="slimgrid",i=0;e>i;i++)l[t=h*e+i]&&o.appendChild(l[t]);s.appendChild(o),n.appendChild(s),r.appendChild(n)}this.$carousel.empty().append(r)}},d})),define("modules/related_products_dynamic/index",["require","modules/recently_viewed/sony_carousel_in_module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/recently_viewed/sony_carousel_in_module");e("secondary/sony-init-module-below-viewport")({triggerElement:$(".rp-section"),callback:function(){var e=".area.body .rp-section .rv-module";$(e).parent().find(".global-loader").addClass("hidden"),i.init(e);var t=$(".rp-section .rv-module").parent().find(".compatibility-types");t&&t.removeClass("hidden")}})})),define("modules/editorial_carousel/module",["require","jquery","modernizr","enquire","require/sony-global-environment","require/sony-global-settings","secondary/index"],(function(e){var i=e("jquery"),t=e("modernizr"),n=e("enquire"),s=e("require/sony-global-environment"),o=e("require/sony-global-settings"),a=e("secondary/index").sonyModal,r={init:function(){var e=i(".ec-module");e.length&&e.each((function(){new l(this)}))}},l=function(e){var t=this;t.isDesktop=!1,t.isMobile=!1,t.$el=i(e),t.init(),t.addClicksForVideoModal(),log("SONY : EditorialCarousel : Initialized")};return l.prototype={constructor:l,init:function(){var e=this;e.initialized=!1,e.$wrapper=e.$el.find(".sony-carousel-wrapper"),e.$carousel=e.$el.find(".sony-carousel"),e.$carouselSlideChildren=e.$carousel.find(".sony-carousel-slide-children"),e.$titles=e.$el.find(".tile-title"),e.$subtitles=e.$el.find(".tile-subtitle"),e.paginationTheme="dark"===e.$el.data("mode")?"light":"dark",e.selectedTile=Math.round(e.$carousel.data("selectedTile"))||0,e.$videoTiles=e.$carousel.find(".js-video-tile"),e.setupBreakpoints().onResize(),s.on("global:resizeDebounced",i.proxy(e.onResize,e)),e.fadeIn(),e.initialized=!0},fadeIn:function(){var e=this;setTimeout((function(){e.$el.find(".m-container").addClass("in")}),0)},initCarousel:function(){var e=this;e.$carousel.sonyCarousel({wrapper:".sony-carousel-wrapper",slides:".sony-carousel-slide",pagination:!0,paddles:!0,showPaddlesInTouch:!0,paddlePosition:"outset",paginationTheme:e.paginationTheme,looped:!o.isPS3,jumping:!o.isPS3,axis:"x",dragThreshold:2,selectedSlide:Math.floor(e.selectedTile/4)})},updateCarousel:function(){return this.$carousel.sonyCarousel("resetSlides").sonyCarousel("gotoNearestSlide"),this},fixCarousel:function(){return this.initialized?this.updateCarousel():this.initCarousel(),this},onResize:function(){var e=this;return requestAnimationFrame((function(){e.$titles.evenHeights(),e.$subtitles.evenHeights()})),e},setupBreakpoints:function(){var e=this,i="(min-width: 48em)",s="(min-width: 48em) and (max-width: 61.1875em)";return e.isTabletAndDesktopOnLoad=t.mq(s)&&t.mq(i),t.mediaqueries?n.register(i,(function(){e.setupDesktop()})).register(s,(function(){e.setupTablet()})).register("(min-width: 61.25em)",(function(){e.teardownTablet()})).register("(max-width: 47.9375em)",(function(){e.setupMobile()})):e.setupDesktop(),e},setupDesktop:function(){var e=this,i=e.isMobile,n=t.mq("(min-width: 48em) and (max-width: 61.1875em)");i&&(e.$el.find(".m-container").removeClass("container"),e.$el.find(".sony-carousel-slide").removeClass("slimgrid"),e.$wrapper.removeClass("grid"),n||e.arrangeItemsInSlides(4)),!0!==e.isTabletAndDesktopOnLoad&&e.fixCarousel(),e.isTabletAndDesktopOnLoad=!1,e.isDesktop=!0,e.isMobile=!1},setupTablet:function(){var e=this;e.arrangeItemsInSlides(3),e.fixCarousel(),e.isTablet=!0},teardownTablet:function(){var e=this;e.isTablet&&(e.arrangeItemsInSlides(4),e.fixCarousel(),e.isTablet=!1)},setupMobile:function(){var e=this;e.arrangeItemsInSlides(2),e.$el.find(".m-container").addClass("container"),e.$wrapper.addClass("grid"),e.$el.find(".sony-carousel-slide").addClass("slimgrid"),e.fixCarousel(),e.isDesktop=!1,e.isMobile=!0},arrangeItemsInSlides:function(e){var i,t,n,s,o,a=document,r=a.createDocumentFragment(),l=this.$carouselSlideChildren,d=l.length,u=Math.ceil(d/e),c=0;for(l.detach().removeClass("span2 span3 span4 span6").addClass("span"+12/e);u>c;c++){for((n=a.createElement("div")).className="sony-carousel-slide",(s=a.createElement("div")).className="container",(o=a.createElement("div")).className="slimgrid",i=0;e>i;i++)l[t=c*e+i]&&o.appendChild(l[t]);s.appendChild(o),n.appendChild(s),r.appendChild(n)}this.$carousel.empty().append(r)},addClicksForVideoModal:function(){s.trigger("pausevideo"),this.$videoTiles.on("click",(function(){a.create({content:i(this).find(".sony-video")}),s.trigger("global:onAddonClick")}))}},r})),define("modules/editorial_carousel/index",["require","modules/editorial_carousel/module","secondary/sony-init-module-below-viewport"],(function(e){var i=e("modules/editorial_carousel/module");return e("secondary/sony-init-module-below-viewport")({triggerElement:$(".editorial_carousel"),callback:i.init}),{EditorialCarouselE13:i}})),require(["modules/primary_tout/index","modules/pdp_slideshow/index","modules/tertiary_tout_container/index","modules/one_sony_tout_carousel/index","modules/secondary_tout/index","modules/carousel_tout/index","modules/related_products/index","modules/related_products_dynamic/index","modules/editorial_carousel/index"]),define("page/home",(function(){}));