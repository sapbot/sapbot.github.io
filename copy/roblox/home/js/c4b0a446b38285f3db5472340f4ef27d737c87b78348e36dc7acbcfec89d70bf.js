!function(){"use strict";var e=Roblox,t=CoreUtilities,r="experimentation",i=function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(){this.projectLayerMetadataMaps=[]}var n=(o.prototype.getAllValuesForLayer=function(r,i){var o=this;void 0===i&&(i=1);var n={url:e.EnvironmentUrls.apiGatewayUrl+"/product-experimentation-platform/v1/projects/"+i+"/values",withCredentials:!0},a={layers:((a={})[r]={},a)};return t.httpService.post(n,a).then((function(e){if(null!=e&&e.data){var t=null==e?void 0:e.data;e=null!==(e=o.projectLayerMetadataMaps[i])&&void 0!==e?e:new Map;return o.projectLayerMetadataMaps[i]=e,t.layers[r].experimentName&&e.set(r,t),t.layers[r].parameters}return Promise.reject()}))},o.prototype.logLayerExposure=function(t,o){void 0===o&&(o=1);var n,a,l,d=null===(a=this.projectLayerMetadataMaps[o])||void 0===a?void 0:a.get(t);d&&(n=d.layers[t],o=e.CurrentUser.isAuthenticated?e.CurrentUser.userId:0,a="number"==typeof(a=e.Cookies.getBrowserTrackerId())?a:0,o={uid:null==o?void 0:o.toString(),btid:null==a?void 0:a.toString(),project:null===(o=d.projectId)||void 0===o?void 0:o.toString(),version:null===(a=d.version)||void 0===a?void 0:a.toString(),ts:Date.now().toString(),lt:(new Date).toISOString(),target:r},(a={}).layer=t,a.experiment=n.experimentName,a.isAudienceSpecified=null===(t=n.isAudienceSpecified)||void 0===t?void 0:t.toString(),a.isAudienceMember=null===(t=n.isAudienceMember)||void 0===t?void 0:t.toString(),a.userAgent=d.userAgent,a.platformType=d.platformType,a.ptid=null===(d=d.platformTypeId)||void 0===d?void 0:d.toString(),a.segment=null===(d=n.segment)||void 0===d?void 0:d.toString(),a.experiment_variant=n.experimentVariant,a.hashUnit=n.primaryUnit,a.hashValue=null===(d=n.primaryUnitValue)||void 0===d?void 0:d.toString(),a.allocKey=n.primaryUnit,a.allocValue=null===(d=n.primaryUnitValue)||void 0===d?void 0:d.toString(),a.holdout=n.holdoutGroupExperimentName,a=a,l=i(i({},o),a),Object.keys(l).forEach((function(e){l[e]=null!==(e=l[e])&&void 0!==e?e:""})),e.EventStream.SendEventWithTarget("expExposed",r,l,e.EventStream.TargetTypes.WWW))},o);void 0===window.Roblox&&(window.Roblox={}),void 0===window.Roblox.ExperimentationService&&(window.Roblox.ExperimentationService=new n)}(),window.Roblox&&window.Roblox.BundleDetector&&window.Roblox.BundleDetector.bundleDetected("Experimentation");