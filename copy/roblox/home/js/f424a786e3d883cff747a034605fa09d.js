EventTracker=new function(){var o=this;o.logMetrics=!1,o.transmitMetrics=!0,o.localEventLog=[];var n=new function(){var o={};this.get=function(n){return o[n]},this.set=function(n,e){o[n]=e},this.remove=function(n){delete o[n]}},e=function(){return(new Date).valueOf()},l=function(o,n){var l=e();$.each(o,(function(o,e){t(e,n,l)}))},t=function(e,l,t){var i,a,r=n.get(e);r?(n.remove(e),i=t-r,o.logMetrics&&console.log("[event]",e,l,i),o.transmitMetrics&&(a=e+"_"+l,$.ajax({type:"POST",timeout:5e4,url:"/game/report-stats?name="+a+"&value="+i,crossDomain:!0,xhrFields:{withCredentials:!0}}))):o.logMetrics&&console.log("[event]","ERROR: event not started -",e,l)};o.start=function(){var o=e();$.each(arguments,(function(e,l){n.set(l,o)}))},o.endSuccess=function(){l(arguments,"Success")},o.endCancel=function(){l(arguments,"Cancel")},o.endFailure=function(){l(arguments,"Failure")},o.fireEvent=function(){$.each(arguments,(function(n,e){$.ajax({type:"POST",timeout:5e4,url:"/game/report-event?name="+e,crossDomain:!0,xhrFields:{withCredentials:!0}}),o.logMetrics&&console.log("[event]",e),o.localEventLog.push(e)}))}},"undefined"==typeof Roblox&&(Roblox={}),Roblox.Client={},Roblox.Client._installHost=null,Roblox.Client._installSuccess=null,Roblox.Client._CLSID=null,Roblox.Client._continuation=null,Roblox.Client._skip=null,Roblox.Client._isIDE=null,Roblox.Client._isRobloxBrowser=null,Roblox.Client._isPlaceLaunch=!1,Roblox.Client._silentModeEnabled=!1,Roblox.Client._bringAppToFrontEnabled=!1,Roblox.Client._numLocks=0,Roblox.Client._logTiming=!1,Roblox.Client._logStartTime=null,Roblox.Client._logEndTime=null,Roblox.Client._hiddenModeEnabled=!1,Roblox.Client._runInstallABTest=function(){},Roblox.Client._currentPluginVersion="",Roblox.Client._whyIsRobloxLauncherNotCreated=null,Roblox.Client._eventStreamLoggingEnabled=!1,Roblox.Client._launchMode="unknown",Roblox.Client.LauncherNotCreatedReasons={pluginNotInstalled:"pluginNotInstalled",pluginNotAllowed:"pluginNotAllowed",wrongInstallHost:"wrongInstallHost",wrongInstallHostAndPluginWasNotAllowed:"wrongInstallHostAndPluginWasNotAllowed",versionMismatch:"versionMismatch",unknownError:"unknownError"},Roblox.Client.ReleaseLauncher=function(o,n,e){if(n&&Roblox.Client._numLocks--,(e||Roblox.Client._numLocks<=0)&&(null!=o&&(document.getElementById("pluginObjDiv").innerHTML="",o=null),Roblox.Client._numLocks=0),Roblox.Client._logTiming){Roblox.Client._logEndTime=new Date;Roblox.Client._logEndTime.getTime(),Roblox.Client._logStartTime.getTime()}},Roblox.Client.IsUpToDateVersion=function(o){var n,e,l=Roblox.Client._currentPluginVersion;if(null==l||""==l)return!0;try{if("-1"==(n=o.Get_Version())||"undefined"==n)return!0}catch(o){return!1}if(l===n)return!0;var t=$.map(n.split(","),(function(o){return parseInt(o,10)})),i=$.map(l.split(","),(function(o){return parseInt(o,10)})),a=Math.min(i.length,t.length);for(e=0;e<a;e++){if(i[e]>t[e])return!1;if(i[e]<t[e])return!0}return t.length===i.length},Roblox.Client.GetInstallHost=function(o){if(Roblox.Client.IsIE())return o.InstallHost;var n=o.Get_InstallHost();return n.match(/roblox.com$/)?n:n.substring(0,n.length-1)},Roblox.Client.IsIE=function(){try{return!!new ActiveXObject("htmlfile")}catch(o){return!1}},Roblox.Client.browserRequiresPluginActivation=function(){return/firefox/i.test(navigator.userAgent)||window.chrome||window.safari},Roblox.Client.CreateLauncher=function(o){var n,e,l,t;if(Roblox.Client._logTiming&&(Roblox.Client._logStartTime=new Date),o&&Roblox.Client._numLocks++,(null==Roblox.Client._installHost||null==Roblox.Client._CLSID)&&"function"==typeof initClientProps&&initClientProps(),n=document.getElementById("robloxpluginobj"),e=$("#pluginObjDiv"),n||(Roblox.Client._hiddenModeEnabled=!1,Roblox.Client.IsIE()?(l='<object classid="clsid:'+Roblox.Client._CLSID+'"',l+=' id="robloxpluginobj" type="application/x-vnd-roblox-launcher"',l+=' codebase="'+Roblox.Client._installHost+'"><p>Failed to INIT Plugin</p></object>',$(e).append(l)):(l='<object id="robloxpluginobj" type="application/x-vnd-roblox-launcher"><p>Please Install the plugin</p></object>',$(e).append(l)),n=document.getElementById("robloxpluginobj")),!n)return Roblox.Client.ReleaseLauncher(n,o,!1),Roblox.Client._whyIsRobloxLauncherNotCreated=Roblox.Client.LauncherNotCreatedReasons.unknownError,null;if($("#robloxpluginobj p").is(":visible"))return Roblox.Client.ReleaseLauncher(n,o,!1),Roblox.Client._whyIsRobloxLauncherNotCreated=Roblox.Client.LauncherNotCreatedReasons.pluginNotInstalled,null;try{n.Hello()}catch(o){return Roblox.Client.browserRequiresPluginActivation()&&!$("#robloxpluginobj p").is(":visible")?Roblox.Client._whyIsRobloxLauncherNotCreated=Roblox.Client.LauncherNotCreatedReasons.pluginNotAllowed:(Roblox.Client.ReleaseLauncher(),Roblox.Client._whyIsRobloxLauncherNotCreated=Roblox.Client.LauncherNotCreatedReasons.unknownError),null}try{if(!(t=Roblox.Client.GetInstallHost(n))||t!=Roblox.Client._installHost)throw new Error("wrong InstallHost: (plugins):  "+t+"  (servers):  "+Roblox.Client._installHost)}catch(e){switch(Roblox.Client._whyIsRobloxLauncherNotCreated){case Roblox.Client.LauncherNotCreatedReasons.pluginNotAllowed:Roblox.Client._whyIsRobloxLauncherNotCreated=Roblox.Client.LauncherNotCreatedReasons.wrongInstallHostAndPluginWasNotAllowed;break;case Roblox.Client.LauncherNotCreatedReasons.wrongInstallHostAndPluginWasNotAllowed:break;default:Roblox.Client._whyIsRobloxLauncherNotCreated=Roblox.Client.LauncherNotCreatedReasons.wrongInstallHost}return Roblox.Client.ReleaseLauncher(n,o,!1),null}return Roblox.Client.IsUpToDateVersion(n)?n:(Roblox.Client._whyIsRobloxLauncherNotCreated=Roblox.Client.LauncherNotCreatedReasons.versionMismatch,null)},Roblox.Client.whyIsRobloxLauncherNotCreated=function(){return Roblox.Client._whyIsRobloxLauncherNotCreated},Roblox.Client.isIDE=function(){if(null==Roblox.Client._isIDE&&(Roblox.Client._isIDE=!1,Roblox.Client._isRobloxBrowser=!1,window.external))try{void 0!==window.external.IsRobloxAppIDE&&(Roblox.Client._isIDE=window.external.IsRobloxAppIDE,Roblox.Client._isRobloxBrowser=!0)}catch(o){}return Roblox.Client._isIDE},Roblox.Client.isRobloxBrowser=function(){return Roblox.Client.isIDE(),Roblox.Client._isRobloxBrowser},Roblox.Client.robloxBrowserInstallHost=function(){if(window.external)try{return window.external.InstallHost}catch(o){}return""},Roblox.Client.IsRobloxProxyInstalled=function(){var o=Roblox.Client.CreateLauncher(!1),n=!1;return null!=o&&(n=!0),Roblox.Client.ReleaseLauncher(o,!1,!1),!(!n&&!Roblox.Client.isRobloxBrowser())},Roblox.Client.IsRobloxInstalled=function(){try{var o=Roblox.Client.CreateLauncher(!1),n=Roblox.Client.GetInstallHost(o);return Roblox.Client.ReleaseLauncher(o,!1,!1),n==Roblox.Client._installHost}catch(o){return!!Roblox.Client.isRobloxBrowser()&&(n=Roblox.Client.robloxBrowserInstallHost())==Roblox.Client._installHost}},Roblox.Client.SetStartInHiddenMode=function(o){try{var n=Roblox.Client.CreateLauncher(!1);if(null!==n)return n.SetStartInHiddenMode(o),Roblox.Client._hiddenModeEnabled=o,!0}catch(o){}return!1},Roblox.Client.UnhideApp=function(){try{if(Roblox.Client._hiddenModeEnabled)Roblox.Client.CreateLauncher(!1).UnhideApp()}catch(o){}},Roblox.Client.Update=function(){EventTracker&&EventTracker.start("UpdateClient");try{var o=Roblox.Client.CreateLauncher(!1);o.Update(),Roblox.Client.ReleaseLauncher(o,!1,!1)}catch(o){EventTracker&&EventTracker.endFailure("UpdateClient")}},Roblox.Client.WaitForRoblox=function(o){var n;return Roblox.Client._skip?(window.location=Roblox.Client._skip,!1):(Roblox.Client._continuation=o,Roblox.Client._cancelled=!1,n="Windows",-1!=navigator.appVersion.indexOf("Mac")&&(n="Mac"),Roblox.Client.IsRobloxProxyInstalled()?(Roblox.Client._continuation(),!1):(Roblox.Client._whyIsRobloxLauncherNotCreated==Roblox.Client.LauncherNotCreatedReasons.pluginNotAllowed?(Roblox.InstallationInstructions.show("activation"),GoogleAnalyticsEvents&&GoogleAnalyticsEvents.FireEvent(["Plugin","Activation Begin",n])):(EventTracker&&EventTracker.start("InstallClient"),Roblox.InstallationInstructions.show("installation"),Roblox.Client._runInstallABTest(),GoogleAnalyticsEvents&&GoogleAnalyticsEvents.FireEvent(["Plugin","Install Begin",n]),Roblox.Client._eventStreamLoggingEnabled&&void 0!==Roblox.GamePlayEvents&&Roblox.GamePlayEvents.SendInstallBegin(null,play_placeId),(window.chrome||window.safari)&&(window.location.hash="#chromeInstall",$.cookie("chromeInstall",o.toString().replace(/play_placeId/,play_placeId.toString())),Roblox.Client._eventStreamLoggingEnabled&&void 0!==Roblox.GamePlayEvents&&($.cookie("chromeInstallPlaceId",play_placeId),$.cookie("chromeInstallLaunchMode",Roblox.GamePlayEvents.lastContext))),document.getElementById("downloadInstallerIFrame").src="/download/client"),window.setTimeout((function(){Roblox.Client._ontimer()}),1e3),!0))},Roblox.Client.ResumeTimer=function(o){Roblox.Client._continuation=o,Roblox.Client._cancelled=!1,window.setTimeout((function(){Roblox.Client._ontimer()}),0)},Roblox.Client.Refresh=function(){try{navigator.plugins.refresh(!1)}catch(o){}},Roblox.Client._onCancel=function(){return Roblox.InstallationInstructions.hide(),Roblox.Client._cancelled=!0,EventTracker&&EventTracker.endCancel("InstallClient"),!1},Roblox.Client._ontimer=function(){Roblox.Client._cancelled||(Roblox.Client.Refresh(),Roblox.Client.IsRobloxProxyInstalled()?(Roblox.InstallationInstructions.hide(),window.setTimeout((function(){(window.chrome||window.safari)&&"#chromeInstall"==window.location.hash&&(window.location.hash="",$.cookie("chromeInstall",null))}),5e3),EventTracker&&EventTracker.endSuccess("InstallClient"),Roblox.Client._continuation(),Roblox.Client._installSuccess&&Roblox.Client._installSuccess()):Roblox.Client._whyIsRobloxLauncherNotCreated==Roblox.Client.LauncherNotCreatedReasons.pluginNotAllowed?(Roblox.InstallationInstructions.show("activation"),window.setTimeout((function(){Roblox.Client._ontimer()}),1e3)):Roblox.Client._whyIsRobloxLauncherNotCreated==Roblox.Client.LauncherNotCreatedReasons.wrongInstallHostAndPluginWasNotAllowed?(Roblox.Client._whyIsRobloxLauncherNotCreated=null,Roblox.InstallationInstructions.hide(),Roblox.Client.WaitForRoblox(Roblox.Client._continuation)):window.setTimeout((function(){Roblox.Client._ontimer()}),1e3))},"undefined"==typeof Roblox&&(Roblox={}),Roblox.InstallationInstructions={show:function(o){var n,e,l;void 0===o&&(o="installation"),function(o){var n,e,l=$(".InstallInstructionsImage");navigator.userAgent.match(/Mac OS X 10[_|\.]5/)?(n=l.data("oldmacdelaysrc"),l&&void 0!==n&&(l.hasClass("src-replaced")?l.attr("src",n):l.attr("data-delaysrc",n))):(e=l.data("activationsrc"),"activation"===o&&void 0!==e&&(l.hasClass("src-replaced")?l.attr("src",e):l.attr("data-delaysrc",e)))}(o),n=0,(e=$(".InstallInstructionsImage"))&&void 0!==$(e).data("modalwidth")&&(n=$(".InstallInstructionsImage").data("modalwidth")),n>0?(l=($(window).width()-(n-10))/2,$("#InstallationInstructions").modal({escClose:!0,opacity:80,minWidth:n,maxWidth:n,overlayCss:{backgroundColor:"#000"},position:[50,l],zIndex:1031})):$("#InstallationInstructions").modal({escClose:!0,opacity:80,maxWidth:$(window).width()/2,minWidth:$(window).width()/2,overlayCss:{backgroundColor:"#000"},position:[50,"25%"],zIndex:1031})},hide:function(){$.modal.close()}},Roblox&&Roblox.BundleDetector&&Roblox.BundleDetector.bundleDetected("clientinstaller");